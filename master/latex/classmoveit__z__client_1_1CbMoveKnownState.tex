\hypertarget{classmoveit__z__client_1_1CbMoveKnownState}{}\section{moveit\+\_\+z\+\_\+client\+:\+:Cb\+Move\+Known\+State Class Reference}
\label{classmoveit__z__client_1_1CbMoveKnownState}\index{moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State@{moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State}}


{\ttfamily \#include $<$cb\+\_\+move\+\_\+known\+\_\+state.\+h$>$}



Inheritance diagram for moveit\+\_\+z\+\_\+client\+:\+:Cb\+Move\+Known\+State\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classmoveit__z__client_1_1CbMoveKnownState__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for moveit\+\_\+z\+\_\+client\+:\+:Cb\+Move\+Known\+State\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmoveit__z__client_1_1CbMoveKnownState__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmoveit__z__client_1_1CbMoveKnownState_a8840d740bac0275a2ead514bf72f31b2}{Cb\+Move\+Known\+State} (std\+::string pkg, std\+::string config\+\_\+path)
\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::map$<$ std\+::string, double $>$ \hyperlink{classmoveit__z__client_1_1CbMoveKnownState_ac5b7069781a33407d56cb19c2811a098}{load\+Joint\+States\+From\+File} (std\+::string pkg, std\+::string filepath)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 17 of file cb\+\_\+move\+\_\+known\+\_\+state.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmoveit__z__client_1_1CbMoveKnownState_a8840d740bac0275a2ead514bf72f31b2}\label{classmoveit__z__client_1_1CbMoveKnownState_a8840d740bac0275a2ead514bf72f31b2}} 
\index{moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State@{moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State}!Cb\+Move\+Known\+State@{Cb\+Move\+Known\+State}}
\index{Cb\+Move\+Known\+State@{Cb\+Move\+Known\+State}!moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State@{moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State}}
\subsubsection{\texorpdfstring{Cb\+Move\+Known\+State()}{CbMoveKnownState()}}
{\footnotesize\ttfamily moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State\+::\+Cb\+Move\+Known\+State (\begin{DoxyParamCaption}\item[{std\+::string}]{pkg,  }\item[{std\+::string}]{config\+\_\+path }\end{DoxyParamCaption})}



Definition at line 14 of file cb\+\_\+move\+\_\+known\+\_\+state.\+cpp.


\begin{DoxyCode}
15   : \hyperlink{classmoveit__z__client_1_1CbMoveJoints_a8d9f24fd96baa202c546654f3e92f51c}{CbMoveJoints}(\hyperlink{classmoveit__z__client_1_1CbMoveKnownState_ac5b7069781a33407d56cb19c2811a098}{loadJointStatesFromFile}(pkg, config\_path))
16 \{
17 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classmoveit__z__client_1_1CbMoveKnownState_ac5b7069781a33407d56cb19c2811a098}\label{classmoveit__z__client_1_1CbMoveKnownState_ac5b7069781a33407d56cb19c2811a098}} 
\index{moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State@{moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State}!load\+Joint\+States\+From\+File@{load\+Joint\+States\+From\+File}}
\index{load\+Joint\+States\+From\+File@{load\+Joint\+States\+From\+File}!moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State@{moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State}}
\subsubsection{\texorpdfstring{load\+Joint\+States\+From\+File()}{loadJointStatesFromFile()}}
{\footnotesize\ttfamily std\+::map$<$ std\+::string, double $>$ moveit\+\_\+z\+\_\+client\+::\+Cb\+Move\+Known\+State\+::load\+Joint\+States\+From\+File (\begin{DoxyParamCaption}\item[{std\+::string}]{pkg,  }\item[{std\+::string}]{filepath }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 20 of file cb\+\_\+move\+\_\+known\+\_\+state.\+cpp.



References generate\+\_\+debs\+::parser.


\begin{DoxyCode}
21 \{
22   filepath = ros::package::getPath(pkg) +\textcolor{stringliteral}{"/"} + filepath;
23   std::map<std::string, double> jointStates;
24 
25   ROS\_INFO(\textcolor{stringliteral}{"Opening file with joint known state: %s"},  filepath.c\_str());
26 
27   std::ifstream ifs(filepath.c\_str(), std::ifstream::in);
28   \textcolor{keywordflow}{if} (ifs.good() == \textcolor{keyword}{false})
29   \{
30     ROS\_ERROR(\textcolor{stringliteral}{"Error opening file with joint known states: %s"},  filepath.c\_str());
31     \textcolor{keywordflow}{throw} std::string(\textcolor{stringliteral}{"joint state files not found"});
32   \}
33 
34   \textcolor{keywordflow}{try}
35   \{
36 \textcolor{preprocessor}{#ifdef HAVE\_NEW\_YAMLCPP}
37     YAML::Node node = YAML::Load(ifs);
38 \textcolor{preprocessor}{#else}
39     YAML::Parser \hyperlink{namespacegenerate__debs_a4a9ae4bb85fc62d7973ea3d09ced6c26}{parser}(ifs);
40     \hyperlink{namespacegenerate__debs_a4a9ae4bb85fc62d7973ea3d09ced6c26}{parser}.GetNextDocument(node);
41 \textcolor{preprocessor}{#endif}
42 
43 \textcolor{preprocessor}{#ifdef HAVE\_NEW\_YAMLCPP}
44     \textcolor{keyword}{const} YAML::Node &wp\_node\_tmp = node[\textcolor{stringliteral}{"joint\_states"}];
45     \textcolor{keyword}{const} YAML::Node *wp\_node = wp\_node\_tmp ? &wp\_node\_tmp : NULL;
46 \textcolor{preprocessor}{#else}
47     \textcolor{keyword}{const} YAML::Node *wp\_node = node.FindValue(\textcolor{stringliteral}{"waypoints"});
48 \textcolor{preprocessor}{#endif}
49 
50     \textcolor{keywordflow}{if} (wp\_node != NULL)
51     \{
52       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < wp\_node->size(); ++i)
53       \{
54         \textcolor{keywordflow}{try}
55         \{
56           std::string jointname = (*wp\_node)[i].Tag();
57           \textcolor{keywordtype}{double} jointvalue = (*wp\_node)[i].as<\textcolor{keywordtype}{double}>();
58 
59           jointStates[jointname] = jointvalue;
60         \}
61         \textcolor{keywordflow}{catch} (std::exception& ex)
62         \{
63           ROS\_ERROR(\textcolor{stringliteral}{"parsing joint state file, syntax error in joint %d, error: %s"}, i, ex.what());
64         \}
65       \}
66       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"Parsed "} << jointStates.size() << \textcolor{stringliteral}{" joint entries."});
67     \}
68     \textcolor{keywordflow}{else}
69     \{
70       ROS\_WARN\_STREAM(\textcolor{stringliteral}{"Couldn't find any jointStates in the provided yaml file."});
71     \}
72   \}
73   \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} YAML::ParserException &ex)
74   \{
75     ROS\_ERROR\_STREAM(\textcolor{stringliteral}{"Error loading the Waypoints YAML file. Incorrect syntax: "} << ex.what());
76   \}
77 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
smacc\+\_\+client\+\_\+library/moveit\+\_\+z\+\_\+client/include/moveit\+\_\+z\+\_\+client/client\+\_\+behaviors/\hyperlink{cb__move__known__state_8h}{cb\+\_\+move\+\_\+known\+\_\+state.\+h}\item 
smacc\+\_\+client\+\_\+library/moveit\+\_\+z\+\_\+client/src/moveit\+\_\+z\+\_\+client/client\+\_\+behaviors/\hyperlink{cb__move__known__state_8cpp}{cb\+\_\+move\+\_\+known\+\_\+state.\+cpp}\end{DoxyCompactItemize}
