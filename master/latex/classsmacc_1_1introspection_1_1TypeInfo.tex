\hypertarget{classsmacc_1_1introspection_1_1TypeInfo}{}\section{smacc\+:\+:introspection\+:\+:Type\+Info Class Reference}
\label{classsmacc_1_1introspection_1_1TypeInfo}\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}


{\ttfamily \#include $<$string\+\_\+type\+\_\+walker.\+h$>$}



Collaboration diagram for smacc\+:\+:introspection\+:\+:Type\+Info\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::shared\+\_\+ptr$<$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo}{Type\+Info} $>$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Ptr}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ae57986b3f7e913346a379ec7ad609ffc}{Type\+Info} (std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}, std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{codedtype}, std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype})
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a41eb6c64f46a8e24a206e5702c6f6818}{to\+String} ()
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_adf059b6105291f4d6402068e8b122365}{get\+Non\+Templated\+Type\+Name} ()
\item 
const std\+::string \& \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ad00815e2537a11be93c9a80846f4dc3a}{get\+Full\+Name} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837}{get\+Type\+Info\+From\+String} (std\+::string inputtext)
\item 
static \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881}{get\+From\+Std\+Type\+Info} (const std\+::type\+\_\+info \&tid)
\item 
{\footnotesize template$<$typename T $>$ }\\static \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a8716ca6ac890b4582986d9fe4f5962ad}{get\+Type\+Info\+From\+Type} ()
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Ptr} $>$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aed5166ab8bcd94489e7bc87deb01de5c}{template\+Parameters}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static std\+::map$<$ std\+::string, \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Ptr} $>$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{type\+Info\+Database}
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{codedtype}
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 13 of file string\+\_\+type\+\_\+walker.\+h.



\subsection{Member Typedef Documentation}
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!Ptr@{Ptr}}
\index{Ptr@{Ptr}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{Ptr}{Ptr}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::shared\+\_\+ptr$<${\bf Type\+Info}$>$ {\bf smacc\+::introspection\+::\+Type\+Info\+::\+Ptr}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{}\label{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}


Definition at line 16 of file string\+\_\+type\+\_\+walker.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!Type\+Info@{Type\+Info}}
\index{Type\+Info@{Type\+Info}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{Type\+Info(std\+::string tkey, std\+::string codedtype, std\+::string finaltype)}{TypeInfo(std::string tkey, std::string codedtype, std::string finaltype)}}]{\setlength{\rightskip}{0pt plus 5cm}smacc\+::introspection\+::\+Type\+Info\+::\+Type\+Info (
\begin{DoxyParamCaption}
\item[{std\+::string}]{tkey, }
\item[{std\+::string}]{codedtype, }
\item[{std\+::string}]{finaltype}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_ae57986b3f7e913346a379ec7ad609ffc}{}\label{classsmacc_1_1introspection_1_1TypeInfo_ae57986b3f7e913346a379ec7ad609ffc}


Definition at line 31 of file string\+\_\+type\+\_\+walker.\+h.



References codedtype, finaltype, and tkey.


\begin{DoxyCode}
32     \{
33         this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} = \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey};
34         this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{codedtype} = \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{codedtype};
35         this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype} = \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype};
36     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+From\+Std\+Type\+Info@{get\+From\+Std\+Type\+Info}}
\index{get\+From\+Std\+Type\+Info@{get\+From\+Std\+Type\+Info}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{get\+From\+Std\+Type\+Info(const std\+::type\+\_\+info \&tid)}{getFromStdTypeInfo(const std::type_info &tid)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Info\+::\+Ptr} smacc\+::introspection\+::\+Type\+Info\+::get\+From\+Std\+Type\+Info (
\begin{DoxyParamCaption}
\item[{const std\+::type\+\_\+info \&}]{tid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881}{}\label{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881}


Definition at line 56 of file string\+\_\+type\+\_\+walker.\+cpp.



References smacc\+::introspection\+::demangle\+Symbol(), and get\+Type\+Info\+From\+String().



Referenced by smacc\+::utils\+::clean\+Short\+Type\+Name(), smacc\+::\+I\+Smacc\+Client\+::get\+Type(), get\+Type\+Info\+From\+Type(), and smacc\+::\+Smacc\+State$<$ Most\+Derived, Context, Inner\+Initial, history\+Mode $>$\+::\+Add\+Logic\+Unit\+Event\+Type$<$ T\+Transition $>$\+::operator()().


\begin{DoxyCode}
57 \{
58     \textcolor{keywordflow}{return} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837}{TypeInfo::getTypeInfoFromString}(
      \hyperlink{namespacesmacc_1_1introspection_a2f495108db3e57604d8d3ff5ef030302}{demangleSymbol}(tid.name()));
59 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881_icgraph}
\end{center}
\end{figure}


\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+Full\+Name@{get\+Full\+Name}}
\index{get\+Full\+Name@{get\+Full\+Name}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{get\+Full\+Name()}{getFullName()}}]{\setlength{\rightskip}{0pt plus 5cm}const std\+::string\& smacc\+::introspection\+::\+Type\+Info\+::get\+Full\+Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_ad00815e2537a11be93c9a80846f4dc3a}{}\label{classsmacc_1_1introspection_1_1TypeInfo_ad00815e2537a11be93c9a80846f4dc3a}


Definition at line 51 of file string\+\_\+type\+\_\+walker.\+h.



References finaltype.


\begin{DoxyCode}
52     \{
53         \textcolor{keywordflow}{return} this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype};
54     \}
\end{DoxyCode}
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+Non\+Templated\+Type\+Name@{get\+Non\+Templated\+Type\+Name}}
\index{get\+Non\+Templated\+Type\+Name@{get\+Non\+Templated\+Type\+Name}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{get\+Non\+Templated\+Type\+Name()}{getNonTemplatedTypeName()}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string smacc\+::introspection\+::\+Type\+Info\+::get\+Non\+Templated\+Type\+Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_adf059b6105291f4d6402068e8b122365}{}\label{classsmacc_1_1introspection_1_1TypeInfo_adf059b6105291f4d6402068e8b122365}


Definition at line 43 of file string\+\_\+type\+\_\+walker.\+h.



References finaltype.


\begin{DoxyCode}
44     \{
45         \textcolor{keyword}{auto} index = this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype}.find(\textcolor{stringliteral}{"<"});
46         \textcolor{keywordflow}{return} this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype}.substr(0, index);
47     \}
\end{DoxyCode}
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+Type\+Info\+From\+String@{get\+Type\+Info\+From\+String}}
\index{get\+Type\+Info\+From\+String@{get\+Type\+Info\+From\+String}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{get\+Type\+Info\+From\+String(std\+::string inputtext)}{getTypeInfoFromString(std::string inputtext)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Type\+Info\+::\+Ptr} smacc\+::introspection\+::\+Type\+Info\+::get\+Type\+Info\+From\+String (
\begin{DoxyParamCaption}
\item[{std\+::string}]{inputtext}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837}{}\label{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837}


Definition at line 61 of file string\+\_\+type\+\_\+walker.\+cpp.



References finaltype, smacc\+::introspection\+::replace(), smacc\+::introspection\+::replace\+\_\+back(), tkey, and type\+Info\+Database.



Referenced by get\+From\+Std\+Type\+Info(), and smacc\+::\+Smacc\+State$<$ Ms\+Dance\+Bot\+Run\+Mode, Sm\+Dance\+Bot, St\+Acquire\+Sensors $>$\+::static\+\_\+create\+Logic\+Unit().


\begin{DoxyCode}
62 \{
63     \textcolor{keyword}{auto} it = \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{typeInfoDatabase}.find(inputtext);
64 
65     \textcolor{keywordflow}{if} (it != \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{typeInfoDatabase}.end())
66         \textcolor{keywordflow}{return} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{typeInfoDatabase}[inputtext];
67 
68     \textcolor{keywordtype}{bool} ok = \textcolor{keyword}{false};
69     \textcolor{keywordtype}{int} typecount = 0;
70     std::string originalinputtext = inputtext;
71     std::map<std::string, std::string> typesdict;
72     std::map<std::string, std::string> typesdict\_content;
73 
74     \textcolor{keywordflow}{while} (!ok)
75     \{
76         \textcolor{comment}{//simpletypeRE = r"[^<>,\(\backslash\)s]+<[^<>]+>"}
77         \textcolor{comment}{//print ("input: " + inputtext)}
78 
79         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *simpletypeRE = \textcolor{stringliteral}{"[^\(\backslash\)\(\backslash\)<\(\backslash\)\(\backslash\)>,\(\backslash\)\(\backslash\)s]+\(\backslash\)\(\backslash\)<[^\(\backslash\)\(\backslash\)<\(\backslash\)\(\backslash\)>]+\(\backslash\)\(\backslash\)>"};
80         \textcolor{comment}{//std::cout << inputtext << std::endl;}
81 
82         std::smatch matches;
83         std::regex regex(simpletypeRE); \textcolor{comment}{// matches words beginning by "sub"}
84 
85         \textcolor{comment}{//matches = [m for m in enumerate(re.finditer(simpletypeRE, inputtext))]}
86         std::regex\_search(inputtext, matches, regex);
87 
88         \textcolor{comment}{//   if len(matches) == 0:}
89         \textcolor{comment}{//     if len(typesdict) == 0:}
90         \textcolor{comment}{//         tkey = "$T" + str(typecount)}
91         \textcolor{comment}{//         typesdict[tkey] = inputtext}
92         \textcolor{comment}{//     break}
93 
94         \textcolor{keywordflow}{if} (matches.size() == 0)
95         \{
96             \textcolor{keywordflow}{if} (typesdict.size() == 0)
97             \{
98                 \textcolor{keyword}{auto} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} = \textcolor{stringliteral}{"$T"} + std::to\_string(typecount);
99                 typesdict[\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}] = inputtext;
100             \}
101             \textcolor{keywordflow}{break};
102         \}
103 
104         \textcolor{comment}{// for i, m in matches:}
105         \textcolor{comment}{//     tstr = m.group(0)}
106         \textcolor{comment}{//     tkey = "$T" + str(typecount)}
107         \textcolor{comment}{//     inputtext = inputtext.replace(tstr, tkey)}
108         \textcolor{comment}{//     print("updating input text: " + inputtext)}
109         \textcolor{comment}{//     typecount += 1}
110         \textcolor{comment}{//     typesdict[tkey] = tstr}
111 
112         \textcolor{keywordtype}{int} i = 0;
113         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &m : matches)
114         \{
115             std::string tstr = m;
116             \textcolor{keyword}{auto} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} = \textcolor{stringliteral}{"$T"} + std::to\_string(typecount);
117             \hyperlink{namespacesmacc_1_1introspection_a48571b9bf3b115d2a83cc0147c96d0bd}{replace}(inputtext, tstr, \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey});
118 
119             \textcolor{comment}{//std::cout << "updating input text:" << inputtext << std::endl;}
120 
121             typecount++;
122             typesdict[\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}] = tstr;
123 
124             i++;
125         \}
126     \}
127 
128     \textcolor{comment}{// allbasetypes = set()}
129     \textcolor{comment}{// for tkey in typesdict.keys():}
130     \textcolor{comment}{//     flat = typesdict[tkey]}
131     \textcolor{comment}{//     print flat}
132     \textcolor{comment}{//     startindex = flat.index("<")}
133     \textcolor{comment}{//     flat = flat[startindex + 1:-1]}
134     \textcolor{comment}{//     basetypes = [t.strip() for t in flat.split(",")]}
135     \textcolor{comment}{//     for b in basetypes:}
136     \textcolor{comment}{//         if not "$" in b:}
137     \textcolor{comment}{//             allbasetypes.add(b)}
138 
139     std::set<std::string> allbasetypes;
140     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &typeentry : typesdict)
141     \{
142         \textcolor{keyword}{auto} flat = typeentry.second;
143         \textcolor{comment}{//std::cout << flat << std::endl;}
144 
145         \textcolor{keywordtype}{size\_t} startindex = flat.find(\textcolor{stringliteral}{"<"});
146         \textcolor{keywordtype}{size\_t} endindex = flat.find(\textcolor{stringliteral}{">"});
147         \textcolor{keywordflow}{if} (startindex != std::string::npos)
148         \{
149             flat = flat.substr(startindex + 1, endindex - startindex - 1);
150             \textcolor{comment}{//std::cout << typeentry.first <<":" << flat << std::endl;}
151             typesdict\_content[typeentry.first] = flat;
152             std::vector<std::string> localbasetypes;
153 
154             std::istringstream iss(flat);
155             std::string token;
156             \textcolor{keywordflow}{while} (std::getline(iss, token, \textcolor{charliteral}{','}))
157             \{
158                 boost::trim(token);
159                 localbasetypes.push\_back(token);
160                 \textcolor{comment}{//std::cout << "base type: " << token << std::endl;}
161             \}
162 
163             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &b : localbasetypes)
164             \{
165                 \textcolor{keywordtype}{size\_t} found = b.find(\textcolor{stringliteral}{"$"});
166 
167                 \textcolor{keywordflow}{if} (found == std::string::npos)
168                 \{
169                     allbasetypes.insert(b);
170                 \}
171             \}
172         \}
173 
174         \textcolor{comment}{// for b in allbasetypes:}
175         \textcolor{comment}{// typesdict[b] = b}
176 
177         \textcolor{comment}{//refresh}
178         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &b : allbasetypes)
179         \{
180             typesdict[b] = b;
181         \}
182     \}
183     \textcolor{comment}{// types = []}
184     \textcolor{comment}{// for tkey in typesdict:}
185     \textcolor{comment}{//     finaltype = replace\_back(typesdict[tkey], typesdict)}
186     \textcolor{comment}{//     t = TypeInfo(tkey, typesdict[tkey], finaltype)}
187     \textcolor{comment}{//     types.append(t)}
188 
189     \textcolor{comment}{//     print t}
190 
191     \textcolor{comment}{//std::cout << "---------- TYPES -------" << std::endl;}
192     std::vector<TypeInfo::Ptr> types;
193     std::vector<std::string> tokens;
194 
195     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} t : typesdict)
196     \{
197         \textcolor{comment}{//auto t = *it;}
198         \textcolor{keyword}{auto} &\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} = t.first;
199         \textcolor{keyword}{auto} &tval = t.second;
200         \textcolor{keyword}{auto} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype} = \hyperlink{namespacesmacc_1_1introspection_a19350163cda321a04645dcd6f6585f24}{replace\_back}(tval, typesdict);
201         \textcolor{keyword}{auto} tinfo = std::make\_shared<TypeInfo>(\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}, tval, \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype});
202         types.push\_back(tinfo);
203         tokens.push\_back(tkey);
204 
205         \textcolor{comment}{//std::cout << "replacing back: " << finaltype << std::endl;}
206     \}
207 
208     \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{TypeInfo::Ptr} roottype = \textcolor{keyword}{nullptr};
209     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &t : types)
210     \{
211         \textcolor{keywordflow}{if} (t->finaltype == originalinputtext)
212         \{
213             roottype = t;
214             \textcolor{keywordflow}{break};
215         \}
216     \}
217 
218     \textcolor{comment}{// std::sort(types.begin(), types.end(),[](auto& a, auto& b)}
219     \textcolor{comment}{// \{}
220     \textcolor{comment}{//     return a->getFullName().size() > b->getFullName().size();}
221     \textcolor{comment}{// \});}
222 
223     \textcolor{comment}{/*}
224 \textcolor{comment}{    std::cout<<"types order:" << std::endl;}
225 \textcolor{comment}{    for(auto t: types)}
226 \textcolor{comment}{    \{}
227 \textcolor{comment}{        std::cout<< t->codedtype << std::endl;}
228 \textcolor{comment}{    \}}
229 \textcolor{comment}{    std::cout<<"---------" << std::endl;}
230 \textcolor{comment}{}
231 \textcolor{comment}{    std::cout<<"types order:" << std::endl;}
232 \textcolor{comment}{    for(auto t: types)}
233 \textcolor{comment}{    \{}
234 \textcolor{comment}{        std::cout<< t->finaltype << std::endl;}
235 \textcolor{comment}{    \}}
236 \textcolor{comment}{    std::cout<<"---------" << std::endl;}
237 \textcolor{comment}{    */}
238 
239     
240     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i< types.size();i++)
241     \{
242         \textcolor{keyword}{auto} t= types[i];
243         \textcolor{keyword}{auto} ttoken = tokens[i];
244 
245         \textcolor{comment}{//auto t = types[it1];}
246         std::vector<std::pair<int, TypeInfo::Ptr>> unorderedTemplateParameters;
247 
248         
249         \textcolor{comment}{//std::cout << "original typestr: " << codedtypecopy << std::endl;}
250 
251         \textcolor{comment}{//auto codedtypecopy = t->codedtype;}
252         \textcolor{keyword}{auto} codedtypecopy = typesdict\_content[ttoken];
253 
254         \textcolor{comment}{// std::cout << "original typestr: " << codedtypecopy << std::endl;}
255         \textcolor{comment}{// std::cout << "original token: " << ttoken << std::endl;}
256         \textcolor{comment}{// std::cout << "original typestr: " << typesdict\_content[ttoken] << std::endl;}
257 
258         \textcolor{comment}{// size\_t startindex = codedtypecopy.find("<");}
259         \textcolor{comment}{// size\_t endindex = codedtypecopy.find(">");}
260 
261         \textcolor{comment}{// if (startindex != std::string::npos)}
262         \textcolor{comment}{// \{}
263         \textcolor{comment}{//     codedtypecopy = codedtypecopy.substr(startindex + 1, endindex - startindex - 1);}
264         \textcolor{comment}{// \}}
265         \textcolor{comment}{//std::cout << "original typestr: " << codedtypecopy << std::endl;}
266 
267         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &t2 : types)
268         \textcolor{comment}{//for (auto it2= types.size() -1; it2 >=0; it2--)}
269         \{
270             \textcolor{comment}{//std::cout << it2 << std::endl;}
271             \textcolor{comment}{//auto t2 = types[it2];}
272             \textcolor{comment}{//std::cout << t2->getFullName() << std::endl;}
273             \textcolor{keywordflow}{if} (t == t2)
274                 \textcolor{keywordflow}{continue};
275 
276             \textcolor{keyword}{auto} index = codedtypecopy.find(t2->tkey);
277             \textcolor{keywordflow}{if} (index != std::string::npos)
278             \{
279                 \textcolor{comment}{//auto pair = std::make\_pair(index, t2);}
280                 \textcolor{keyword}{auto} pair = std::make\_pair(0, t2);
281                 \textcolor{comment}{//std::cout << "matches: " << t2->tkey <<std::endl;}
282                 unorderedTemplateParameters.push\_back(pair);
283                 \hyperlink{namespacesmacc_1_1introspection_a48571b9bf3b115d2a83cc0147c96d0bd}{replace}(codedtypecopy,t2->tkey,\textcolor{stringliteral}{""}); \textcolor{comment}{// consume token}
284                 \textcolor{comment}{//std::cout << "codedtypecopy: " << codedtypecopy << std::endl;}
285             \}
286         \}
287 
288         std::sort(unorderedTemplateParameters.begin(), unorderedTemplateParameters.end(),
289                   [](\textcolor{keyword}{auto} &a, \textcolor{keyword}{auto} &b) -> \textcolor{keywordtype}{bool} \{
290                       \textcolor{keywordflow}{return} a.first <= b.first;
291                   \});
292 
293         ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"------------------"});
294         ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"CREATING TYPE:"} << t->getFullName());
295 
296         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &item : unorderedTemplateParameters)
297         \{
298             ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{" - template paramter: "} << item.second->getFullName());
299             t->templateParameters.push\_back(item.second);
300         \}
301         ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"------------------"});
302     \}
303 
304     ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"ADDING TYPE TO DATABASE: "} << inputtext);
305     ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"Current Database"});
306     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &en : \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{typeInfoDatabase})
307     \{
308         ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"- "} << en.first);
309     \}
310 
311     typeInfoDatabase[originalinputtext] = roottype;
312     \textcolor{keywordflow}{return} roottype;
313 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837_icgraph}
\end{center}
\end{figure}


\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+Type\+Info\+From\+Type@{get\+Type\+Info\+From\+Type}}
\index{get\+Type\+Info\+From\+Type@{get\+Type\+Info\+From\+Type}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{get\+Type\+Info\+From\+Type()}{getTypeInfoFromType()}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ static {\bf Type\+Info\+::\+Ptr} smacc\+::introspection\+::\+Type\+Info\+::get\+Type\+Info\+From\+Type (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a8716ca6ac890b4582986d9fe4f5962ad}{}\label{classsmacc_1_1introspection_1_1TypeInfo_a8716ca6ac890b4582986d9fe4f5962ad}


Definition at line 23 of file string\+\_\+type\+\_\+walker.\+h.



References get\+From\+Std\+Type\+Info().


\begin{DoxyCode}
24     \{
25         \textcolor{keywordflow}{return} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881}{TypeInfo::getFromStdTypeInfo}(\textcolor{keyword}{typeid}(T));
26     \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_a8716ca6ac890b4582986d9fe4f5962ad_cgraph}
\end{center}
\end{figure}


\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!to\+String@{to\+String}}
\index{to\+String@{to\+String}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{to\+String()}{toString()}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string smacc\+::introspection\+::\+Type\+Info\+::to\+String (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a41eb6c64f46a8e24a206e5702c6f6818}{}\label{classsmacc_1_1introspection_1_1TypeInfo_a41eb6c64f46a8e24a206e5702c6f6818}


Definition at line 38 of file string\+\_\+type\+\_\+walker.\+h.



References finaltype, and tkey.


\begin{DoxyCode}
39     \{
40         \textcolor{keywordflow}{return} this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} + \textcolor{stringliteral}{":"} + this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype};
41     \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!codedtype@{codedtype}}
\index{codedtype@{codedtype}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{codedtype}{codedtype}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string smacc\+::introspection\+::\+Type\+Info\+::codedtype\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{}\label{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}


Definition at line 60 of file string\+\_\+type\+\_\+walker.\+h.



Referenced by Type\+Info().

\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!finaltype@{finaltype}}
\index{finaltype@{finaltype}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{finaltype}{finaltype}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string smacc\+::introspection\+::\+Type\+Info\+::finaltype\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{}\label{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}


Definition at line 61 of file string\+\_\+type\+\_\+walker.\+h.



Referenced by get\+Full\+Name(), get\+Non\+Templated\+Type\+Name(), get\+Type\+Info\+From\+String(), to\+String(), and Type\+Info().

\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!template\+Parameters@{template\+Parameters}}
\index{template\+Parameters@{template\+Parameters}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{template\+Parameters}{templateParameters}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf Ptr}$>$ smacc\+::introspection\+::\+Type\+Info\+::template\+Parameters}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_aed5166ab8bcd94489e7bc87deb01de5c}{}\label{classsmacc_1_1introspection_1_1TypeInfo_aed5166ab8bcd94489e7bc87deb01de5c}


Definition at line 29 of file string\+\_\+type\+\_\+walker.\+h.

\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!tkey@{tkey}}
\index{tkey@{tkey}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{tkey}{tkey}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string smacc\+::introspection\+::\+Type\+Info\+::tkey\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{}\label{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}


Definition at line 59 of file string\+\_\+type\+\_\+walker.\+h.



Referenced by get\+Type\+Info\+From\+String(), to\+String(), and Type\+Info().

\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!type\+Info\+Database@{type\+Info\+Database}}
\index{type\+Info\+Database@{type\+Info\+Database}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection[{\texorpdfstring{type\+Info\+Database}{typeInfoDatabase}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::map$<$ std\+::string, {\bf Type\+Info\+::\+Ptr} $>$ smacc\+::introspection\+::\+Type\+Info\+::type\+Info\+Database\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{}\label{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}


Definition at line 56 of file string\+\_\+type\+\_\+walker.\+h.



Referenced by get\+Type\+Info\+From\+String(), and smacc\+::introspection\+::replace\+\_\+back().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
smacc/include/smacc/introspection/\hyperlink{string__type__walker_8h}{string\+\_\+type\+\_\+walker.\+h}\item 
smacc/src/smacc/introspection/\hyperlink{string__type__walker_8cpp}{string\+\_\+type\+\_\+walker.\+cpp}\end{DoxyCompactItemize}
