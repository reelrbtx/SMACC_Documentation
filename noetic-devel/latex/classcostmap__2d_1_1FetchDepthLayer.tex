\hypertarget{classcostmap__2d_1_1FetchDepthLayer}{}\doxysection{costmap\+\_\+2d\+::Fetch\+Depth\+Layer Class Reference}
\label{classcostmap__2d_1_1FetchDepthLayer}\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}


A costmap layer that extracts ground plane and clears it.  




{\ttfamily \#include $<$depth\+\_\+layer.\+h$>$}



Inheritance diagram for costmap\+\_\+2d\+::Fetch\+Depth\+Layer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{classcostmap__2d_1_1FetchDepthLayer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for costmap\+\_\+2d\+::Fetch\+Depth\+Layer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcostmap__2d_1_1FetchDepthLayer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ad8db3340cc9f161e4c86418fb3d18ed7}{Fetch\+Depth\+Layer}} ()
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a2d76373cb9d4bad32756552be942dcd9}{$\sim$\+Fetch\+Depth\+Layer}} ()
\begin{DoxyCompactList}\small\item\em Destructor for the depth costmap layer. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aed6da711f197f79f7f7b6ec0cd8804c0}{on\+Initialize}} ()
\begin{DoxyCompactList}\small\item\em Initialization function for the Depth\+Layer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a567caa9a60f495de714659d8502e86d3}{camera\+Info\+Callback}} (const sensor\+\_\+msgs\+::\+Camera\+Info\+::\+Const\+Ptr \&msg)
\item 
void \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aaaca74ee6852ac6d8a0a7fc8860f4151}{depth\+Image\+Callback}} (const sensor\+\_\+msgs\+::\+Image\+::\+Const\+Ptr \&msg)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
boost\+::shared\+\_\+ptr$<$ costmap\+\_\+2d\+::\+Observation\+Buffer $>$ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}{marking\+\_\+buf\+\_\+}}
\item 
boost\+::shared\+\_\+ptr$<$ costmap\+\_\+2d\+::\+Observation\+Buffer $>$ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}{clearing\+\_\+buf\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_adae5f878c5f4890eab8ee2b650c9e359}{publish\+\_\+observations\+\_\+}}
\item 
double \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab55ca0b6827ea860cc3d69420d67e08f}{observations\+\_\+threshold\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ac203887c6f165e5f2109156dbe37398b}{find\+\_\+ground\+\_\+plane\+\_\+}}
\item 
double \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa78755635124e9db1d8ed7f183be5269}{ground\+\_\+threshold\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab0274b1ce183fc9cc8cc5c0ab2fe67b7}{clear\+\_\+nans\+\_\+}}
\item 
int \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a852251155d2425bc56bc5cca35b5fbd6}{skip\+\_\+rays\+\_\+bottom\+\_\+}}
\item 
int \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a0ad36438d2d023f88a57d5626075d404}{skip\+\_\+rays\+\_\+top\+\_\+}}
\item 
int \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a10c76d12e52d8e575d08856817a7f765}{skip\+\_\+rays\+\_\+left\+\_\+}}
\item 
int \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a616c672155ab7b2d2f5aa7e0e8e9ee01}{skip\+\_\+rays\+\_\+right\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a5c11eaae40cfe587700b536f076483ec}{clear\+\_\+with\+\_\+skipped\+\_\+rays\+\_\+}}
\item 
boost\+::shared\+\_\+ptr$<$ message\+\_\+filters\+::\+Subscriber$<$ sensor\+\_\+msgs\+::\+Image $>$ $>$ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a5592d80f77a79efc9c8fd021d8618160}{depth\+\_\+image\+\_\+sub\+\_\+}}
\item 
boost\+::shared\+\_\+ptr$<$ tf2\+\_\+ros\+::\+Message\+Filter$<$ sensor\+\_\+msgs\+::\+Image $>$ $>$ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aad4ee2da62a77bb1681000eef24bd633}{depth\+\_\+image\+\_\+filter\+\_\+}}
\item 
ros\+::\+Subscriber \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab7583d68574f49ff50bcaf0acf803c5b}{camera\+\_\+info\+\_\+sub\+\_\+}}
\item 
ros\+::\+Publisher \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a9637d98daa367a006dcc63e8a48de937}{clearing\+\_\+pub\+\_\+}}
\item 
ros\+::\+Publisher \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ac6961b460b9d70b2553b7c9603b5a75a}{marking\+\_\+pub\+\_\+}}
\item 
boost\+::mutex \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_af70d0459c2a154f25fcc87dc37b43e80}{mutex\+\_\+\+K\+\_\+}}
\item 
cv\+::\+Mat \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a266873f35b0dec9ad10302b4f6e270f6}{K\+\_\+}}
\item 
cv\+::\+Ptr$<$ Depth\+Cleaner $>$ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ae1cd4af1206d1c6eed6f3f946aad8184}{depth\+\_\+cleaner\+\_\+}}
\item 
cv\+::\+Ptr$<$ Rgbd\+Normals $>$ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa3ebfd8dbf0eb043a5d040e6a8655e2a}{normals\+\_\+estimator\+\_\+}}
\item 
cv\+::\+Ptr$<$ Rgbd\+Plane $>$ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\+\_\+estimator\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A costmap layer that extracts ground plane and clears it. 

Definition at line 56 of file depth\+\_\+layer.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_ad8db3340cc9f161e4c86418fb3d18ed7}\label{classcostmap__2d_1_1FetchDepthLayer_ad8db3340cc9f161e4c86418fb3d18ed7}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!FetchDepthLayer@{FetchDepthLayer}}
\index{FetchDepthLayer@{FetchDepthLayer}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{FetchDepthLayer()}{FetchDepthLayer()}}
{\footnotesize\ttfamily costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::\+Fetch\+Depth\+Layer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Constructor. 



Definition at line 41 of file depth\+\_\+layer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{42 \{}
\DoxyCodeLine{43 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a2d76373cb9d4bad32756552be942dcd9}\label{classcostmap__2d_1_1FetchDepthLayer_a2d76373cb9d4bad32756552be942dcd9}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!````~FetchDepthLayer@{$\sim$FetchDepthLayer}}
\index{````~FetchDepthLayer@{$\sim$FetchDepthLayer}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{$\sim$FetchDepthLayer()}{~FetchDepthLayer()}}
{\footnotesize\ttfamily costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::$\sim$\+Fetch\+Depth\+Layer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Destructor for the depth costmap layer. 



Definition at line 155 of file depth\+\_\+layer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{156 \{}
\DoxyCodeLine{157 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a567caa9a60f495de714659d8502e86d3}\label{classcostmap__2d_1_1FetchDepthLayer_a567caa9a60f495de714659d8502e86d3}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!cameraInfoCallback@{cameraInfoCallback}}
\index{cameraInfoCallback@{cameraInfoCallback}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{cameraInfoCallback()}{cameraInfoCallback()}}
{\footnotesize\ttfamily void costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::camera\+Info\+Callback (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Camera\+Info\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 159 of file depth\+\_\+layer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{161 \{}
\DoxyCodeLine{162   \textcolor{comment}{// Lock mutex before updating K}}
\DoxyCodeLine{163   boost::unique\_lock<boost::mutex> lock(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_af70d0459c2a154f25fcc87dc37b43e80}{mutex\_K\_}});}
\DoxyCodeLine{164 }
\DoxyCodeLine{165   \textcolor{keywordtype}{float} focal\_pixels\_ = \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>P[0];}
\DoxyCodeLine{166   \textcolor{keywordtype}{float} center\_x\_ = \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>P[2];}
\DoxyCodeLine{167   \textcolor{keywordtype}{float} center\_y\_ = \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>P[6];}
\DoxyCodeLine{168 }
\DoxyCodeLine{169   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>binning\_x == \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>binning\_y)}
\DoxyCodeLine{170   \{}
\DoxyCodeLine{171     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>binning\_x > 0)}
\DoxyCodeLine{172     \{}
\DoxyCodeLine{173       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a266873f35b0dec9ad10302b4f6e270f6}{K\_}} = (cv::Mat\_<double>(3, 3) <<}
\DoxyCodeLine{174         focal\_pixels\_/\mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>binning\_x, 0.0, center\_x\_/\mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>binning\_x,}
\DoxyCodeLine{175         0.0, focal\_pixels\_/\mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>binning\_x, center\_y\_/\mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>binning\_x,}
\DoxyCodeLine{176         0.0, 0.0, 1.0);}
\DoxyCodeLine{177     \}}
\DoxyCodeLine{178     \textcolor{keywordflow}{else}}
\DoxyCodeLine{179     \{}
\DoxyCodeLine{180       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a266873f35b0dec9ad10302b4f6e270f6}{K\_}} = (cv::Mat\_<double>(3, 3) <<}
\DoxyCodeLine{181         focal\_pixels\_, 0.0, center\_x\_,}
\DoxyCodeLine{182         0.0, focal\_pixels\_, center\_y\_,}
\DoxyCodeLine{183         0.0, 0.0, 1.0);}
\DoxyCodeLine{184     \}}
\DoxyCodeLine{185   \}}
\DoxyCodeLine{186   \textcolor{keywordflow}{else}}
\DoxyCodeLine{187   \{}
\DoxyCodeLine{188     ROS\_ERROR(\textcolor{stringliteral}{"binning\_x is not equal to binning\_y"});}
\DoxyCodeLine{189   \}}
\DoxyCodeLine{190 \}}

\end{DoxyCode}


References K\+\_\+, battery\+\_\+monitor\+\_\+node\+::msg, and mutex\+\_\+\+K\+\_\+.



Referenced by on\+Initialize().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcostmap__2d_1_1FetchDepthLayer_a567caa9a60f495de714659d8502e86d3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_aaaca74ee6852ac6d8a0a7fc8860f4151}\label{classcostmap__2d_1_1FetchDepthLayer_aaaca74ee6852ac6d8a0a7fc8860f4151}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!depthImageCallback@{depthImageCallback}}
\index{depthImageCallback@{depthImageCallback}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{depthImageCallback()}{depthImageCallback()}}
{\footnotesize\ttfamily void costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::depth\+Image\+Callback (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Image\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 192 of file depth\+\_\+layer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{194 \{}
\DoxyCodeLine{195   \textcolor{comment}{// Lock mutex before using K}}
\DoxyCodeLine{196   boost::unique\_lock<boost::mutex> lock(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_af70d0459c2a154f25fcc87dc37b43e80}{mutex\_K\_}});}
\DoxyCodeLine{197 }
\DoxyCodeLine{198   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a266873f35b0dec9ad10302b4f6e270f6}{K\_}}.empty())}
\DoxyCodeLine{199   \{}
\DoxyCodeLine{200     ROS\_DEBUG\_NAMED(\textcolor{stringliteral}{"depth\_layer"}, \textcolor{stringliteral}{"Camera info not yet received."});}
\DoxyCodeLine{201     \textcolor{keywordflow}{return};}
\DoxyCodeLine{202   \}}
\DoxyCodeLine{203 }
\DoxyCodeLine{204   cv\_bridge::CvImagePtr cv\_ptr;}
\DoxyCodeLine{205   \textcolor{keywordflow}{try}}
\DoxyCodeLine{206   \{}
\DoxyCodeLine{207     cv\_ptr = cv\_bridge::toCvCopy(\mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}, sensor\_msgs::image\_encodings::TYPE\_32FC1);}
\DoxyCodeLine{208   \}}
\DoxyCodeLine{209   \textcolor{keywordflow}{catch} (cv\_bridge::Exception\& e)}
\DoxyCodeLine{210   \{}
\DoxyCodeLine{211     ROS\_ERROR(\textcolor{stringliteral}{"cv\_bridge exception: \%s"}, e.what());}
\DoxyCodeLine{212     \textcolor{keywordflow}{return};}
\DoxyCodeLine{213   \}}
\DoxyCodeLine{214 }
\DoxyCodeLine{215   \textcolor{comment}{// Clear with NANs?}}
\DoxyCodeLine{216   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab0274b1ce183fc9cc8cc5c0ab2fe67b7}{clear\_nans\_}})}
\DoxyCodeLine{217   \{}
\DoxyCodeLine{218     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < cv\_ptr-\/>image.rows * cv\_ptr-\/>image.cols; i++)}
\DoxyCodeLine{219     \{}
\DoxyCodeLine{220       \textcolor{keywordflow}{if} (std::isnan(cv\_ptr-\/>image.at<\textcolor{keywordtype}{float}>(i)))}
\DoxyCodeLine{221         cv\_ptr-\/>image.at<\textcolor{keywordtype}{float}>(i) = 25.0;}
\DoxyCodeLine{222     \}}
\DoxyCodeLine{223   \}}
\DoxyCodeLine{224 }
\DoxyCodeLine{225   \textcolor{comment}{// Convert to 3d}}
\DoxyCodeLine{226   cv::Mat points3d;}
\DoxyCodeLine{227   depthTo3d(cv\_ptr-\/>image, \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a266873f35b0dec9ad10302b4f6e270f6}{K\_}}, points3d);}
\DoxyCodeLine{228 }
\DoxyCodeLine{229   \textcolor{comment}{// Determine ground plane, either through camera or TF}}
\DoxyCodeLine{230   cv::Vec4f ground\_plane;}
\DoxyCodeLine{231   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ac203887c6f165e5f2109156dbe37398b}{find\_ground\_plane\_}})}
\DoxyCodeLine{232   \{}
\DoxyCodeLine{233     \textcolor{comment}{// Get normals}}
\DoxyCodeLine{234     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa3ebfd8dbf0eb043a5d040e6a8655e2a}{normals\_estimator\_}}.empty())}
\DoxyCodeLine{235     \{}
\DoxyCodeLine{236       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa3ebfd8dbf0eb043a5d040e6a8655e2a}{normals\_estimator\_}}.reset(\textcolor{keyword}{new} RgbdNormals(cv\_ptr-\/>image.rows,}
\DoxyCodeLine{237                                                cv\_ptr-\/>image.cols,}
\DoxyCodeLine{238                                                cv\_ptr-\/>image.depth(),}
\DoxyCodeLine{239                                                \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a266873f35b0dec9ad10302b4f6e270f6}{K\_}}));}
\DoxyCodeLine{240     \}}
\DoxyCodeLine{241     cv::Mat normals;}
\DoxyCodeLine{242     (*normals\_estimator\_)(points3d, normals);}
\DoxyCodeLine{243 }
\DoxyCodeLine{244     \textcolor{comment}{// Find plane(s)}}
\DoxyCodeLine{245     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\_estimator\_}}.empty())}
\DoxyCodeLine{246     \{}
\DoxyCodeLine{247       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\_estimator\_}}.reset(\textcolor{keyword}{new} RgbdPlane());}
\DoxyCodeLine{248       \textcolor{comment}{// Model parameters are based on notes in opencv\_candidate}}
\DoxyCodeLine{249       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\_estimator\_}}-\/>setSensorErrorA(0.0075);}
\DoxyCodeLine{250       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\_estimator\_}}-\/>setSensorErrorB(0.0);}
\DoxyCodeLine{251       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\_estimator\_}}-\/>setSensorErrorC(0.0);}
\DoxyCodeLine{252       \textcolor{comment}{// Image/cloud height/width must be multiple of block size}}
\DoxyCodeLine{253       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\_estimator\_}}-\/>setBlockSize(40);}
\DoxyCodeLine{254       \textcolor{comment}{// Distance a point can be from plane and still be part of it}}
\DoxyCodeLine{255       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\_estimator\_}}-\/>setThreshold(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab55ca0b6827ea860cc3d69420d67e08f}{observations\_threshold\_}});}
\DoxyCodeLine{256       \textcolor{comment}{// Minimum cluster size to be a plane}}
\DoxyCodeLine{257       \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}{plane\_estimator\_}}-\/>setMinSize(1000);}
\DoxyCodeLine{258     \}}
\DoxyCodeLine{259     cv::Mat planes\_mask;}
\DoxyCodeLine{260     std::vector<cv::Vec4f> plane\_coefficients;}
\DoxyCodeLine{261     (*plane\_estimator\_)(points3d, normals, planes\_mask, plane\_coefficients);}
\DoxyCodeLine{262 }
\DoxyCodeLine{263     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < plane\_coefficients.size(); i++)}
\DoxyCodeLine{264     \{}
\DoxyCodeLine{265       \textcolor{comment}{// check plane orientation}}
\DoxyCodeLine{266       \textcolor{keywordflow}{if} ((fabs(0.0 -\/ plane\_coefficients[i][0]) <= \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa78755635124e9db1d8ed7f183be5269}{ground\_threshold\_}}) \&\&}
\DoxyCodeLine{267           (fabs(1.0 + plane\_coefficients[i][1]) <= \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa78755635124e9db1d8ed7f183be5269}{ground\_threshold\_}}) \&\&}
\DoxyCodeLine{268           (fabs(0.0 -\/ plane\_coefficients[i][2]) <= \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa78755635124e9db1d8ed7f183be5269}{ground\_threshold\_}}))}
\DoxyCodeLine{269       \{}
\DoxyCodeLine{270         ground\_plane = plane\_coefficients[i];}
\DoxyCodeLine{271         \textcolor{keywordflow}{break};}
\DoxyCodeLine{272       \}}
\DoxyCodeLine{273     \}}
\DoxyCodeLine{274   \}}
\DoxyCodeLine{275   \textcolor{keywordflow}{else}}
\DoxyCodeLine{276   \{}
\DoxyCodeLine{277     \textcolor{comment}{// find ground plane in camera coordinates using tf}}
\DoxyCodeLine{278     \textcolor{comment}{// transform normal axis}}
\DoxyCodeLine{279     geometry\_msgs::Vector3Stamped vector;}
\DoxyCodeLine{280     vector.vector.x = 0;}
\DoxyCodeLine{281     vector.vector.y = 0;}
\DoxyCodeLine{282     vector.vector.z = 1;}
\DoxyCodeLine{283     vector.header.frame\_id = \textcolor{stringliteral}{"base\_link"};}
\DoxyCodeLine{284     vector.header.stamp = ros::Time();}
\DoxyCodeLine{285     tf\_-\/>transform(vector, vector, \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>header.frame\_id);}
\DoxyCodeLine{286     ground\_plane[0] = vector.vector.x;}
\DoxyCodeLine{287     ground\_plane[1] = vector.vector.y;}
\DoxyCodeLine{288     ground\_plane[2] = vector.vector.z;}
\DoxyCodeLine{289 }
\DoxyCodeLine{290     \textcolor{comment}{// find offset}}
\DoxyCodeLine{291     geometry\_msgs::TransformStamped transform;}
\DoxyCodeLine{292     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{293       transform = tf\_-\/>lookupTransform(\textcolor{stringliteral}{"base\_link"}, \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>header.frame\_id, \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>header.stamp);}
\DoxyCodeLine{294       ground\_plane[3] = transform.transform.translation.z;}
\DoxyCodeLine{295     \} \textcolor{keywordflow}{catch} (tf2::TransformException)\{}
\DoxyCodeLine{296       ROS\_WARN(\textcolor{stringliteral}{"Failed to lookup transform!"});}
\DoxyCodeLine{297       \textcolor{keywordflow}{return};}
\DoxyCodeLine{298     \}}
\DoxyCodeLine{299   \}}
\DoxyCodeLine{300 }
\DoxyCodeLine{301   \textcolor{comment}{// check that ground plane actually exists, so it doesn't count as marking observations}}
\DoxyCodeLine{302   \textcolor{keywordflow}{if} (ground\_plane[0] == 0.0 \&\& ground\_plane[1] == 0.0 \&\&}
\DoxyCodeLine{303       ground\_plane[2] == 0.0 \&\& ground\_plane[3] == 0.0)}
\DoxyCodeLine{304   \{}
\DoxyCodeLine{305     ROS\_DEBUG\_NAMED(\textcolor{stringliteral}{"depth\_layer"}, \textcolor{stringliteral}{"Invalid ground plane."});}
\DoxyCodeLine{306     \textcolor{keywordflow}{return};}
\DoxyCodeLine{307   \}}
\DoxyCodeLine{308 }
\DoxyCodeLine{309   cv::Mat channels[3];}
\DoxyCodeLine{310   cv::split(points3d, channels);}
\DoxyCodeLine{311 }
\DoxyCodeLine{312   sensor\_msgs::PointCloud clearing\_points;}
\DoxyCodeLine{313   clearing\_points.header.stamp = \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>header.stamp;}
\DoxyCodeLine{314   clearing\_points.header.frame\_id = \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>header.frame\_id;}
\DoxyCodeLine{315 }
\DoxyCodeLine{316   sensor\_msgs::PointCloud marking\_points;}
\DoxyCodeLine{317   marking\_points.header.stamp = \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>header.stamp;}
\DoxyCodeLine{318   marking\_points.header.frame\_id = \mbox{\hyperlink{namespacebattery__monitor__node_ab1920c64448816edd4064e494275fdff}{msg}}-\/>header.frame\_id;}
\DoxyCodeLine{319 }
\DoxyCodeLine{320   \textcolor{comment}{// Put points in clearing/marking clouds}}
\DoxyCodeLine{321   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < points3d.rows; i++)}
\DoxyCodeLine{322   \{}
\DoxyCodeLine{323     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < points3d.cols; j++)}
\DoxyCodeLine{324     \{}
\DoxyCodeLine{325       \textcolor{comment}{// Get next point}}
\DoxyCodeLine{326       geometry\_msgs::Point32 current\_point;}
\DoxyCodeLine{327       current\_point.x = channels[0].at<\textcolor{keywordtype}{float}>(i, j);}
\DoxyCodeLine{328       current\_point.y = channels[1].at<\textcolor{keywordtype}{float}>(i, j);}
\DoxyCodeLine{329       current\_point.z = channels[2].at<\textcolor{keywordtype}{float}>(i, j);}
\DoxyCodeLine{330       \textcolor{comment}{// Check point validity}}
\DoxyCodeLine{331       \textcolor{keywordflow}{if} (current\_point.x != 0.0 \&\&}
\DoxyCodeLine{332           current\_point.y != 0.0 \&\&}
\DoxyCodeLine{333           current\_point.z != 0.0 \&\&}
\DoxyCodeLine{334           !std::isnan(current\_point.x) \&\&}
\DoxyCodeLine{335           !std::isnan(current\_point.y) \&\&}
\DoxyCodeLine{336           !std::isnan(current\_point.z))}
\DoxyCodeLine{337       \{}
\DoxyCodeLine{338         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a5c11eaae40cfe587700b536f076483ec}{clear\_with\_skipped\_rays\_}})}
\DoxyCodeLine{339         \{}
\DoxyCodeLine{340           \textcolor{comment}{// If edge rays are to be used for clearing, go ahead and add them now.}}
\DoxyCodeLine{341           clearing\_points.points.push\_back(current\_point);}
\DoxyCodeLine{342         \}}
\DoxyCodeLine{343 }
\DoxyCodeLine{344         \textcolor{comment}{// Do not consider boundary points for obstacles marking since they are very noisy.}}
\DoxyCodeLine{345         \textcolor{keywordflow}{if} (i < \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a0ad36438d2d023f88a57d5626075d404}{skip\_rays\_top\_}} ||}
\DoxyCodeLine{346             i >= points3d.rows -\/ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a852251155d2425bc56bc5cca35b5fbd6}{skip\_rays\_bottom\_}} ||}
\DoxyCodeLine{347             j < \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a10c76d12e52d8e575d08856817a7f765}{skip\_rays\_left\_}} ||}
\DoxyCodeLine{348             j >= points3d.cols -\/ \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a616c672155ab7b2d2f5aa7e0e8e9ee01}{skip\_rays\_right\_}})}
\DoxyCodeLine{349         \{}
\DoxyCodeLine{350           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{351         \}}
\DoxyCodeLine{352 }
\DoxyCodeLine{353         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a5c11eaae40cfe587700b536f076483ec}{clear\_with\_skipped\_rays\_}})}
\DoxyCodeLine{354         \{}
\DoxyCodeLine{355           \textcolor{comment}{// If edge rays are not to be used for clearing, only add them after the edge check.}}
\DoxyCodeLine{356           clearing\_points.points.push\_back(current\_point);}
\DoxyCodeLine{357         \}}
\DoxyCodeLine{358 }
\DoxyCodeLine{359         \textcolor{comment}{// Check if point is part of the ground plane}}
\DoxyCodeLine{360         \textcolor{keywordflow}{if} (fabs(ground\_plane[0] * current\_point.x +}
\DoxyCodeLine{361                  ground\_plane[1] * current\_point.y +}
\DoxyCodeLine{362                  ground\_plane[2] * current\_point.z +}
\DoxyCodeLine{363                  ground\_plane[3]) <= \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab55ca0b6827ea860cc3d69420d67e08f}{observations\_threshold\_}})}
\DoxyCodeLine{364         \{}
\DoxyCodeLine{365           \textcolor{keywordflow}{continue};  \textcolor{comment}{// Do not mark points near the floor.}}
\DoxyCodeLine{366         \}}
\DoxyCodeLine{367 }
\DoxyCodeLine{368         \textcolor{comment}{// Check for outliers, mark non-\/outliers as obstacles.}}
\DoxyCodeLine{369         \textcolor{keywordtype}{int} num\_valid = 0;}
\DoxyCodeLine{370         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = -\/1; x < 2; x++)}
\DoxyCodeLine{371         \{}
\DoxyCodeLine{372           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacepick__and__place_a9dc3a6efa6a9a0786df1b6a1b1d60ffc}{y}} = -\/1; \mbox{\hyperlink{namespacepick__and__place_a9dc3a6efa6a9a0786df1b6a1b1d60ffc}{y}} < 2; \mbox{\hyperlink{namespacepick__and__place_a9dc3a6efa6a9a0786df1b6a1b1d60ffc}{y}}++)}
\DoxyCodeLine{373           \{}
\DoxyCodeLine{374             \textcolor{keywordflow}{if} (x == 0 \&\& \mbox{\hyperlink{namespacepick__and__place_a9dc3a6efa6a9a0786df1b6a1b1d60ffc}{y}} == 0)}
\DoxyCodeLine{375             \{}
\DoxyCodeLine{376               \textcolor{keywordflow}{continue};}
\DoxyCodeLine{377             \}}
\DoxyCodeLine{378             \textcolor{keywordtype}{float} px = channels[0].at<\textcolor{keywordtype}{float}>(i+x, j+\mbox{\hyperlink{namespacepick__and__place_a9dc3a6efa6a9a0786df1b6a1b1d60ffc}{y}});}
\DoxyCodeLine{379             \textcolor{keywordtype}{float} py = channels[1].at<\textcolor{keywordtype}{float}>(i+x, j+\mbox{\hyperlink{namespacepick__and__place_a9dc3a6efa6a9a0786df1b6a1b1d60ffc}{y}});}
\DoxyCodeLine{380             \textcolor{keywordtype}{float} pz = channels[2].at<\textcolor{keywordtype}{float}>(i+x, j+\mbox{\hyperlink{namespacepick__and__place_a9dc3a6efa6a9a0786df1b6a1b1d60ffc}{y}});}
\DoxyCodeLine{381             \textcolor{keywordflow}{if} (px != 0.0 \&\& py != 0.0 \&\& pz != 0.0 \&\&}
\DoxyCodeLine{382                 !std::isnan(px) \&\& !std::isnan(py) \&\& !std::isnan(pz))}
\DoxyCodeLine{383             \{}
\DoxyCodeLine{384               \textcolor{keywordflow}{if} ( fabs(px -\/ current\_point.x) < 0.1 \&\&}
\DoxyCodeLine{385                     fabs(py -\/ current\_point.y) < 0.1 \&\&}
\DoxyCodeLine{386                     fabs(pz -\/ current\_point.z) < 0.1)}
\DoxyCodeLine{387               \{}
\DoxyCodeLine{388                 num\_valid++;}
\DoxyCodeLine{389               \}}
\DoxyCodeLine{390             \}}
\DoxyCodeLine{391           \}  \textcolor{comment}{// for y}}
\DoxyCodeLine{392         \}  \textcolor{comment}{// for x}}
\DoxyCodeLine{393 }
\DoxyCodeLine{394         \textcolor{keywordflow}{if} (num\_valid >= 7)}
\DoxyCodeLine{395         \{}
\DoxyCodeLine{396           marking\_points.points.push\_back(current\_point);}
\DoxyCodeLine{397         \}}
\DoxyCodeLine{398       \}  \textcolor{comment}{// for j (y)}}
\DoxyCodeLine{399     \}  \textcolor{comment}{// for i (x)}}
\DoxyCodeLine{400   \}}
\DoxyCodeLine{401 }
\DoxyCodeLine{402   \textcolor{comment}{// Publish and buffer our clearing point cloud}}
\DoxyCodeLine{403   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_adae5f878c5f4890eab8ee2b650c9e359}{publish\_observations\_}})}
\DoxyCodeLine{404   \{}
\DoxyCodeLine{405     \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a9637d98daa367a006dcc63e8a48de937}{clearing\_pub\_}}.publish(clearing\_points);}
\DoxyCodeLine{406   \}}
\DoxyCodeLine{407 }
\DoxyCodeLine{408   sensor\_msgs::PointCloud2 clearing\_cloud2;}
\DoxyCodeLine{409   \textcolor{keywordflow}{if} (!sensor\_msgs::convertPointCloudToPointCloud2(clearing\_points, clearing\_cloud2))}
\DoxyCodeLine{410   \{}
\DoxyCodeLine{411     ROS\_ERROR(\textcolor{stringliteral}{"Failed to convert a PointCloud to a PointCloud2, dropping message"});}
\DoxyCodeLine{412     \textcolor{keywordflow}{return};}
\DoxyCodeLine{413   \}}
\DoxyCodeLine{414 }
\DoxyCodeLine{415   \textcolor{comment}{// buffer the ground plane observation}}
\DoxyCodeLine{416   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}{clearing\_buf\_}}-\/>lock();}
\DoxyCodeLine{417   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}{clearing\_buf\_}}-\/>bufferCloud(clearing\_cloud2);}
\DoxyCodeLine{418   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}{clearing\_buf\_}}-\/>unlock();}
\DoxyCodeLine{419 }
\DoxyCodeLine{420   \textcolor{comment}{// Publish and buffer our marking point cloud}}
\DoxyCodeLine{421   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_adae5f878c5f4890eab8ee2b650c9e359}{publish\_observations\_}})}
\DoxyCodeLine{422   \{}
\DoxyCodeLine{423     \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ac6961b460b9d70b2553b7c9603b5a75a}{marking\_pub\_}}.publish(marking\_points);}
\DoxyCodeLine{424   \}}
\DoxyCodeLine{425 }
\DoxyCodeLine{426   sensor\_msgs::PointCloud2 marking\_cloud2;}
\DoxyCodeLine{427   \textcolor{keywordflow}{if} (!sensor\_msgs::convertPointCloudToPointCloud2(marking\_points, marking\_cloud2))}
\DoxyCodeLine{428   \{}
\DoxyCodeLine{429     ROS\_ERROR(\textcolor{stringliteral}{"Failed to convert a PointCloud to a PointCloud2, dropping message"});}
\DoxyCodeLine{430     \textcolor{keywordflow}{return};}
\DoxyCodeLine{431   \}}
\DoxyCodeLine{432 }
\DoxyCodeLine{433   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}{marking\_buf\_}}-\/>lock();}
\DoxyCodeLine{434   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}{marking\_buf\_}}-\/>bufferCloud(marking\_cloud2);}
\DoxyCodeLine{435   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}{marking\_buf\_}}-\/>unlock();}
\DoxyCodeLine{436 \}}

\end{DoxyCode}


References clear\+\_\+nans\+\_\+, clear\+\_\+with\+\_\+skipped\+\_\+rays\+\_\+, clearing\+\_\+buf\+\_\+, clearing\+\_\+pub\+\_\+, find\+\_\+ground\+\_\+plane\+\_\+, ground\+\_\+threshold\+\_\+, K\+\_\+, marking\+\_\+buf\+\_\+, marking\+\_\+pub\+\_\+, battery\+\_\+monitor\+\_\+node\+::msg, mutex\+\_\+\+K\+\_\+, normals\+\_\+estimator\+\_\+, observations\+\_\+threshold\+\_\+, plane\+\_\+estimator\+\_\+, publish\+\_\+observations\+\_\+, skip\+\_\+rays\+\_\+bottom\+\_\+, skip\+\_\+rays\+\_\+left\+\_\+, skip\+\_\+rays\+\_\+right\+\_\+, skip\+\_\+rays\+\_\+top\+\_\+, and pick\+\_\+and\+\_\+place\+::y.



Referenced by on\+Initialize().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcostmap__2d_1_1FetchDepthLayer_aaaca74ee6852ac6d8a0a7fc8860f4151_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_aed6da711f197f79f7f7b6ec0cd8804c0}\label{classcostmap__2d_1_1FetchDepthLayer_aed6da711f197f79f7f7b6ec0cd8804c0}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!onInitialize@{onInitialize}}
\index{onInitialize@{onInitialize}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{onInitialize()}{onInitialize()}}
{\footnotesize\ttfamily void costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::on\+Initialize (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Initialization function for the Depth\+Layer. 



Definition at line 45 of file depth\+\_\+layer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{46 \{}
\DoxyCodeLine{47   VoxelLayer::onInitialize();}
\DoxyCodeLine{48 }
\DoxyCodeLine{49   \textcolor{keywordtype}{double} observation\_keep\_time;}
\DoxyCodeLine{50   \textcolor{keywordtype}{double} expected\_update\_rate;}
\DoxyCodeLine{51   \textcolor{keywordtype}{double} transform\_tolerance;}
\DoxyCodeLine{52   \textcolor{keywordtype}{double} obstacle\_range;}
\DoxyCodeLine{53   \textcolor{keywordtype}{double} raytrace\_range;}
\DoxyCodeLine{54   \textcolor{keywordtype}{double} min\_obstacle\_height;}
\DoxyCodeLine{55   \textcolor{keywordtype}{double} max\_obstacle\_height;}
\DoxyCodeLine{56   \textcolor{keywordtype}{double} min\_clearing\_height;}
\DoxyCodeLine{57   \textcolor{keywordtype}{double} max\_clearing\_height;}
\DoxyCodeLine{58   std::string topic = \textcolor{stringliteral}{""};}
\DoxyCodeLine{59   std::string sensor\_frame = \textcolor{stringliteral}{""};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61   ros::NodeHandle private\_nh(\textcolor{stringliteral}{"\string~/"} + name\_);}
\DoxyCodeLine{62 }
\DoxyCodeLine{63   private\_nh.param(\textcolor{stringliteral}{"publish\_observations"}, \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_adae5f878c5f4890eab8ee2b650c9e359}{publish\_observations\_}}, \textcolor{keyword}{false});}
\DoxyCodeLine{64   private\_nh.param(\textcolor{stringliteral}{"observations\_separation\_threshold"}, \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab55ca0b6827ea860cc3d69420d67e08f}{observations\_threshold\_}}, 0.06);}
\DoxyCodeLine{65 }
\DoxyCodeLine{66   \textcolor{comment}{// Optionally detect the ground plane}}
\DoxyCodeLine{67   private\_nh.param(\textcolor{stringliteral}{"find\_ground\_plane"}, \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ac203887c6f165e5f2109156dbe37398b}{find\_ground\_plane\_}}, \textcolor{keyword}{true});}
\DoxyCodeLine{68   private\_nh.param(\textcolor{stringliteral}{"ground\_orientation\_threshold"}, \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa78755635124e9db1d8ed7f183be5269}{ground\_threshold\_}}, 0.9);}
\DoxyCodeLine{69 }
\DoxyCodeLine{70   \textcolor{comment}{// Should NANs be used as clearing observations?}}
\DoxyCodeLine{71   private\_nh.param(\textcolor{stringliteral}{"clear\_nans"}, \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab0274b1ce183fc9cc8cc5c0ab2fe67b7}{clear\_nans\_}}, \textcolor{keyword}{false});}
\DoxyCodeLine{72 }
\DoxyCodeLine{73   \textcolor{comment}{// Observation range values for both marking and clearing}}
\DoxyCodeLine{74   private\_nh.param(\textcolor{stringliteral}{"min\_obstacle\_height"}, min\_obstacle\_height, 0.0);}
\DoxyCodeLine{75   private\_nh.param(\textcolor{stringliteral}{"max\_obstacle\_height"}, max\_obstacle\_height, 2.0);}
\DoxyCodeLine{76   private\_nh.param(\textcolor{stringliteral}{"min\_clearing\_height"}, min\_clearing\_height, -\/std::numeric\_limits<double>::infinity());}
\DoxyCodeLine{77   private\_nh.param(\textcolor{stringliteral}{"max\_clearing\_height"}, max\_clearing\_height, std::numeric\_limits<double>::infinity());}
\DoxyCodeLine{78 }
\DoxyCodeLine{79   \textcolor{comment}{// Skipping of potentially noisy rays near the edge of the image}}
\DoxyCodeLine{80   private\_nh.param(\textcolor{stringliteral}{"skip\_rays\_bottom"}, \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a852251155d2425bc56bc5cca35b5fbd6}{skip\_rays\_bottom\_}}, 20);}
\DoxyCodeLine{81   private\_nh.param(\textcolor{stringliteral}{"skip\_rays\_top"},    \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a0ad36438d2d023f88a57d5626075d404}{skip\_rays\_top\_}},    20);}
\DoxyCodeLine{82   private\_nh.param(\textcolor{stringliteral}{"skip\_rays\_left"},   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a10c76d12e52d8e575d08856817a7f765}{skip\_rays\_left\_}},   20);}
\DoxyCodeLine{83   private\_nh.param(\textcolor{stringliteral}{"skip\_rays\_right"},  \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a616c672155ab7b2d2f5aa7e0e8e9ee01}{skip\_rays\_right\_}},  20);}
\DoxyCodeLine{84 }
\DoxyCodeLine{85   \textcolor{comment}{// Should skipped edge rays be used for clearing?}}
\DoxyCodeLine{86   private\_nh.param(\textcolor{stringliteral}{"clear\_with\_skipped\_rays"}, \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a5c11eaae40cfe587700b536f076483ec}{clear\_with\_skipped\_rays\_}}, \textcolor{keyword}{false});}
\DoxyCodeLine{87 }
\DoxyCodeLine{88   \textcolor{comment}{// How long should observations persist?}}
\DoxyCodeLine{89   private\_nh.param(\textcolor{stringliteral}{"observation\_persistence"}, observation\_keep\_time, 0.0);}
\DoxyCodeLine{90 }
\DoxyCodeLine{91   \textcolor{comment}{// How often should we expect to get sensor updates?}}
\DoxyCodeLine{92   private\_nh.param(\textcolor{stringliteral}{"expected\_update\_rate"}, expected\_update\_rate, 0.0);}
\DoxyCodeLine{93 }
\DoxyCodeLine{94   \textcolor{comment}{// How long to wait for transforms to be available?}}
\DoxyCodeLine{95   private\_nh.param(\textcolor{stringliteral}{"transform\_tolerance"}, transform\_tolerance, 0.5);}
\DoxyCodeLine{96 }
\DoxyCodeLine{97   std::string raytrace\_range\_param\_name, obstacle\_range\_param\_name;}
\DoxyCodeLine{98 }
\DoxyCodeLine{99   \textcolor{comment}{// get the obstacle range for the sensor}}
\DoxyCodeLine{100   obstacle\_range = 2.5;}
\DoxyCodeLine{101   \textcolor{keywordflow}{if} (private\_nh.searchParam(\textcolor{stringliteral}{"obstacle\_range"}, obstacle\_range\_param\_name))}
\DoxyCodeLine{102   \{}
\DoxyCodeLine{103     private\_nh.getParam(obstacle\_range\_param\_name, obstacle\_range);}
\DoxyCodeLine{104   \}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106   \textcolor{comment}{// get the raytrace range for the sensor}}
\DoxyCodeLine{107   raytrace\_range = 3.0;}
\DoxyCodeLine{108   \textcolor{keywordflow}{if} (private\_nh.searchParam(\textcolor{stringliteral}{"raytrace\_range"}, raytrace\_range\_param\_name))}
\DoxyCodeLine{109   \{}
\DoxyCodeLine{110     private\_nh.getParam(raytrace\_range\_param\_name, raytrace\_range);}
\DoxyCodeLine{111   \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}{marking\_buf\_}} = boost::shared\_ptr<costmap\_2d::ObservationBuffer> (}
\DoxyCodeLine{114     \textcolor{keyword}{new} costmap\_2d::ObservationBuffer(topic, observation\_keep\_time,}
\DoxyCodeLine{115       expected\_update\_rate, min\_obstacle\_height, max\_obstacle\_height,}
\DoxyCodeLine{116       obstacle\_range, raytrace\_range, *tf\_, global\_frame\_,}
\DoxyCodeLine{117       sensor\_frame, transform\_tolerance));}
\DoxyCodeLine{118   marking\_buffers\_.push\_back(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}{marking\_buf\_}});}
\DoxyCodeLine{119   observation\_buffers\_.push\_back(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}{marking\_buf\_}});}
\DoxyCodeLine{120 }
\DoxyCodeLine{121   min\_obstacle\_height = 0.0;}
\DoxyCodeLine{122 }
\DoxyCodeLine{123   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}{clearing\_buf\_}} =  boost::shared\_ptr<costmap\_2d::ObservationBuffer> (}
\DoxyCodeLine{124     \textcolor{keyword}{new} costmap\_2d::ObservationBuffer(topic, observation\_keep\_time,}
\DoxyCodeLine{125       expected\_update\_rate, min\_clearing\_height, max\_clearing\_height,}
\DoxyCodeLine{126       obstacle\_range, raytrace\_range, *tf\_, global\_frame\_,}
\DoxyCodeLine{127       sensor\_frame, transform\_tolerance));}
\DoxyCodeLine{128   clearing\_buffers\_.push\_back(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}{clearing\_buf\_}});}
\DoxyCodeLine{129   observation\_buffers\_.push\_back(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}{clearing\_buf\_}});}
\DoxyCodeLine{130 }
\DoxyCodeLine{131   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_adae5f878c5f4890eab8ee2b650c9e359}{publish\_observations\_}})}
\DoxyCodeLine{132   \{}
\DoxyCodeLine{133     \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a9637d98daa367a006dcc63e8a48de937}{clearing\_pub\_}} = private\_nh.advertise<sensor\_msgs::PointCloud>(\textcolor{stringliteral}{"clearing\_obs"}, 1);}
\DoxyCodeLine{134     \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ac6961b460b9d70b2553b7c9603b5a75a}{marking\_pub\_}} = private\_nh.advertise<sensor\_msgs::PointCloud>(\textcolor{stringliteral}{"marking\_obs"}, 1);}
\DoxyCodeLine{135   \}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137   \textcolor{comment}{// subscribe to camera/info topics}}
\DoxyCodeLine{138   std::string camera\_depth\_topic, camera\_info\_topic;}
\DoxyCodeLine{139   private\_nh.param(\textcolor{stringliteral}{"depth\_topic"}, camera\_depth\_topic,}
\DoxyCodeLine{140                    std::string(\textcolor{stringliteral}{"/head\_camera/depth\_downsample/image\_raw"}));}
\DoxyCodeLine{141   private\_nh.param(\textcolor{stringliteral}{"info\_topic"}, camera\_info\_topic,}
\DoxyCodeLine{142                    std::string(\textcolor{stringliteral}{"/head\_camera/depth\_downsample/camera\_info"}));}
\DoxyCodeLine{143   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_ab7583d68574f49ff50bcaf0acf803c5b}{camera\_info\_sub\_}} = private\_nh.subscribe<sensor\_msgs::CameraInfo>(}
\DoxyCodeLine{144     camera\_info\_topic, 10, \&\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a567caa9a60f495de714659d8502e86d3}{FetchDepthLayer::cameraInfoCallback}}, \textcolor{keyword}{this});}
\DoxyCodeLine{145 }
\DoxyCodeLine{146   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a5592d80f77a79efc9c8fd021d8618160}{depth\_image\_sub\_}}.reset(\textcolor{keyword}{new} message\_filters::Subscriber<sensor\_msgs::Image>(private\_nh, camera\_depth\_topic, 10));}
\DoxyCodeLine{147   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aad4ee2da62a77bb1681000eef24bd633}{depth\_image\_filter\_}} = boost::shared\_ptr< tf2\_ros::MessageFilter<sensor\_msgs::Image> >(}
\DoxyCodeLine{148     \textcolor{keyword}{new} tf2\_ros::MessageFilter<sensor\_msgs::Image>(*\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a5592d80f77a79efc9c8fd021d8618160}{depth\_image\_sub\_}}, *tf\_, global\_frame\_, 10, private\_nh));}
\DoxyCodeLine{149   \mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aad4ee2da62a77bb1681000eef24bd633}{depth\_image\_filter\_}}-\/>registerCallback(boost::bind(\&\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aaaca74ee6852ac6d8a0a7fc8860f4151}{FetchDepthLayer::depthImageCallback}}, \textcolor{keyword}{this}, \_1));}
\DoxyCodeLine{150   observation\_subscribers\_.push\_back(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_a5592d80f77a79efc9c8fd021d8618160}{depth\_image\_sub\_}});}
\DoxyCodeLine{151   observation\_notifiers\_.push\_back(\mbox{\hyperlink{classcostmap__2d_1_1FetchDepthLayer_aad4ee2da62a77bb1681000eef24bd633}{depth\_image\_filter\_}});}
\DoxyCodeLine{152   observation\_notifiers\_.back()-\/>setTolerance(ros::Duration(0.05));}
\DoxyCodeLine{153 \}}

\end{DoxyCode}


References camera\+\_\+info\+\_\+sub\+\_\+, camera\+Info\+Callback(), clear\+\_\+nans\+\_\+, clear\+\_\+with\+\_\+skipped\+\_\+rays\+\_\+, clearing\+\_\+buf\+\_\+, clearing\+\_\+pub\+\_\+, depth\+\_\+image\+\_\+filter\+\_\+, depth\+\_\+image\+\_\+sub\+\_\+, depth\+Image\+Callback(), find\+\_\+ground\+\_\+plane\+\_\+, ground\+\_\+threshold\+\_\+, marking\+\_\+buf\+\_\+, marking\+\_\+pub\+\_\+, observations\+\_\+threshold\+\_\+, publish\+\_\+observations\+\_\+, skip\+\_\+rays\+\_\+bottom\+\_\+, skip\+\_\+rays\+\_\+left\+\_\+, skip\+\_\+rays\+\_\+right\+\_\+, and skip\+\_\+rays\+\_\+top\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcostmap__2d_1_1FetchDepthLayer_aed6da711f197f79f7f7b6ec0cd8804c0_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_ab7583d68574f49ff50bcaf0acf803c5b}\label{classcostmap__2d_1_1FetchDepthLayer_ab7583d68574f49ff50bcaf0acf803c5b}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!camera\_info\_sub\_@{camera\_info\_sub\_}}
\index{camera\_info\_sub\_@{camera\_info\_sub\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{camera\_info\_sub\_}{camera\_info\_sub\_}}
{\footnotesize\ttfamily ros\+::\+Subscriber costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::camera\+\_\+info\+\_\+sub\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 116 of file depth\+\_\+layer.\+h.



Referenced by on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_ab0274b1ce183fc9cc8cc5c0ab2fe67b7}\label{classcostmap__2d_1_1FetchDepthLayer_ab0274b1ce183fc9cc8cc5c0ab2fe67b7}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!clear\_nans\_@{clear\_nans\_}}
\index{clear\_nans\_@{clear\_nans\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{clear\_nans\_}{clear\_nans\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::clear\+\_\+nans\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 98 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a5c11eaae40cfe587700b536f076483ec}\label{classcostmap__2d_1_1FetchDepthLayer_a5c11eaae40cfe587700b536f076483ec}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!clear\_with\_skipped\_rays\_@{clear\_with\_skipped\_rays\_}}
\index{clear\_with\_skipped\_rays\_@{clear\_with\_skipped\_rays\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{clear\_with\_skipped\_rays\_}{clear\_with\_skipped\_rays\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::clear\+\_\+with\+\_\+skipped\+\_\+rays\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 107 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}\label{classcostmap__2d_1_1FetchDepthLayer_aa68ba9a21f2301178c4ba09f12135a20}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!clearing\_buf\_@{clearing\_buf\_}}
\index{clearing\_buf\_@{clearing\_buf\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{clearing\_buf\_}{clearing\_buf\_}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$costmap\+\_\+2d\+::\+Observation\+Buffer$>$ costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::clearing\+\_\+buf\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 81 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a9637d98daa367a006dcc63e8a48de937}\label{classcostmap__2d_1_1FetchDepthLayer_a9637d98daa367a006dcc63e8a48de937}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!clearing\_pub\_@{clearing\_pub\_}}
\index{clearing\_pub\_@{clearing\_pub\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{clearing\_pub\_}{clearing\_pub\_}}
{\footnotesize\ttfamily ros\+::\+Publisher costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::clearing\+\_\+pub\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 119 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_ae1cd4af1206d1c6eed6f3f946aad8184}\label{classcostmap__2d_1_1FetchDepthLayer_ae1cd4af1206d1c6eed6f3f946aad8184}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!depth\_cleaner\_@{depth\_cleaner\_}}
\index{depth\_cleaner\_@{depth\_cleaner\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{depth\_cleaner\_}{depth\_cleaner\_}}
{\footnotesize\ttfamily cv\+::\+Ptr$<$Depth\+Cleaner$>$ costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::depth\+\_\+cleaner\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 129 of file depth\+\_\+layer.\+h.

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_aad4ee2da62a77bb1681000eef24bd633}\label{classcostmap__2d_1_1FetchDepthLayer_aad4ee2da62a77bb1681000eef24bd633}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!depth\_image\_filter\_@{depth\_image\_filter\_}}
\index{depth\_image\_filter\_@{depth\_image\_filter\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{depth\_image\_filter\_}{depth\_image\_filter\_}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$ tf2\+\_\+ros\+::\+Message\+Filter$<$sensor\+\_\+msgs\+::\+Image$>$ $>$ costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::depth\+\_\+image\+\_\+filter\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 112 of file depth\+\_\+layer.\+h.



Referenced by on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a5592d80f77a79efc9c8fd021d8618160}\label{classcostmap__2d_1_1FetchDepthLayer_a5592d80f77a79efc9c8fd021d8618160}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!depth\_image\_sub\_@{depth\_image\_sub\_}}
\index{depth\_image\_sub\_@{depth\_image\_sub\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{depth\_image\_sub\_}{depth\_image\_sub\_}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$ message\+\_\+filters\+::\+Subscriber$<$sensor\+\_\+msgs\+::\+Image$>$ $>$ costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::depth\+\_\+image\+\_\+sub\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 111 of file depth\+\_\+layer.\+h.



Referenced by on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_ac203887c6f165e5f2109156dbe37398b}\label{classcostmap__2d_1_1FetchDepthLayer_ac203887c6f165e5f2109156dbe37398b}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!find\_ground\_plane\_@{find\_ground\_plane\_}}
\index{find\_ground\_plane\_@{find\_ground\_plane\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{find\_ground\_plane\_}{find\_ground\_plane\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::find\+\_\+ground\+\_\+plane\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 91 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_aa78755635124e9db1d8ed7f183be5269}\label{classcostmap__2d_1_1FetchDepthLayer_aa78755635124e9db1d8ed7f183be5269}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!ground\_threshold\_@{ground\_threshold\_}}
\index{ground\_threshold\_@{ground\_threshold\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{ground\_threshold\_}{ground\_threshold\_}}
{\footnotesize\ttfamily double costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::ground\+\_\+threshold\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 95 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a266873f35b0dec9ad10302b4f6e270f6}\label{classcostmap__2d_1_1FetchDepthLayer_a266873f35b0dec9ad10302b4f6e270f6}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!K\_@{K\_}}
\index{K\_@{K\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{K\_}{K\_}}
{\footnotesize\ttfamily cv\+::\+Mat costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::\+K\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 126 of file depth\+\_\+layer.\+h.



Referenced by camera\+Info\+Callback(), and depth\+Image\+Callback().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}\label{classcostmap__2d_1_1FetchDepthLayer_a45b019f4ef9368c043e3895800c426c6}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!marking\_buf\_@{marking\_buf\_}}
\index{marking\_buf\_@{marking\_buf\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{marking\_buf\_}{marking\_buf\_}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$costmap\+\_\+2d\+::\+Observation\+Buffer$>$ costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::marking\+\_\+buf\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 80 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_ac6961b460b9d70b2553b7c9603b5a75a}\label{classcostmap__2d_1_1FetchDepthLayer_ac6961b460b9d70b2553b7c9603b5a75a}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!marking\_pub\_@{marking\_pub\_}}
\index{marking\_pub\_@{marking\_pub\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{marking\_pub\_}{marking\_pub\_}}
{\footnotesize\ttfamily ros\+::\+Publisher costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::marking\+\_\+pub\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 122 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_af70d0459c2a154f25fcc87dc37b43e80}\label{classcostmap__2d_1_1FetchDepthLayer_af70d0459c2a154f25fcc87dc37b43e80}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!mutex\_K\_@{mutex\_K\_}}
\index{mutex\_K\_@{mutex\_K\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{mutex\_K\_}{mutex\_K\_}}
{\footnotesize\ttfamily boost\+::mutex costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::mutex\+\_\+\+K\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 125 of file depth\+\_\+layer.\+h.



Referenced by camera\+Info\+Callback(), and depth\+Image\+Callback().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_aa3ebfd8dbf0eb043a5d040e6a8655e2a}\label{classcostmap__2d_1_1FetchDepthLayer_aa3ebfd8dbf0eb043a5d040e6a8655e2a}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!normals\_estimator\_@{normals\_estimator\_}}
\index{normals\_estimator\_@{normals\_estimator\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{normals\_estimator\_}{normals\_estimator\_}}
{\footnotesize\ttfamily cv\+::\+Ptr$<$Rgbd\+Normals$>$ costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::normals\+\_\+estimator\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 132 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_ab55ca0b6827ea860cc3d69420d67e08f}\label{classcostmap__2d_1_1FetchDepthLayer_ab55ca0b6827ea860cc3d69420d67e08f}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!observations\_threshold\_@{observations\_threshold\_}}
\index{observations\_threshold\_@{observations\_threshold\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{observations\_threshold\_}{observations\_threshold\_}}
{\footnotesize\ttfamily double costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::observations\+\_\+threshold\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 88 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}\label{classcostmap__2d_1_1FetchDepthLayer_a308c8e4dd42f95f5a0b0aecd2d0aba07}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!plane\_estimator\_@{plane\_estimator\_}}
\index{plane\_estimator\_@{plane\_estimator\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{plane\_estimator\_}{plane\_estimator\_}}
{\footnotesize\ttfamily cv\+::\+Ptr$<$Rgbd\+Plane$>$ costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::plane\+\_\+estimator\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 133 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_adae5f878c5f4890eab8ee2b650c9e359}\label{classcostmap__2d_1_1FetchDepthLayer_adae5f878c5f4890eab8ee2b650c9e359}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!publish\_observations\_@{publish\_observations\_}}
\index{publish\_observations\_@{publish\_observations\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{publish\_observations\_}{publish\_observations\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::publish\+\_\+observations\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 84 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a852251155d2425bc56bc5cca35b5fbd6}\label{classcostmap__2d_1_1FetchDepthLayer_a852251155d2425bc56bc5cca35b5fbd6}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!skip\_rays\_bottom\_@{skip\_rays\_bottom\_}}
\index{skip\_rays\_bottom\_@{skip\_rays\_bottom\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{skip\_rays\_bottom\_}{skip\_rays\_bottom\_}}
{\footnotesize\ttfamily int costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::skip\+\_\+rays\+\_\+bottom\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 101 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a10c76d12e52d8e575d08856817a7f765}\label{classcostmap__2d_1_1FetchDepthLayer_a10c76d12e52d8e575d08856817a7f765}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!skip\_rays\_left\_@{skip\_rays\_left\_}}
\index{skip\_rays\_left\_@{skip\_rays\_left\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{skip\_rays\_left\_}{skip\_rays\_left\_}}
{\footnotesize\ttfamily int costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::skip\+\_\+rays\+\_\+left\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 103 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a616c672155ab7b2d2f5aa7e0e8e9ee01}\label{classcostmap__2d_1_1FetchDepthLayer_a616c672155ab7b2d2f5aa7e0e8e9ee01}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!skip\_rays\_right\_@{skip\_rays\_right\_}}
\index{skip\_rays\_right\_@{skip\_rays\_right\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{skip\_rays\_right\_}{skip\_rays\_right\_}}
{\footnotesize\ttfamily int costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::skip\+\_\+rays\+\_\+right\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 104 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().

\mbox{\Hypertarget{classcostmap__2d_1_1FetchDepthLayer_a0ad36438d2d023f88a57d5626075d404}\label{classcostmap__2d_1_1FetchDepthLayer_a0ad36438d2d023f88a57d5626075d404}} 
\index{costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}!skip\_rays\_top\_@{skip\_rays\_top\_}}
\index{skip\_rays\_top\_@{skip\_rays\_top\_}!costmap\_2d::FetchDepthLayer@{costmap\_2d::FetchDepthLayer}}
\doxysubsubsection{\texorpdfstring{skip\_rays\_top\_}{skip\_rays\_top\_}}
{\footnotesize\ttfamily int costmap\+\_\+2d\+::\+Fetch\+Depth\+Layer\+::skip\+\_\+rays\+\_\+top\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 102 of file depth\+\_\+layer.\+h.



Referenced by depth\+Image\+Callback(), and on\+Initialize().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
submodules/fetch\+\_\+ros/fetch\+\_\+depth\+\_\+layer/include/fetch\+\_\+depth\+\_\+layer/\mbox{\hyperlink{depth__layer_8h}{depth\+\_\+layer.\+h}}\item 
submodules/fetch\+\_\+ros/fetch\+\_\+depth\+\_\+layer/src/\mbox{\hyperlink{depth__layer_8cpp}{depth\+\_\+layer.\+cpp}}\end{DoxyCompactItemize}
