\hypertarget{classrobot__controllers_1_1PointHeadController}{}\doxysection{robot\+\_\+controllers\+::Point\+Head\+Controller Class Reference}
\label{classrobot__controllers_1_1PointHeadController}\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}


{\ttfamily \#include $<$point\+\_\+head.\+h$>$}



Inheritance diagram for robot\+\_\+controllers\+::Point\+Head\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classrobot__controllers_1_1PointHeadController__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for robot\+\_\+controllers\+::Point\+Head\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classrobot__controllers_1_1PointHeadController__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_ae8f8c850c0c701522c7c6d33b8105ab6}{Point\+Head\+Controller}} ()
\item 
virtual \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a8e5c02b73262dbda4dddcd1e90f9e260}{$\sim$\+Point\+Head\+Controller}} ()
\item 
virtual int \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_acd378486a05ac394cdc8991851f60719}{init}} (ros\+::\+Node\+Handle \&nh, \mbox{\hyperlink{classrobot__controllers_1_1ControllerManager}{Controller\+Manager}} $\ast$manager)
\begin{DoxyCompactList}\small\item\em Initialize the controller and any required data structures. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a1067c29d13d431c980f3d2bd7c327005}{start}} ()
\begin{DoxyCompactList}\small\item\em Attempt to start the controller. This should be called only by the \mbox{\hyperlink{classrobot__controllers_1_1ControllerManager}{Controller\+Manager}} instance. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a7bf48208e3295227e67272fad2fb22ac}{stop}} (\mbox{\hyperlink{classbool}{bool}} force)
\begin{DoxyCompactList}\small\item\em Attempt to stop the controller. This should be called only by the \mbox{\hyperlink{classrobot__controllers_1_1ControllerManager}{Controller\+Manager}} instance. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a44b4b8d9807c73c42aec798d20878d2d}{reset}} ()
\begin{DoxyCompactList}\small\item\em Cleanly reset the controller to it\textquotesingle{}s initial state. Some controllers may choose to stop themselves. This is mainly used in the case of the the robot exiting some fault condition. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6877c5cfaa6c2fe0de94a2f3452b8274}{update}} (const ros\+::\+Time \&now, const ros\+::\+Duration \&dt)
\begin{DoxyCompactList}\small\item\em This is the update loop for the controller. \end{DoxyCompactList}\item 
virtual std\+::string \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_aa8486e1a5439471068bcb76ce23390ff}{get\+Type}} ()
\begin{DoxyCompactList}\small\item\em Get the type of this controller. \end{DoxyCompactList}\item 
virtual std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a78d8a3c2ce35115e6e259bb35ddaea22}{get\+Commanded\+Names}} ()
\begin{DoxyCompactList}\small\item\em Get the names of joints/controllers which this controller commands. \end{DoxyCompactList}\item 
virtual std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a32612e8dac88534a68254cc14f54f0e5}{get\+Claimed\+Names}} ()
\begin{DoxyCompactList}\small\item\em Get the names of joints/controllers which this controller exclusively claims. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef actionlib\+::\+Simple\+Action\+Server$<$ control\+\_\+msgs\+::\+Point\+Head\+Action $>$ \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af50fd17677c46715345486dd123fd606}{head\+\_\+server\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a1896576394554766391cbe75446209b5}{execute\+Cb}} (const control\+\_\+msgs\+::\+Point\+Head\+Goal\+Const\+Ptr \&goal)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af63567afd084b55f1dc7d193451308f0}{initialized\+\_\+}}
\item 
\mbox{\hyperlink{classrobot__controllers_1_1ControllerManager}{Controller\+Manager}} $\ast$ \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a28f2894024523897546a403b77f36dee}{manager\+\_\+}}
\item 
control\+\_\+msgs\+::\+Point\+Head\+Result \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6d923ab77d2f0de00abf8a50d27908d5}{result\+\_\+}}
\item 
boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classrobot__controllers_1_1TrajectorySampler}{Trajectory\+Sampler}} $>$ \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_aa39cd476d484935149eb571b489e9168}{sampler\+\_\+}}
\item 
boost\+::mutex \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_ac1e1b53de60a4eb395cd4daf9f362889}{sampler\+\_\+mutex\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af19a1dece31096793cbb4176a07e626f}{stop\+\_\+with\+\_\+action\+\_\+}}
\item 
\mbox{\hyperlink{structrobot__controllers_1_1TrajectoryPoint}{Trajectory\+Point}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a07c899d0f1d341ec99e9d894b8b9a067}{last\+\_\+sample\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a3a4f782803e261e301d93af0420607fa}{preempted\+\_\+}}
\item 
std\+::string \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_afc3ae8e946ac0966da81f2ed714642c2}{root\+\_\+link\+\_\+}}
\begin{DoxyCompactList}\small\item\em action was preempted (has nothing to do with preempt() above \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacerobot__controllers_a9c7cc37a8e0d295ea24c75cbb656ecfa}{Joint\+Handle\+Ptr}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}{head\+\_\+pan\+\_\+}}
\item 
\mbox{\hyperlink{namespacerobot__controllers_a9c7cc37a8e0d295ea24c75cbb656ecfa}{Joint\+Handle\+Ptr}} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a8383b4844b8b6cbbe8088be0b8683b70}{head\+\_\+tilt\+\_\+}}
\item 
boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af50fd17677c46715345486dd123fd606}{head\+\_\+server\+\_\+t}} $>$ \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\+\_\+}}
\item 
K\+D\+L\+::\+Tree \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a75ec44f0176b59bd62737e70be7dab19}{kdl\+\_\+tree\+\_\+}}
\item 
tf\+::\+Transform\+Listener \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6076272da0482a95c2f909e037d7a67b}{listener\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 93 of file point\+\_\+head.\+h.



\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_af50fd17677c46715345486dd123fd606}\label{classrobot__controllers_1_1PointHeadController_af50fd17677c46715345486dd123fd606}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!head\_server\_t@{head\_server\_t}}
\index{head\_server\_t@{head\_server\_t}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{head\_server\_t}{head\_server\_t}}
{\footnotesize\ttfamily typedef actionlib\+::\+Simple\+Action\+Server$<$control\+\_\+msgs\+::\+Point\+Head\+Action$>$ \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af50fd17677c46715345486dd123fd606}{robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::head\+\_\+server\+\_\+t}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 128 of file point\+\_\+head.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_ae8f8c850c0c701522c7c6d33b8105ab6}\label{classrobot__controllers_1_1PointHeadController_ae8f8c850c0c701522c7c6d33b8105ab6}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!PointHeadController@{PointHeadController}}
\index{PointHeadController@{PointHeadController}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{PointHeadController()}{PointHeadController()}}
{\footnotesize\ttfamily robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::\+Point\+Head\+Controller (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 131 of file point\+\_\+head.\+h.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a8e5c02b73262dbda4dddcd1e90f9e260}\label{classrobot__controllers_1_1PointHeadController_a8e5c02b73262dbda4dddcd1e90f9e260}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!````~PointHeadController@{$\sim$PointHeadController}}
\index{````~PointHeadController@{$\sim$PointHeadController}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{$\sim$PointHeadController()}{~PointHeadController()}}
{\footnotesize\ttfamily virtual robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::$\sim$\+Point\+Head\+Controller (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Definition at line 132 of file point\+\_\+head.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a1896576394554766391cbe75446209b5}\label{classrobot__controllers_1_1PointHeadController_a1896576394554766391cbe75446209b5}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!executeCb@{executeCb}}
\index{executeCb@{executeCb}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{executeCb()}{executeCb()}}
{\footnotesize\ttfamily void robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::execute\+Cb (\begin{DoxyParamCaption}\item[{const control\+\_\+msgs\+::\+Point\+Head\+Goal\+Const\+Ptr \&}]{goal }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 228 of file point\+\_\+head.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{246   \{}
\DoxyCodeLine{247     max\_pan\_vel = fmin(\mbox{\hyperlink{namespaceget__controller__state_a945e8678050edb331915cd734a90511e}{goal}}-\/>max\_velocity, \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}{head\_pan\_}}-\/>getVelocityMax());}
\DoxyCodeLine{248     max\_tilt\_vel = fmin(\mbox{\hyperlink{namespaceget__controller__state_a945e8678050edb331915cd734a90511e}{goal}}-\/>max\_velocity, \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a8383b4844b8b6cbbe8088be0b8683b70}{head\_tilt\_}}-\/>getVelocityMax());}
\DoxyCodeLine{249   \}}
\DoxyCodeLine{250   \textcolor{keywordtype}{double} pan\_transit = fabs((\mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[1].q[0] -\/ \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[0].q[0]) / max\_pan\_vel);}
\DoxyCodeLine{251   \textcolor{keywordtype}{double} tilt\_transit = fabs((\mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[1].q[1] -\/ \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[0].q[1]) / max\_tilt\_vel);}
\DoxyCodeLine{252   \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[1].time = \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[0].time + fmax(fmax(pan\_transit, tilt\_transit), \mbox{\hyperlink{namespaceget__controller__state_a945e8678050edb331915cd734a90511e}{goal}}-\/>min\_duration.toSec());}
\DoxyCodeLine{253 }
\DoxyCodeLine{254   \{}
\DoxyCodeLine{255     boost::mutex::scoped\_lock lock(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_ac1e1b53de60a4eb395cd4daf9f362889}{sampler\_mutex\_}});}
\DoxyCodeLine{256     \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_aa39cd476d484935149eb571b489e9168}{sampler\_}}.reset(\textcolor{keyword}{new} SplineTrajectorySampler(\mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}));}
\DoxyCodeLine{257   \}}
\DoxyCodeLine{258 }
\DoxyCodeLine{259   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a28f2894024523897546a403b77f36dee}{manager\_}}-\/>\mbox{\hyperlink{classrobot__controllers_1_1ControllerManager_a280fcfa78c20a84a0b902d74e7d40560}{requestStart}}(\mbox{\hyperlink{classrobot__controllers_1_1Controller_a75431f535a7abc4ed4154a3d1ed8908b}{getName}}()) != 0)}
\DoxyCodeLine{260   \{}
\DoxyCodeLine{261     \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>setAborted(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6d923ab77d2f0de00abf8a50d27908d5}{result\_}}, \textcolor{stringliteral}{"Cannot point head, unable to start controller."});}
\DoxyCodeLine{262     ROS\_ERROR\_NAMED(\textcolor{stringliteral}{"PointHeadController"},}
\DoxyCodeLine{263                     \textcolor{stringliteral}{"Cannot point head, unable to start controller."});}
\DoxyCodeLine{264     \textcolor{keywordflow}{return};}
\DoxyCodeLine{265   \}}
\DoxyCodeLine{266 }
\DoxyCodeLine{267   \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a3a4f782803e261e301d93af0420607fa}{preempted\_}} = \textcolor{keyword}{false};}
\DoxyCodeLine{268   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>isActive())}
\DoxyCodeLine{269   \{}
\DoxyCodeLine{270     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>isPreemptRequested())}
\DoxyCodeLine{271     \{}
\DoxyCodeLine{272       \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>setPreempted(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6d923ab77d2f0de00abf8a50d27908d5}{result\_}}, \textcolor{stringliteral}{"Pointing of the head has been preempted"});}
\DoxyCodeLine{273       ROS\_DEBUG\_NAMED(\textcolor{stringliteral}{"PointHeadController"},}
\DoxyCodeLine{274                       \textcolor{stringliteral}{"Pointing of the head has been preempted"});}
\DoxyCodeLine{275       \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a3a4f782803e261e301d93af0420607fa}{preempted\_}} = \textcolor{keyword}{true};}
\DoxyCodeLine{276       \textcolor{keywordflow}{break};}
\DoxyCodeLine{277     \}}
\DoxyCodeLine{278 }
\DoxyCodeLine{279     \textcolor{comment}{// No feedback needed for PointHeadAction}}
\DoxyCodeLine{280     ros::Duration(1/50.0).sleep();}
\DoxyCodeLine{281   \}}
\DoxyCodeLine{282 }
\DoxyCodeLine{283   \textcolor{comment}{// Stop this controller if desired (and not preempted)}}
\DoxyCodeLine{284   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af19a1dece31096793cbb4176a07e626f}{stop\_with\_action\_}} \&\& !\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a3a4f782803e261e301d93af0420607fa}{preempted\_}})}
\DoxyCodeLine{285     \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a28f2894024523897546a403b77f36dee}{manager\_}}-\/>\mbox{\hyperlink{classrobot__controllers_1_1ControllerManager_a0bc70bc7e49bc48322e569186e25791f}{requestStop}}(\mbox{\hyperlink{classrobot__controllers_1_1Controller_a75431f535a7abc4ed4154a3d1ed8908b}{getName}}());}
\DoxyCodeLine{286 }
\DoxyCodeLine{287   ROS\_DEBUG\_NAMED(\textcolor{stringliteral}{"PointHeadController"}, \textcolor{stringliteral}{"Done pointing head"});}
\DoxyCodeLine{288 \}}
\DoxyCodeLine{289 }
\DoxyCodeLine{290 std::vector<std::string> \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a78d8a3c2ce35115e6e259bb35ddaea22}{PointHeadController::getCommandedNames}}()}
\DoxyCodeLine{291 \{}
\DoxyCodeLine{292   std::vector<std::string> names;}
\DoxyCodeLine{293   names.push\_back(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}{head\_pan\_}}-\/>getName());}
\DoxyCodeLine{294   names.push\_back(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a8383b4844b8b6cbbe8088be0b8683b70}{head\_tilt\_}}-\/>getName());}
\DoxyCodeLine{295   \textcolor{keywordflow}{return} names;}
\DoxyCodeLine{296 \}}
\DoxyCodeLine{297 }
\DoxyCodeLine{298 std::vector<std::string> \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a32612e8dac88534a68254cc14f54f0e5}{PointHeadController::getClaimedNames}}()}
\DoxyCodeLine{299 \{}
\DoxyCodeLine{300   \textcolor{comment}{// Claimed == commanded.}}
\DoxyCodeLine{301   \textcolor{keywordflow}{return} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a78d8a3c2ce35115e6e259bb35ddaea22}{getCommandedNames}}();}
\DoxyCodeLine{302 \}}
\DoxyCodeLine{303 }
\DoxyCodeLine{304 \}  \textcolor{comment}{// namespace robot\_controllers}}

\end{DoxyCode}
\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a32612e8dac88534a68254cc14f54f0e5}\label{classrobot__controllers_1_1PointHeadController_a32612e8dac88534a68254cc14f54f0e5}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!getClaimedNames@{getClaimedNames}}
\index{getClaimedNames@{getClaimedNames}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{getClaimedNames()}{getClaimedNames()}}
{\footnotesize\ttfamily std\+::vector$<$ std\+::string $>$ robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::get\+Claimed\+Names (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Get the names of joints/controllers which this controller exclusively claims. 



Implements \mbox{\hyperlink{classrobot__controllers_1_1Controller_acb21ed7e8c391eb7151a7072416b4987}{robot\+\_\+controllers\+::\+Controller}}.



Definition at line 331 of file point\+\_\+head.\+cpp.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a78d8a3c2ce35115e6e259bb35ddaea22}\label{classrobot__controllers_1_1PointHeadController_a78d8a3c2ce35115e6e259bb35ddaea22}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!getCommandedNames@{getCommandedNames}}
\index{getCommandedNames@{getCommandedNames}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{getCommandedNames()}{getCommandedNames()}}
{\footnotesize\ttfamily std\+::vector$<$ std\+::string $>$ robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::get\+Commanded\+Names (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Get the names of joints/controllers which this controller commands. 



Implements \mbox{\hyperlink{classrobot__controllers_1_1Controller_a9b55bc2d5f95ef80dbf05878b7163fc0}{robot\+\_\+controllers\+::\+Controller}}.



Definition at line 323 of file point\+\_\+head.\+cpp.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_aa8486e1a5439471068bcb76ce23390ff}\label{classrobot__controllers_1_1PointHeadController_aa8486e1a5439471068bcb76ce23390ff}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!getType@{getType}}
\index{getType@{getType}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{getType()}{getType()}}
{\footnotesize\ttfamily virtual std\+::string robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::get\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Get the type of this controller. 



Reimplemented from \mbox{\hyperlink{classrobot__controllers_1_1Controller_ac527e1ae39519d5da149b78d79a37763}{robot\+\_\+controllers\+::\+Controller}}.



Definition at line 175 of file point\+\_\+head.\+h.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_acd378486a05ac394cdc8991851f60719}\label{classrobot__controllers_1_1PointHeadController_acd378486a05ac394cdc8991851f60719}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!init@{init}}
\index{init@{init}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily int robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::init (\begin{DoxyParamCaption}\item[{ros\+::\+Node\+Handle \&}]{nh,  }\item[{\mbox{\hyperlink{classrobot__controllers_1_1ControllerManager}{Controller\+Manager}} $\ast$}]{manager }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Initialize the controller and any required data structures. 


\begin{DoxyParams}{Parameters}
{\em nh} & Node handle for this controller. \\
\hline
{\em manager} & The controller manager instance, this is needed for the controller to get information about joints, etc. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if succesfully configured, negative values are error codes. 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classrobot__controllers_1_1Controller_ac1b7a94badc6c8c4f22770fb027845a0}{robot\+\_\+controllers\+::\+Controller}}.



Definition at line 82 of file point\+\_\+head.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{83   \{}
\DoxyCodeLine{84     ROS\_ERROR\_NAMED(\textcolor{stringliteral}{"PointHeadController"}, \textcolor{stringliteral}{"Failed to construct KDL tree"});}
\DoxyCodeLine{85     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{86   \}}
\DoxyCodeLine{87 }
\DoxyCodeLine{88   \textcolor{comment}{// Find parent of pan joint}}
\DoxyCodeLine{89   KDL::SegmentMap segment\_map = \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a75ec44f0176b59bd62737e70be7dab19}{kdl\_tree\_}}.getSegments();}
\DoxyCodeLine{90   \textcolor{keywordflow}{for} (KDL::SegmentMap::iterator it = segment\_map.begin();}
\DoxyCodeLine{91        it != segment\_map.end();}
\DoxyCodeLine{92        ++it)}
\DoxyCodeLine{93   \{}
\DoxyCodeLine{94 \textcolor{preprocessor}{\#ifdef KDL\_USE\_NEW\_TREE\_INTERFACE}}
\DoxyCodeLine{95     \textcolor{keywordflow}{if} (it-\/>second-\/>segment.getJoint().getName() == \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}{head\_pan\_}}-\/>getName())}
\DoxyCodeLine{96       \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_afc3ae8e946ac0966da81f2ed714642c2}{root\_link\_}} = it-\/>second-\/>parent-\/>first;}
\DoxyCodeLine{97 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{98     \textcolor{keywordflow}{if} (it-\/>second.segment.getJoint().getName() == \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}{head\_pan\_}}-\/>getName())}
\DoxyCodeLine{99       \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_afc3ae8e946ac0966da81f2ed714642c2}{root\_link\_}} = it-\/>second.parent-\/>first;}
\DoxyCodeLine{100 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{101   \}}
\DoxyCodeLine{102 }
\DoxyCodeLine{103   \textcolor{comment}{// Start action server}}
\DoxyCodeLine{104   \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}.reset(\textcolor{keyword}{new} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af50fd17677c46715345486dd123fd606}{head\_server\_t}}(nh, \textcolor{stringliteral}{""},}
\DoxyCodeLine{105                 boost::bind(\&\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a1896576394554766391cbe75446209b5}{PointHeadController::executeCb}}, \textcolor{keyword}{this}, \_1),}
\DoxyCodeLine{106                 \textcolor{keyword}{false}));}
\DoxyCodeLine{107   \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>start();}
\DoxyCodeLine{108 }
\DoxyCodeLine{109   \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af63567afd084b55f1dc7d193451308f0}{initialized\_}} = \textcolor{keyword}{true};}
\DoxyCodeLine{110   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{111 \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113 \textcolor{keywordtype}{bool} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a1067c29d13d431c980f3d2bd7c327005}{PointHeadController::start}}()}
\DoxyCodeLine{114 \{}
\DoxyCodeLine{115   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af63567afd084b55f1dc7d193451308f0}{initialized\_}})}
\DoxyCodeLine{116   \{}
\DoxyCodeLine{117     ROS\_ERROR\_NAMED(\textcolor{stringliteral}{"PointHeadController"},}
\DoxyCodeLine{118                     \textcolor{stringliteral}{"Unable to start, not initialized."});}
\DoxyCodeLine{119     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{120   \}}
\DoxyCodeLine{121 }
\DoxyCodeLine{122   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>isActive())}
\DoxyCodeLine{123   \{}
\DoxyCodeLine{124     ROS\_ERROR\_NAMED(\textcolor{stringliteral}{"PointHeadController"},}
\DoxyCodeLine{125                     \textcolor{stringliteral}{"Unable to start, action server is not active."});}
\DoxyCodeLine{126     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{127   \}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{130 \}}
\DoxyCodeLine{131 }
\DoxyCodeLine{132 \textcolor{keywordtype}{bool} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a7bf48208e3295227e67272fad2fb22ac}{PointHeadController::stop}}(\textcolor{keywordtype}{bool} force)}
\DoxyCodeLine{133 \{}
\DoxyCodeLine{134   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af63567afd084b55f1dc7d193451308f0}{initialized\_}})}
\DoxyCodeLine{135     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{136 }
\DoxyCodeLine{137   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>isActive())}
\DoxyCodeLine{138   \{}
\DoxyCodeLine{139     \textcolor{keywordflow}{if} (force)}
\DoxyCodeLine{140     \{}
\DoxyCodeLine{141       \textcolor{comment}{// Shut down the action}}
\DoxyCodeLine{142       \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>setAborted(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6d923ab77d2f0de00abf8a50d27908d5}{result\_}}, \textcolor{stringliteral}{"Controller manager forced preemption."});}
\DoxyCodeLine{143       ROS\_DEBUG\_NAMED(\textcolor{stringliteral}{"PointHeadController"},}
\DoxyCodeLine{144                       \textcolor{stringliteral}{"Controller manager forced preemption."});}

\end{DoxyCode}
\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a44b4b8d9807c73c42aec798d20878d2d}\label{classrobot__controllers_1_1PointHeadController_a44b4b8d9807c73c42aec798d20878d2d}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!reset@{reset}}
\index{reset@{reset}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Cleanly reset the controller to it\textquotesingle{}s initial state. Some controllers may choose to stop themselves. This is mainly used in the case of the the robot exiting some fault condition. 

\begin{DoxyReturn}{Returns}
True if successfully reset, false otherwise. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classrobot__controllers_1_1Controller_af5170a159c210de2bcb20b89531d5e49}{robot\+\_\+controllers\+::\+Controller}}.



Definition at line 189 of file point\+\_\+head.\+cpp.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a1067c29d13d431c980f3d2bd7c327005}\label{classrobot__controllers_1_1PointHeadController_a1067c29d13d431c980f3d2bd7c327005}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!start@{start}}
\index{start@{start}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Attempt to start the controller. This should be called only by the \mbox{\hyperlink{classrobot__controllers_1_1ControllerManager}{Controller\+Manager}} instance. 

\begin{DoxyReturn}{Returns}
True if successfully started, false otherwise. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classrobot__controllers_1_1Controller_a781e023ddefd3a60fd2c47d68838016b}{robot\+\_\+controllers\+::\+Controller}}.



Definition at line 146 of file point\+\_\+head.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{157 \{}
\DoxyCodeLine{158   \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a7bf48208e3295227e67272fad2fb22ac}{stop}}(\textcolor{keyword}{true});  \textcolor{comment}{// force stop ourselves}}
\DoxyCodeLine{159   \textcolor{keywordflow}{return} (\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a28f2894024523897546a403b77f36dee}{manager\_}}-\/>\mbox{\hyperlink{classrobot__controllers_1_1ControllerManager_a0bc70bc7e49bc48322e569186e25791f}{requestStop}}(\mbox{\hyperlink{classrobot__controllers_1_1Controller_a75431f535a7abc4ed4154a3d1ed8908b}{getName}}()) == 0);}
\DoxyCodeLine{160 \}}
\DoxyCodeLine{161 }
\DoxyCodeLine{162 \textcolor{keywordtype}{void} \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6877c5cfaa6c2fe0de94a2f3452b8274}{PointHeadController::update}}(\textcolor{keyword}{const} ros::Time\& now, \textcolor{keyword}{const} ros::Duration\& dt)}
\DoxyCodeLine{163 \{}

\end{DoxyCode}


Referenced by tuck\+\_\+arm.\+Move\+It\+Thread\+::\+\_\+\+\_\+init\+\_\+\+\_\+().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classrobot__controllers_1_1PointHeadController_a1067c29d13d431c980f3d2bd7c327005_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a7bf48208e3295227e67272fad2fb22ac}\label{classrobot__controllers_1_1PointHeadController_a7bf48208e3295227e67272fad2fb22ac}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!stop@{stop}}
\index{stop@{stop}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::stop (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classbool}{bool}}}]{force }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Attempt to stop the controller. This should be called only by the \mbox{\hyperlink{classrobot__controllers_1_1ControllerManager}{Controller\+Manager}} instance. 


\begin{DoxyParams}{Parameters}
{\em force} & Should we force the controller to stop? Some controllers may wish to continue running until they absolutely have to stop. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if successfully stopped, false otherwise. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classrobot__controllers_1_1Controller_a64d4f0032496c26c0fa788a91bc0b466}{robot\+\_\+controllers\+::\+Controller}}.



Definition at line 165 of file point\+\_\+head.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{169   \{}
\DoxyCodeLine{170     boost::mutex::scoped\_lock lock(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_ac1e1b53de60a4eb395cd4daf9f362889}{sampler\_mutex\_}});}
\DoxyCodeLine{171 }
\DoxyCodeLine{172     \textcolor{comment}{// Interpolate trajectory}}
\DoxyCodeLine{173     TrajectoryPoint p = \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_aa39cd476d484935149eb571b489e9168}{sampler\_}}-\/>sample(now.toSec());}
\DoxyCodeLine{174     \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a07c899d0f1d341ec99e9d894b8b9a067}{last\_sample\_}} = p;}
\DoxyCodeLine{175 }
\DoxyCodeLine{176     \textcolor{comment}{// Are we done?}}
\DoxyCodeLine{177     \textcolor{keywordflow}{if} (now.toSec() > \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_aa39cd476d484935149eb571b489e9168}{sampler\_}}-\/>end\_time())}
\DoxyCodeLine{178       \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>setSucceeded(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6d923ab77d2f0de00abf8a50d27908d5}{result\_}}, \textcolor{stringliteral}{"OK"});}
\DoxyCodeLine{179 }
\DoxyCodeLine{180     \textcolor{comment}{// Send trajectory to joints}}
\DoxyCodeLine{181     \textcolor{keywordflow}{if} (p.q.size() == 2)}
\DoxyCodeLine{182     \{}
\DoxyCodeLine{183       \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}{head\_pan\_}}-\/>setPosition(p.q[0], p.qd[0], 0.0);}
\DoxyCodeLine{184       \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a8383b4844b8b6cbbe8088be0b8683b70}{head\_tilt\_}}-\/>setPosition(p.q[1], p.qd[1], 0.0);}
\DoxyCodeLine{185     \}}
\DoxyCodeLine{186   \}}
\DoxyCodeLine{187   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a07c899d0f1d341ec99e9d894b8b9a067}{last\_sample\_}}.\mbox{\hyperlink{structrobot__controllers_1_1TrajectoryPoint_a7e8b273f85bd89e40b1195811c52d5d6}{q}}.size() == 2)}

\end{DoxyCode}


References head\+\_\+pan\+\_\+, head\+\_\+tilt\+\_\+, last\+\_\+sample\+\_\+, robot\+\_\+controllers\+::\+Trajectory\+Point\+::q, robot\+\_\+controllers\+::\+Trajectory\+Point\+::qd, result\+\_\+, sampler\+\_\+, sampler\+\_\+mutex\+\_\+, and server\+\_\+.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a6877c5cfaa6c2fe0de94a2f3452b8274}\label{classrobot__controllers_1_1PointHeadController_a6877c5cfaa6c2fe0de94a2f3452b8274}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!update@{update}}
\index{update@{update}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::update (\begin{DoxyParamCaption}\item[{const ros\+::\+Time \&}]{now,  }\item[{const ros\+::\+Duration \&}]{dt }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



This is the update loop for the controller. 


\begin{DoxyParams}{Parameters}
{\em time} & The system time. \\
\hline
{\em dt} & The timestep since last call to update. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classrobot__controllers_1_1Controller_ab079e1d49a8afc4872049680dd950858}{robot\+\_\+controllers\+::\+Controller}}.



Definition at line 195 of file point\+\_\+head.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{196 \{}
\DoxyCodeLine{197   \textcolor{keywordtype}{float} head\_pan\_goal\_ = 0.0;}
\DoxyCodeLine{198   \textcolor{keywordtype}{float} head\_tilt\_goal\_ = 0.0;}
\DoxyCodeLine{199   \textcolor{keywordflow}{try}}
\DoxyCodeLine{200   \{}
\DoxyCodeLine{201     geometry\_msgs::PointStamped target\_in\_pan, target\_in\_tilt;}
\DoxyCodeLine{202     \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6076272da0482a95c2f909e037d7a67b}{listener\_}}.transformPoint(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_afc3ae8e946ac0966da81f2ed714642c2}{root\_link\_}}, ros::Time(0), \mbox{\hyperlink{namespaceget__controller__state_a945e8678050edb331915cd734a90511e}{goal}}-\/>target, \mbox{\hyperlink{namespaceget__controller__state_a945e8678050edb331915cd734a90511e}{goal}}-\/>target.header.frame\_id, target\_in\_pan);}
\DoxyCodeLine{203     \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6076272da0482a95c2f909e037d7a67b}{listener\_}}.transformPoint(\textcolor{stringliteral}{"head\_pan\_link"}, ros::Time(0), \mbox{\hyperlink{namespaceget__controller__state_a945e8678050edb331915cd734a90511e}{goal}}-\/>target, \mbox{\hyperlink{namespaceget__controller__state_a945e8678050edb331915cd734a90511e}{goal}}-\/>target.header.frame\_id, target\_in\_tilt);}
\DoxyCodeLine{204     head\_pan\_goal\_ = atan2(target\_in\_pan.point.y, target\_in\_pan.point.x);}
\DoxyCodeLine{205     head\_tilt\_goal\_ = -\/atan2(target\_in\_tilt.point.z, sqrt(pow(target\_in\_tilt.point.x, 2) + pow(target\_in\_tilt.point.y, 2)));}
\DoxyCodeLine{206   \}}
\DoxyCodeLine{207   \textcolor{keywordflow}{catch}(\textcolor{keyword}{const} tf::TransformException \&ex)}
\DoxyCodeLine{208   \{}
\DoxyCodeLine{209     \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}{server\_}}-\/>setAborted(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a6d923ab77d2f0de00abf8a50d27908d5}{result\_}}, \textcolor{stringliteral}{"Could not transform goal."});}
\DoxyCodeLine{210     ROS\_WARN\_NAMED(\textcolor{stringliteral}{"PointHeadController"}, \textcolor{stringliteral}{"Could not transform goal."});}
\DoxyCodeLine{211     \textcolor{keywordflow}{return};}
\DoxyCodeLine{212   \}}
\DoxyCodeLine{213 }
\DoxyCodeLine{214   \textcolor{comment}{// Turn goal into a trajectory}}
\DoxyCodeLine{215   Trajectory \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}};}
\DoxyCodeLine{216   \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points.resize(2);}
\DoxyCodeLine{217   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a3a4f782803e261e301d93af0420607fa}{preempted\_}})}
\DoxyCodeLine{218   \{}
\DoxyCodeLine{219     \textcolor{comment}{// Starting point is last sample}}
\DoxyCodeLine{220     \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[0] = \mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a07c899d0f1d341ec99e9d894b8b9a067}{last\_sample\_}};}
\DoxyCodeLine{221   \}}
\DoxyCodeLine{222   \textcolor{keywordflow}{else}}
\DoxyCodeLine{223   \{}
\DoxyCodeLine{224     \textcolor{comment}{// Starting point is current position, assume not moving}}
\DoxyCodeLine{225     \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[0].q.push\_back(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}{head\_pan\_}}-\/>getPosition());}
\DoxyCodeLine{226     \mbox{\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}}.points[0].q.push\_back(\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_a8383b4844b8b6cbbe8088be0b8683b70}{head\_tilt\_}}-\/>getPosition());}

\end{DoxyCode}


References get\+\_\+controller\+\_\+state\+::goal, head\+\_\+pan\+\_\+, head\+\_\+tilt\+\_\+, last\+\_\+sample\+\_\+, listener\+\_\+, preempted\+\_\+, result\+\_\+, root\+\_\+link\+\_\+, server\+\_\+, and battery\+\_\+monitor\+\_\+node\+::t.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}\label{classrobot__controllers_1_1PointHeadController_a089d29c9ee91d94312e57be3524c571e}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!head\_pan\_@{head\_pan\_}}
\index{head\_pan\_@{head\_pan\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{head\_pan\_}{head\_pan\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacerobot__controllers_a9c7cc37a8e0d295ea24c75cbb656ecfa}{Joint\+Handle\+Ptr}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::head\+\_\+pan\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 209 of file point\+\_\+head.\+h.



Referenced by stop(), and update().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a8383b4844b8b6cbbe8088be0b8683b70}\label{classrobot__controllers_1_1PointHeadController_a8383b4844b8b6cbbe8088be0b8683b70}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!head\_tilt\_@{head\_tilt\_}}
\index{head\_tilt\_@{head\_tilt\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{head\_tilt\_}{head\_tilt\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacerobot__controllers_a9c7cc37a8e0d295ea24c75cbb656ecfa}{Joint\+Handle\+Ptr}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::head\+\_\+tilt\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 210 of file point\+\_\+head.\+h.



Referenced by stop(), and update().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_af63567afd084b55f1dc7d193451308f0}\label{classrobot__controllers_1_1PointHeadController_af63567afd084b55f1dc7d193451308f0}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!initialized\_@{initialized\_}}
\index{initialized\_@{initialized\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{initialized\_}{initialized\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::initialized\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 189 of file point\+\_\+head.\+h.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a75ec44f0176b59bd62737e70be7dab19}\label{classrobot__controllers_1_1PointHeadController_a75ec44f0176b59bd62737e70be7dab19}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!kdl\_tree\_@{kdl\_tree\_}}
\index{kdl\_tree\_@{kdl\_tree\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{kdl\_tree\_}{kdl\_tree\_}}
{\footnotesize\ttfamily K\+D\+L\+::\+Tree robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::kdl\+\_\+tree\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 213 of file point\+\_\+head.\+h.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a07c899d0f1d341ec99e9d894b8b9a067}\label{classrobot__controllers_1_1PointHeadController_a07c899d0f1d341ec99e9d894b8b9a067}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!last\_sample\_@{last\_sample\_}}
\index{last\_sample\_@{last\_sample\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{last\_sample\_}{last\_sample\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{structrobot__controllers_1_1TrajectoryPoint}{Trajectory\+Point}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::last\+\_\+sample\+\_\+\hspace{0.3cm}{\ttfamily [private]}}

should we stop this controller when the action has terminated (or hold position)? 

Definition at line 205 of file point\+\_\+head.\+h.



Referenced by stop(), and update().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a6076272da0482a95c2f909e037d7a67b}\label{classrobot__controllers_1_1PointHeadController_a6076272da0482a95c2f909e037d7a67b}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!listener\_@{listener\_}}
\index{listener\_@{listener\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{listener\_}{listener\_}}
{\footnotesize\ttfamily tf\+::\+Transform\+Listener robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::listener\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 214 of file point\+\_\+head.\+h.



Referenced by update().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a28f2894024523897546a403b77f36dee}\label{classrobot__controllers_1_1PointHeadController_a28f2894024523897546a403b77f36dee}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!manager\_@{manager\_}}
\index{manager\_@{manager\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{manager\_}{manager\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classrobot__controllers_1_1ControllerManager}{Controller\+Manager}}$\ast$ robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::manager\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 190 of file point\+\_\+head.\+h.

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a3a4f782803e261e301d93af0420607fa}\label{classrobot__controllers_1_1PointHeadController_a3a4f782803e261e301d93af0420607fa}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!preempted\_@{preempted\_}}
\index{preempted\_@{preempted\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{preempted\_}{preempted\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::preempted\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 206 of file point\+\_\+head.\+h.



Referenced by update().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a6d923ab77d2f0de00abf8a50d27908d5}\label{classrobot__controllers_1_1PointHeadController_a6d923ab77d2f0de00abf8a50d27908d5}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!result\_@{result\_}}
\index{result\_@{result\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{result\_}{result\_}}
{\footnotesize\ttfamily control\+\_\+msgs\+::\+Point\+Head\+Result robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::result\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 192 of file point\+\_\+head.\+h.



Referenced by stop(), and update().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_afc3ae8e946ac0966da81f2ed714642c2}\label{classrobot__controllers_1_1PointHeadController_afc3ae8e946ac0966da81f2ed714642c2}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!root\_link\_@{root\_link\_}}
\index{root\_link\_@{root\_link\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{root\_link\_}{root\_link\_}}
{\footnotesize\ttfamily std\+::string robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::root\+\_\+link\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



action was preempted (has nothing to do with preempt() above 



Definition at line 208 of file point\+\_\+head.\+h.



Referenced by update().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_aa39cd476d484935149eb571b489e9168}\label{classrobot__controllers_1_1PointHeadController_aa39cd476d484935149eb571b489e9168}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!sampler\_@{sampler\_}}
\index{sampler\_@{sampler\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{sampler\_}{sampler\_}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classrobot__controllers_1_1TrajectorySampler}{Trajectory\+Sampler}}$>$ robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::sampler\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 193 of file point\+\_\+head.\+h.



Referenced by stop().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_ac1e1b53de60a4eb395cd4daf9f362889}\label{classrobot__controllers_1_1PointHeadController_ac1e1b53de60a4eb395cd4daf9f362889}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!sampler\_mutex\_@{sampler\_mutex\_}}
\index{sampler\_mutex\_@{sampler\_mutex\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{sampler\_mutex\_}{sampler\_mutex\_}}
{\footnotesize\ttfamily boost\+::mutex robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::sampler\+\_\+mutex\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 194 of file point\+\_\+head.\+h.



Referenced by stop().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}\label{classrobot__controllers_1_1PointHeadController_a4ebe2fbdbb6669def202fb0d775fb847}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!server\_@{server\_}}
\index{server\_@{server\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{server\_}{server\_}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classrobot__controllers_1_1PointHeadController_af50fd17677c46715345486dd123fd606}{head\+\_\+server\+\_\+t}}$>$ robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::server\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 211 of file point\+\_\+head.\+h.



Referenced by stop(), and update().

\mbox{\Hypertarget{classrobot__controllers_1_1PointHeadController_af19a1dece31096793cbb4176a07e626f}\label{classrobot__controllers_1_1PointHeadController_af19a1dece31096793cbb4176a07e626f}} 
\index{robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}!stop\_with\_action\_@{stop\_with\_action\_}}
\index{stop\_with\_action\_@{stop\_with\_action\_}!robot\_controllers::PointHeadController@{robot\_controllers::PointHeadController}}
\doxysubsubsection{\texorpdfstring{stop\_with\_action\_}{stop\_with\_action\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} robot\+\_\+controllers\+::\+Point\+Head\+Controller\+::stop\+\_\+with\+\_\+action\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 196 of file point\+\_\+head.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
submodules/robot\+\_\+controllers/robot\+\_\+controllers/include/robot\+\_\+controllers/\mbox{\hyperlink{point__head_8h}{point\+\_\+head.\+h}}\item 
submodules/robot\+\_\+controllers/robot\+\_\+controllers/src/\mbox{\hyperlink{point__head_8cpp}{point\+\_\+head.\+cpp}}\end{DoxyCompactItemize}
