\hypertarget{classmecanum__drive__controller_1_1MecanumDriveController}{}\doxysection{mecanum\+\_\+drive\+\_\+controller\+::Mecanum\+Drive\+Controller Class Reference}
\label{classmecanum__drive__controller_1_1MecanumDriveController}\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}


{\ttfamily \#include $<$mecanum\+\_\+drive\+\_\+controller.\+h$>$}



Inheritance diagram for mecanum\+\_\+drive\+\_\+controller\+::Mecanum\+Drive\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classmecanum__drive__controller_1_1MecanumDriveController__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for mecanum\+\_\+drive\+\_\+controller\+::Mecanum\+Drive\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands}{Commands}}
\begin{DoxyCompactList}\small\item\em Velocity command related\+: \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a6728b8025264dffbb900d00f62a8a642}{Mecanum\+Drive\+Controller}} ()
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aad81c2f7b52ec97e08d4b102bb577709}{init}} (hardware\+\_\+interface\+::\+Velocity\+Joint\+Interface $\ast$hw, ros\+::\+Node\+Handle \&root\+\_\+nh, ros\+::\+Node\+Handle \&controller\+\_\+nh)
\begin{DoxyCompactList}\small\item\em Initialize controller. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a458c6c52b997c8b91d44f16e7bc31221}{update}} (const ros\+::\+Time \&time, const ros\+::\+Duration \&period)
\begin{DoxyCompactList}\small\item\em Updates controller, i.\+e. computes the odometry and sets the new velocity commands. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0f226fc034ee64d5cc8bc1a0d8237fc6}{starting}} (const ros\+::\+Time \&time)
\begin{DoxyCompactList}\small\item\em Starts controller. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_abf933c790a867ee8cc794ac85386d59c}{stopping}} (const ros\+::\+Time \&time)
\begin{DoxyCompactList}\small\item\em Stops controller. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a82d58a19b2dd36850aafcb24a2ed728a}{brake}} ()
\begin{DoxyCompactList}\small\item\em Brakes the wheels, i.\+e. sets the velocity to 0. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0ca7d7b31da974681ebeaee2cb67e6ce}{cmd\+Vel\+Callback}} (const geometry\+\_\+msgs\+::\+Twist \&command)
\begin{DoxyCompactList}\small\item\em Velocity command callback. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a257323c9b4ead5742d880a5cafc01042}{set\+Wheel\+Params\+From\+Urdf}} (ros\+::\+Node\+Handle \&root\+\_\+nh, ros\+::\+Node\+Handle \&controller\+\_\+nh, const std\+::string \&wheel0\+\_\+name, const std\+::string \&wheel1\+\_\+name, const std\+::string \&wheel2\+\_\+name, const std\+::string \&wheel3\+\_\+name)
\begin{DoxyCompactList}\small\item\em Sets odometry parameters from the U\+R\+DF, i.\+e. the wheel radius and separation. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8}{get\+Wheel\+Radius}} (const urdf\+::\+Model\+Interface\+Shared\+Ptr model, const urdf\+::\+Link\+Const\+Shared\+Ptr \&wheel\+\_\+link, double \&wheel\+\_\+radius)
\begin{DoxyCompactList}\small\item\em Get the radius of a given wheel. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ada24ca16c8bf4293c3de52d3e63b1e56}{setup\+Rt\+Publishers\+Msg}} (ros\+::\+Node\+Handle \&root\+\_\+nh, ros\+::\+Node\+Handle \&controller\+\_\+nh)
\begin{DoxyCompactList}\small\item\em Sets the odometry publishing fields. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::string \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\+\_\+}}
\item 
ros\+::\+Duration \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4668b52e51c7e3966ae367ce8a6b4327}{publish\+\_\+period\+\_\+}}
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry}{Odometry}} related\+: \end{DoxyCompactList}\item 
ros\+::\+Time \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2cf720fa110296eba5dfff94d8a82193}{last\+\_\+state\+\_\+publish\+\_\+time\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aa1e47a9705bb716938d76b3141682309}{open\+\_\+loop\+\_\+}}
\item 
hardware\+\_\+interface\+::\+Joint\+Handle \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aca6e3b54f2b2eedceb9dda0de5023e56}{wheel0\+\_\+joint\+Handle\+\_\+}}
\begin{DoxyCompactList}\small\item\em Hardware handles\+: \end{DoxyCompactList}\item 
hardware\+\_\+interface\+::\+Joint\+Handle \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a13b7670baf9fac06971bb43287f371b7}{wheel1\+\_\+joint\+Handle\+\_\+}}
\item 
hardware\+\_\+interface\+::\+Joint\+Handle \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a79edb2d766cf0dcb9cfc2df9ab0a48a6}{wheel2\+\_\+joint\+Handle\+\_\+}}
\item 
hardware\+\_\+interface\+::\+Joint\+Handle \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2d85b2614cc903b0774c8a9bbc1dfdad}{wheel3\+\_\+joint\+Handle\+\_\+}}
\item 
realtime\+\_\+tools\+::\+Realtime\+Buffer$<$ \mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands}{Commands}} $>$ \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a311afd56ce59be8faa3e6c0e5d57ccd8}{command\+\_\+}}
\item 
\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands}{Commands}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\+\_\+struct\+\_\+}}
\item 
ros\+::\+Subscriber \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ab611510b85871164d436d14af575ebd2}{sub\+\_\+command\+\_\+}}
\item 
boost\+::shared\+\_\+ptr$<$ realtime\+\_\+tools\+::\+Realtime\+Publisher$<$ nav\+\_\+msgs\+::\+Odometry $>$ $>$ \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\+\_\+pub\+\_\+}}
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry}{Odometry}} related\+: \end{DoxyCompactList}\item 
boost\+::shared\+\_\+ptr$<$ realtime\+\_\+tools\+::\+Realtime\+Publisher$<$ tf\+::tf\+Message $>$ $>$ \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\+\_\+odom\+\_\+pub\+\_\+}}
\item 
\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry}{Odometry}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\+\_\+}}
\item 
geometry\+\_\+msgs\+::\+Transform\+Stamped \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad78b85246ebd4cdb2469c82c6ff8013d}{odom\+\_\+frame\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a94baa6ec5c923e0e0eb9505542ec7f5f}{use\+\_\+realigned\+\_\+roller\+\_\+joints\+\_\+}}
\begin{DoxyCompactList}\small\item\em Wheel radius (assuming it\textquotesingle{}s the same for the left and right wheels)\+: \end{DoxyCompactList}\item 
double \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\+\_\+k\+\_\+}}
\item 
double \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\+\_\+radius\+\_\+}}
\item 
double \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_adbae31c3466c0fa7d94b64b36bfcdcb9}{wheel\+\_\+separation\+\_\+x\+\_\+}}
\item 
double \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_af3664f57b188157c7f4e87d426d8d801}{wheel\+\_\+separation\+\_\+y\+\_\+}}
\item 
double \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0ca155c7c2e1efed5c67fba61392698d}{cmd\+\_\+vel\+\_\+timeout\+\_\+}}
\begin{DoxyCompactList}\small\item\em Timeout to consider cmd\+\_\+vel commands old\+: \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}{base\+\_\+frame\+\_\+id\+\_\+}}
\begin{DoxyCompactList}\small\item\em Frame to use for the robot base\+: \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}{odom\+\_\+frame\+\_\+id\+\_\+}}
\item 
\mbox{\hyperlink{classbool}{bool}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad598a183ca7029d959b230b7d2722e96}{enable\+\_\+odom\+\_\+tf\+\_\+}}
\begin{DoxyCompactList}\small\item\em Whether to publish odometry to tf or not\+: \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ae411c4804246e9583c03926f0f4471cb}{wheel\+\_\+joints\+\_\+size\+\_\+}}
\begin{DoxyCompactList}\small\item\em Number of wheel joints\+: \end{DoxyCompactList}\item 
\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands}{Commands}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}{last\+\_\+cmd\+\_\+}}
\item 
\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter}{Speed\+Limiter}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\+\_\+lin\+X\+\_\+}}
\item 
\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter}{Speed\+Limiter}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\+\_\+lin\+Y\+\_\+}}
\item 
\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter}{Speed\+Limiter}} \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\+\_\+ang\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class makes some assumptions on the model of the robot\+:
\begin{DoxyItemize}
\item the rotation axes of wheels are collinear
\item the wheels are identical in radius Additional assumptions to not duplicate information readily available in the U\+R\+DF\+:
\item the wheels have the same parent frame
\item a wheel collision geometry is a cylinder in the urdf
\item a wheel joint frame center\textquotesingle{}s vertical projection on the floor must lie within the contact patch 
\end{DoxyItemize}

Definition at line 96 of file mecanum\+\_\+drive\+\_\+controller.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a6728b8025264dffbb900d00f62a8a642}\label{classmecanum__drive__controller_1_1MecanumDriveController_a6728b8025264dffbb900d00f62a8a642}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!MecanumDriveController@{MecanumDriveController}}
\index{MecanumDriveController@{MecanumDriveController}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{MecanumDriveController()}{MecanumDriveController()}}
{\footnotesize\ttfamily mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Mecanum\+Drive\+Controller (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 81 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{82   : \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aa1e47a9705bb716938d76b3141682309}{open\_loop\_}}(\textcolor{keyword}{false})}
\DoxyCodeLine{83   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}()}
\DoxyCodeLine{84   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a94baa6ec5c923e0e0eb9505542ec7f5f}{use\_realigned\_roller\_joints\_}}(\textcolor{keyword}{false})}
\DoxyCodeLine{85   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\_k\_}}(0.0)}
\DoxyCodeLine{86   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}}(0.0)}
\DoxyCodeLine{87   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0ca155c7c2e1efed5c67fba61392698d}{cmd\_vel\_timeout\_}}(0.5)}
\DoxyCodeLine{88   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}{base\_frame\_id\_}}(\textcolor{stringliteral}{"base\_link"})}
\DoxyCodeLine{89   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}{odom\_frame\_id\_}}(\textcolor{stringliteral}{"odom"})}
\DoxyCodeLine{90   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad598a183ca7029d959b230b7d2722e96}{enable\_odom\_tf\_}}(\textcolor{keyword}{true})}
\DoxyCodeLine{91   , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ae411c4804246e9583c03926f0f4471cb}{wheel\_joints\_size\_}}(0)}
\DoxyCodeLine{92 \{}
\DoxyCodeLine{93 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a82d58a19b2dd36850aafcb24a2ed728a}\label{classmecanum__drive__controller_1_1MecanumDriveController_a82d58a19b2dd36850aafcb24a2ed728a}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!brake@{brake}}
\index{brake@{brake}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{brake()}{brake()}}
{\footnotesize\ttfamily void mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::brake (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Brakes the wheels, i.\+e. sets the velocity to 0. 



Definition at line 296 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{297 \{}
\DoxyCodeLine{298   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aca6e3b54f2b2eedceb9dda0de5023e56}{wheel0\_jointHandle\_}}.setCommand(0.0);}
\DoxyCodeLine{299   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a13b7670baf9fac06971bb43287f371b7}{wheel1\_jointHandle\_}}.setCommand(0.0);}
\DoxyCodeLine{300   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a79edb2d766cf0dcb9cfc2df9ab0a48a6}{wheel2\_jointHandle\_}}.setCommand(0.0);}
\DoxyCodeLine{301   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2d85b2614cc903b0774c8a9bbc1dfdad}{wheel3\_jointHandle\_}}.setCommand(0.0);}
\DoxyCodeLine{302 \}}

\end{DoxyCode}


References wheel0\+\_\+joint\+Handle\+\_\+, wheel1\+\_\+joint\+Handle\+\_\+, wheel2\+\_\+joint\+Handle\+\_\+, and wheel3\+\_\+joint\+Handle\+\_\+.



Referenced by starting(), and stopping().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_a82d58a19b2dd36850aafcb24a2ed728a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a0ca7d7b31da974681ebeaee2cb67e6ce}\label{classmecanum__drive__controller_1_1MecanumDriveController_a0ca7d7b31da974681ebeaee2cb67e6ce}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!cmdVelCallback@{cmdVelCallback}}
\index{cmdVelCallback@{cmdVelCallback}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{cmdVelCallback()}{cmdVelCallback()}}
{\footnotesize\ttfamily void mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::cmd\+Vel\+Callback (\begin{DoxyParamCaption}\item[{const geometry\+\_\+msgs\+::\+Twist \&}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Velocity command callback. 


\begin{DoxyParams}{Parameters}
{\em command} & Velocity command message (twist) \\
\hline
\end{DoxyParams}


Definition at line 305 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{306 \{}
\DoxyCodeLine{307   \textcolor{keywordflow}{if}(isRunning())}
\DoxyCodeLine{308   \{}
\DoxyCodeLine{309     \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_a5f4d51b69f1df3f562939fea746948ce}{ang}}   = command.angular.z;}
\DoxyCodeLine{310     \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_af268f9ef6dbde8d71b00cc93f5f21791}{linX}}  = command.linear.x;}
\DoxyCodeLine{311     \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_ae71fb4a62afabf941d316663ba01c4bf}{linY}}  = command.linear.y;}
\DoxyCodeLine{312     \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_af2c8eb67c10dda33e03ae13717dc2299}{stamp}} = ros::Time::now();}
\DoxyCodeLine{313     \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a311afd56ce59be8faa3e6c0e5d57ccd8}{command\_}}.writeFromNonRT (\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}});}
\DoxyCodeLine{314     ROS\_DEBUG\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}},}
\DoxyCodeLine{315                            \textcolor{stringliteral}{"Added values to command. "}}
\DoxyCodeLine{316                            << \textcolor{stringliteral}{"Ang: "}   << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_a5f4d51b69f1df3f562939fea746948ce}{ang}} << \textcolor{stringliteral}{", "}}
\DoxyCodeLine{317                            << \textcolor{stringliteral}{"Lin: "}   << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_af268f9ef6dbde8d71b00cc93f5f21791}{linX}} << \textcolor{stringliteral}{", "}}
\DoxyCodeLine{318                            << \textcolor{stringliteral}{"Lin: "}   << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_ae71fb4a62afabf941d316663ba01c4bf}{linY}} << \textcolor{stringliteral}{", "}}
\DoxyCodeLine{319                            << \textcolor{stringliteral}{"Stamp: "} << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}{command\_struct\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_af2c8eb67c10dda33e03ae13717dc2299}{stamp}});}
\DoxyCodeLine{320   \}}
\DoxyCodeLine{321   \textcolor{keywordflow}{else}}
\DoxyCodeLine{322   \{}
\DoxyCodeLine{323     ROS\_ERROR\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Can't accept new commands. Controller is not running."});}
\DoxyCodeLine{324   \}}
\DoxyCodeLine{325 \}}

\end{DoxyCode}


References mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Commands\+::ang, command\+\_\+, command\+\_\+struct\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Commands\+::linX, mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Commands\+::linY, name\+\_\+, and mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Commands\+::stamp.



Referenced by init().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_a0ca7d7b31da974681ebeaee2cb67e6ce_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8}\label{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!getWheelRadius@{getWheelRadius}}
\index{getWheelRadius@{getWheelRadius}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{getWheelRadius()}{getWheelRadius()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::get\+Wheel\+Radius (\begin{DoxyParamCaption}\item[{const urdf\+::\+Model\+Interface\+Shared\+Ptr}]{model,  }\item[{const urdf\+::\+Link\+Const\+Shared\+Ptr \&}]{wheel\+\_\+link,  }\item[{double \&}]{wheel\+\_\+radius }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Get the radius of a given wheel. 


\begin{DoxyParams}[1]{Parameters}
 & {\em model} & urdf model used \\
\hline
 & {\em wheel\+\_\+link} & link of the wheel from which to get the radius \\
\hline
\mbox{\texttt{ out}}  & {\em wheels\+\_\+radius} & radius of the wheel read from the urdf \\
\hline
\end{DoxyParams}


Definition at line 468 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{470 \{}
\DoxyCodeLine{471   urdf::LinkConstSharedPtr radius\_link = wheel\_link;}
\DoxyCodeLine{472 }
\DoxyCodeLine{473   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a94baa6ec5c923e0e0eb9505542ec7f5f}{use\_realigned\_roller\_joints\_}})}
\DoxyCodeLine{474   \{}
\DoxyCodeLine{475       \textcolor{comment}{// This mode is used when the mecanum wheels are simulated and we use realigned rollers to mimic mecanum wheels.}}
\DoxyCodeLine{476       \textcolor{keyword}{const} urdf::JointConstSharedPtr\& roller\_joint = radius\_link-\/>child\_joints[0];}
\DoxyCodeLine{477       \textcolor{keywordflow}{if}(!roller\_joint)}
\DoxyCodeLine{478       \{}
\DoxyCodeLine{479         ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"No roller joint could be retrieved for wheel : "} << wheel\_link-\/>name <<}
\DoxyCodeLine{480           \textcolor{stringliteral}{". Are you sure mecanum wheels are simulated using realigned rollers?"});}
\DoxyCodeLine{481         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{482       \}}
\DoxyCodeLine{483 }
\DoxyCodeLine{484       radius\_link = model-\/>getLink(roller\_joint-\/>child\_link\_name);}
\DoxyCodeLine{485       \textcolor{keywordflow}{if}(!radius\_link)}
\DoxyCodeLine{486       \{}
\DoxyCodeLine{487         ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"No roller link could be retrieved for wheel : "} << wheel\_link-\/>name <<}
\DoxyCodeLine{488           \textcolor{stringliteral}{". Are you sure mecanum wheels are simulated using realigned rollers?"});}
\DoxyCodeLine{489         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{490       \}}
\DoxyCodeLine{491   \}}
\DoxyCodeLine{492 }
\DoxyCodeLine{493   \textcolor{keywordflow}{if}(!\mbox{\hyperlink{mecanum__drive__controller_8cpp_a93c4844264f80022e93e236f6cb59e93}{isCylinderOrSphere}}(radius\_link))}
\DoxyCodeLine{494   \{}
\DoxyCodeLine{495     ROS\_ERROR\_STREAM(\textcolor{stringliteral}{"Wheel link "} << radius\_link-\/>name << \textcolor{stringliteral}{" is NOT modeled as a cylinder!"});}
\DoxyCodeLine{496     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{497   \}}
\DoxyCodeLine{498 }
\DoxyCodeLine{499   \textcolor{keywordflow}{if} (radius\_link-\/>collision-\/>geometry-\/>type == urdf::Geometry::CYLINDER)}
\DoxyCodeLine{500     wheel\_radius = (\textcolor{keyword}{static\_cast<}urdf::Cylinder*\textcolor{keyword}{>}(radius\_link-\/>collision-\/>geometry.get()))-\/>radius;}
\DoxyCodeLine{501   \textcolor{keywordflow}{else}}
\DoxyCodeLine{502     wheel\_radius = (\textcolor{keyword}{static\_cast<}urdf::Sphere*\textcolor{keyword}{>}(radius\_link-\/>collision-\/>geometry.get()))-\/>radius;}
\DoxyCodeLine{503 }
\DoxyCodeLine{504   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{505 \}}

\end{DoxyCode}


References is\+Cylinder\+Or\+Sphere(), name\+\_\+, and use\+\_\+realigned\+\_\+roller\+\_\+joints\+\_\+.



Referenced by set\+Wheel\+Params\+From\+Urdf().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_aad81c2f7b52ec97e08d4b102bb577709}\label{classmecanum__drive__controller_1_1MecanumDriveController_aad81c2f7b52ec97e08d4b102bb577709}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!init@{init}}
\index{init@{init}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::init (\begin{DoxyParamCaption}\item[{hardware\+\_\+interface\+::\+Velocity\+Joint\+Interface $\ast$}]{hw,  }\item[{ros\+::\+Node\+Handle \&}]{root\+\_\+nh,  }\item[{ros\+::\+Node\+Handle \&}]{controller\+\_\+nh }\end{DoxyParamCaption})}



Initialize controller. 


\begin{DoxyParams}{Parameters}
{\em hw} & Velocity joint interface for the wheels \\
\hline
{\em root\+\_\+nh} & Node handle at root namespace \\
\hline
{\em controller\+\_\+nh} & Node handle inside the controller namespace \\
\hline
\end{DoxyParams}


Definition at line 97 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{100 \{}
\DoxyCodeLine{101   \textcolor{keyword}{const} std::string complete\_ns = controller\_nh.getNamespace();}
\DoxyCodeLine{102   std::size\_t \textcolor{keywordtype}{id} = complete\_ns.find\_last\_of(\textcolor{stringliteral}{"/"});}
\DoxyCodeLine{103   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}} = complete\_ns.substr(\textcolor{keywordtype}{id} + 1);}
\DoxyCodeLine{104 }
\DoxyCodeLine{105   \textcolor{comment}{// Option use\_realigned\_roller\_joints}}
\DoxyCodeLine{106   controller\_nh.param(\textcolor{stringliteral}{"use\_realigned\_roller\_joints"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a94baa6ec5c923e0e0eb9505542ec7f5f}{use\_realigned\_roller\_joints\_}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a94baa6ec5c923e0e0eb9505542ec7f5f}{use\_realigned\_roller\_joints\_}});}
\DoxyCodeLine{107   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Use the roller's radius rather than the wheel's: "} << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a94baa6ec5c923e0e0eb9505542ec7f5f}{use\_realigned\_roller\_joints\_}} << \textcolor{stringliteral}{"."});}
\DoxyCodeLine{108 }
\DoxyCodeLine{109   \textcolor{comment}{// Get joint names from the parameter server}}
\DoxyCodeLine{110   std::string wheel0\_name;}
\DoxyCodeLine{111   controller\_nh.param(\textcolor{stringliteral}{"front\_left\_wheel\_joint"}, wheel0\_name, wheel0\_name);}
\DoxyCodeLine{112   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Front left wheel joint (wheel0) is : "} << wheel0\_name);}
\DoxyCodeLine{113 }
\DoxyCodeLine{114   std::string wheel1\_name;}
\DoxyCodeLine{115   controller\_nh.param(\textcolor{stringliteral}{"back\_left\_wheel\_joint"}, wheel1\_name, wheel1\_name);}
\DoxyCodeLine{116   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Back left wheel joint (wheel1) is : "} << wheel1\_name);}
\DoxyCodeLine{117 }
\DoxyCodeLine{118   std::string wheel2\_name;}
\DoxyCodeLine{119   controller\_nh.param(\textcolor{stringliteral}{"back\_right\_wheel\_joint"}, wheel2\_name, wheel2\_name);}
\DoxyCodeLine{120   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Back right wheel joint (wheel2) is : "} << wheel2\_name);}
\DoxyCodeLine{121 }
\DoxyCodeLine{122   std::string wheel3\_name;}
\DoxyCodeLine{123   controller\_nh.param(\textcolor{stringliteral}{"front\_right\_wheel\_joint"}, wheel3\_name, wheel3\_name);}
\DoxyCodeLine{124   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Front right wheel joint (wheel3) is : "} << wheel3\_name);}
\DoxyCodeLine{125 }
\DoxyCodeLine{126   \textcolor{comment}{// Odometry related:}}
\DoxyCodeLine{127   \textcolor{keywordtype}{double} publish\_rate;}
\DoxyCodeLine{128   controller\_nh.param(\textcolor{stringliteral}{"publish\_rate"}, publish\_rate, 50.0);}
\DoxyCodeLine{129   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Controller state will be published at "}}
\DoxyCodeLine{130                         << publish\_rate << \textcolor{stringliteral}{"Hz."});}
\DoxyCodeLine{131   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4668b52e51c7e3966ae367ce8a6b4327}{publish\_period\_}} = ros::Duration(1.0 / publish\_rate);}
\DoxyCodeLine{132 }
\DoxyCodeLine{133   controller\_nh.param(\textcolor{stringliteral}{"open\_loop"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aa1e47a9705bb716938d76b3141682309}{open\_loop\_}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aa1e47a9705bb716938d76b3141682309}{open\_loop\_}});}
\DoxyCodeLine{134 }
\DoxyCodeLine{135   \textcolor{comment}{// Twist command related:}}
\DoxyCodeLine{136   controller\_nh.param(\textcolor{stringliteral}{"cmd\_vel\_timeout"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0ca155c7c2e1efed5c67fba61392698d}{cmd\_vel\_timeout\_}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0ca155c7c2e1efed5c67fba61392698d}{cmd\_vel\_timeout\_}});}
\DoxyCodeLine{137   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Velocity commands will be considered old if they are older than "}}
\DoxyCodeLine{138                         << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0ca155c7c2e1efed5c67fba61392698d}{cmd\_vel\_timeout\_}} << \textcolor{stringliteral}{"s."});}
\DoxyCodeLine{139 }
\DoxyCodeLine{140   controller\_nh.param(\textcolor{stringliteral}{"base\_frame\_id"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}{base\_frame\_id\_}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}{base\_frame\_id\_}});}
\DoxyCodeLine{141   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Base frame\_id set to "} << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}{base\_frame\_id\_}});}
\DoxyCodeLine{142 }
\DoxyCodeLine{143     controller\_nh.param(\textcolor{stringliteral}{"odom\_frame\_id"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}{odom\_frame\_id\_}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}{odom\_frame\_id\_}});}
\DoxyCodeLine{144     ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Odom frame\_id set to "} << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}{odom\_frame\_id\_}});}
\DoxyCodeLine{145 }
\DoxyCodeLine{146   controller\_nh.param(\textcolor{stringliteral}{"enable\_odom\_tf"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad598a183ca7029d959b230b7d2722e96}{enable\_odom\_tf\_}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad598a183ca7029d959b230b7d2722e96}{enable\_odom\_tf\_}});}
\DoxyCodeLine{147   ROS\_INFO\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Publishing to tf is "} << (\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad598a183ca7029d959b230b7d2722e96}{enable\_odom\_tf\_}}?\textcolor{stringliteral}{"enabled"}:\textcolor{stringliteral}{"disabled"}));}
\DoxyCodeLine{148 }
\DoxyCodeLine{149   \textcolor{comment}{// Velocity and acceleration limits:}}
\DoxyCodeLine{150   controller\_nh.param(\textcolor{stringliteral}{"linear/x/has\_velocity\_limits"}    , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_ad984056631d829c13397587237c2a97b}{has\_velocity\_limits}}    , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_ad984056631d829c13397587237c2a97b}{has\_velocity\_limits}}    );}
\DoxyCodeLine{151   controller\_nh.param(\textcolor{stringliteral}{"linear/x/has\_acceleration\_limits"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_acd9a5a5f0c53f76795b5d428e1bc10d5}{has\_acceleration\_limits}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_acd9a5a5f0c53f76795b5d428e1bc10d5}{has\_acceleration\_limits}});}
\DoxyCodeLine{152   controller\_nh.param(\textcolor{stringliteral}{"linear/x/max\_velocity"}           , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}           ,  \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}          );}
\DoxyCodeLine{153   controller\_nh.param(\textcolor{stringliteral}{"linear/x/min\_velocity"}           , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a34086de13775ee38798b0e8e2e3338df}{min\_velocity}}           , -\/\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}          );}
\DoxyCodeLine{154   controller\_nh.param(\textcolor{stringliteral}{"linear/x/max\_acceleration"}       , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}       ,  \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}      );}
\DoxyCodeLine{155   controller\_nh.param(\textcolor{stringliteral}{"linear/x/min\_acceleration"}       , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a4cfc88143ccac0f43e0c0d2d1629428c}{min\_acceleration}}       , -\/\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}      );}
\DoxyCodeLine{156 }
\DoxyCodeLine{157   controller\_nh.param(\textcolor{stringliteral}{"linear/y/has\_velocity\_limits"}    , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_ad984056631d829c13397587237c2a97b}{has\_velocity\_limits}}    , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_ad984056631d829c13397587237c2a97b}{has\_velocity\_limits}}    );}
\DoxyCodeLine{158   controller\_nh.param(\textcolor{stringliteral}{"linear/y/has\_acceleration\_limits"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_acd9a5a5f0c53f76795b5d428e1bc10d5}{has\_acceleration\_limits}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_acd9a5a5f0c53f76795b5d428e1bc10d5}{has\_acceleration\_limits}});}
\DoxyCodeLine{159   controller\_nh.param(\textcolor{stringliteral}{"linear/y/max\_velocity"}           , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}           ,  \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}          );}
\DoxyCodeLine{160   controller\_nh.param(\textcolor{stringliteral}{"linear/y/min\_velocity"}           , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a34086de13775ee38798b0e8e2e3338df}{min\_velocity}}           , -\/\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}          );}
\DoxyCodeLine{161   controller\_nh.param(\textcolor{stringliteral}{"linear/y/max\_acceleration"}       , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}       ,  \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}      );}
\DoxyCodeLine{162   controller\_nh.param(\textcolor{stringliteral}{"linear/y/min\_acceleration"}       , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a4cfc88143ccac0f43e0c0d2d1629428c}{min\_acceleration}}       , -\/\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}      );}
\DoxyCodeLine{163 }
\DoxyCodeLine{164   controller\_nh.param(\textcolor{stringliteral}{"angular/z/has\_velocity\_limits"}    , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_ad984056631d829c13397587237c2a97b}{has\_velocity\_limits}}    , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_ad984056631d829c13397587237c2a97b}{has\_velocity\_limits}}    );}
\DoxyCodeLine{165   controller\_nh.param(\textcolor{stringliteral}{"angular/z/has\_acceleration\_limits"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_acd9a5a5f0c53f76795b5d428e1bc10d5}{has\_acceleration\_limits}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_acd9a5a5f0c53f76795b5d428e1bc10d5}{has\_acceleration\_limits}});}
\DoxyCodeLine{166   controller\_nh.param(\textcolor{stringliteral}{"angular/z/max\_velocity"}           , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}           ,  \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}          );}
\DoxyCodeLine{167   controller\_nh.param(\textcolor{stringliteral}{"angular/z/min\_velocity"}           , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a34086de13775ee38798b0e8e2e3338df}{min\_velocity}}           , -\/\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_aad506d38055cf4b68b0ff6bf39b8d696}{max\_velocity}}          );}
\DoxyCodeLine{168   controller\_nh.param(\textcolor{stringliteral}{"angular/z/max\_acceleration"}       , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}       ,  \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}      );}
\DoxyCodeLine{169   controller\_nh.param(\textcolor{stringliteral}{"angular/z/min\_acceleration"}       , \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a4cfc88143ccac0f43e0c0d2d1629428c}{min\_acceleration}}       , -\/\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a7f5a845b96d99539abe9f650aff58d84}{max\_acceleration}}      );}
\DoxyCodeLine{170 }
\DoxyCodeLine{171   \textcolor{comment}{// Get the joint objects to use in the realtime loop}}
\DoxyCodeLine{172   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aca6e3b54f2b2eedceb9dda0de5023e56}{wheel0\_jointHandle\_}} = hw-\/>getHandle(wheel0\_name);  \textcolor{comment}{// throws on failure}}
\DoxyCodeLine{173   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a13b7670baf9fac06971bb43287f371b7}{wheel1\_jointHandle\_}} = hw-\/>getHandle(wheel1\_name);  \textcolor{comment}{// throws on failure}}
\DoxyCodeLine{174   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a79edb2d766cf0dcb9cfc2df9ab0a48a6}{wheel2\_jointHandle\_}} = hw-\/>getHandle(wheel2\_name);  \textcolor{comment}{// throws on failure}}
\DoxyCodeLine{175   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2d85b2614cc903b0774c8a9bbc1dfdad}{wheel3\_jointHandle\_}} = hw-\/>getHandle(wheel3\_name);  \textcolor{comment}{// throws on failure}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177   \textcolor{comment}{// Pass params through and setup publishers and subscribers}}
\DoxyCodeLine{178   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a257323c9b4ead5742d880a5cafc01042}{setWheelParamsFromUrdf}}(root\_nh, controller\_nh, wheel0\_name, wheel1\_name, wheel2\_name, wheel3\_name))}
\DoxyCodeLine{179     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{180 }
\DoxyCodeLine{181   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ada24ca16c8bf4293c3de52d3e63b1e56}{setupRtPublishersMsg}}(root\_nh, controller\_nh);}
\DoxyCodeLine{182 }
\DoxyCodeLine{183   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ab611510b85871164d436d14af575ebd2}{sub\_command\_}} = controller\_nh.subscribe(\textcolor{stringliteral}{"cmd\_vel"}, 1, \&\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0ca7d7b31da974681ebeaee2cb67e6ce}{MecanumDriveController::cmdVelCallback}}, \textcolor{keyword}{this});}
\DoxyCodeLine{184 }
\DoxyCodeLine{185   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{186 \}}

\end{DoxyCode}


References base\+\_\+frame\+\_\+id\+\_\+, cmd\+\_\+vel\+\_\+timeout\+\_\+, cmd\+Vel\+Callback(), enable\+\_\+odom\+\_\+tf\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Speed\+Limiter\+::has\+\_\+acceleration\+\_\+limits, mecanum\+\_\+drive\+\_\+controller\+::\+Speed\+Limiter\+::has\+\_\+velocity\+\_\+limits, limiter\+\_\+ang\+\_\+, limiter\+\_\+lin\+X\+\_\+, limiter\+\_\+lin\+Y\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Speed\+Limiter\+::max\+\_\+acceleration, mecanum\+\_\+drive\+\_\+controller\+::\+Speed\+Limiter\+::max\+\_\+velocity, mecanum\+\_\+drive\+\_\+controller\+::\+Speed\+Limiter\+::min\+\_\+acceleration, mecanum\+\_\+drive\+\_\+controller\+::\+Speed\+Limiter\+::min\+\_\+velocity, name\+\_\+, odom\+\_\+frame\+\_\+id\+\_\+, open\+\_\+loop\+\_\+, publish\+\_\+period\+\_\+, setup\+Rt\+Publishers\+Msg(), set\+Wheel\+Params\+From\+Urdf(), sub\+\_\+command\+\_\+, use\+\_\+realigned\+\_\+roller\+\_\+joints\+\_\+, wheel0\+\_\+joint\+Handle\+\_\+, wheel1\+\_\+joint\+Handle\+\_\+, wheel2\+\_\+joint\+Handle\+\_\+, and wheel3\+\_\+joint\+Handle\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_aad81c2f7b52ec97e08d4b102bb577709_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_ada24ca16c8bf4293c3de52d3e63b1e56}\label{classmecanum__drive__controller_1_1MecanumDriveController_ada24ca16c8bf4293c3de52d3e63b1e56}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!setupRtPublishersMsg@{setupRtPublishersMsg}}
\index{setupRtPublishersMsg@{setupRtPublishersMsg}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{setupRtPublishersMsg()}{setupRtPublishersMsg()}}
{\footnotesize\ttfamily void mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::setup\+Rt\+Publishers\+Msg (\begin{DoxyParamCaption}\item[{ros\+::\+Node\+Handle \&}]{root\+\_\+nh,  }\item[{ros\+::\+Node\+Handle \&}]{controller\+\_\+nh }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Sets the odometry publishing fields. 


\begin{DoxyParams}{Parameters}
{\em root\+\_\+nh} & Root node handle \\
\hline
{\em controller\+\_\+nh} & Node handle inside the controller namespace \\
\hline
\end{DoxyParams}


Definition at line 508 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{509 \{}
\DoxyCodeLine{510   \textcolor{comment}{// Get covariance parameters for odometry.}}
\DoxyCodeLine{511   XmlRpc::XmlRpcValue pose\_cov\_list;}
\DoxyCodeLine{512   controller\_nh.getParam(\textcolor{stringliteral}{"pose\_covariance\_diagonal"}, pose\_cov\_list);}
\DoxyCodeLine{513   ROS\_ASSERT(pose\_cov\_list.getType() == XmlRpc::XmlRpcValue::TypeArray);}
\DoxyCodeLine{514   ROS\_ASSERT(pose\_cov\_list.size() == 6);}
\DoxyCodeLine{515   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < pose\_cov\_list.size(); ++i)}
\DoxyCodeLine{516     ROS\_ASSERT(pose\_cov\_list[i].getType() == XmlRpc::XmlRpcValue::TypeDouble);}
\DoxyCodeLine{517 }
\DoxyCodeLine{518   XmlRpc::XmlRpcValue twist\_cov\_list;}
\DoxyCodeLine{519   controller\_nh.getParam(\textcolor{stringliteral}{"twist\_covariance\_diagonal"}, twist\_cov\_list);}
\DoxyCodeLine{520   ROS\_ASSERT(twist\_cov\_list.getType() == XmlRpc::XmlRpcValue::TypeArray);}
\DoxyCodeLine{521   ROS\_ASSERT(twist\_cov\_list.size() == 6);}
\DoxyCodeLine{522   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < twist\_cov\_list.size(); ++i)}
\DoxyCodeLine{523     ROS\_ASSERT(twist\_cov\_list[i].getType() == XmlRpc::XmlRpcValue::TypeDouble);}
\DoxyCodeLine{524 }
\DoxyCodeLine{525   \textcolor{comment}{// Setup odometry msg.}}
\DoxyCodeLine{526   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}.reset(\textcolor{keyword}{new} realtime\_tools::RealtimePublisher<nav\_msgs::Odometry>(controller\_nh, \textcolor{stringliteral}{"odom"}, 100));}
\DoxyCodeLine{527   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.header.frame\_id = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}{odom\_frame\_id\_}};}
\DoxyCodeLine{528   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.child\_frame\_id = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}{base\_frame\_id\_}};}
\DoxyCodeLine{529   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.pose.pose.position.z = 0;}
\DoxyCodeLine{530   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.pose.covariance = boost::assign::list\_of}
\DoxyCodeLine{531       (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(pose\_cov\_list[0])) (0)  (0)  (0)  (0)  (0)}
\DoxyCodeLine{532       (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(pose\_cov\_list[1])) (0)  (0)  (0)  (0)}
\DoxyCodeLine{533       (0)  (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(pose\_cov\_list[2])) (0)  (0)  (0)}
\DoxyCodeLine{534       (0)  (0)  (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(pose\_cov\_list[3])) (0)  (0)}
\DoxyCodeLine{535       (0)  (0)  (0)  (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(pose\_cov\_list[4])) (0)}
\DoxyCodeLine{536       (0)  (0)  (0)  (0)  (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(pose\_cov\_list[5]));}
\DoxyCodeLine{537   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.twist.twist.linear.y  = 0;}
\DoxyCodeLine{538   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.twist.twist.linear.z  = 0;}
\DoxyCodeLine{539   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.twist.twist.angular.x = 0;}
\DoxyCodeLine{540   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.twist.twist.angular.y = 0;}
\DoxyCodeLine{541   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.twist.covariance = boost::assign::list\_of}
\DoxyCodeLine{542       (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(twist\_cov\_list[0])) (0)  (0)  (0)  (0)  (0)}
\DoxyCodeLine{543       (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(twist\_cov\_list[1])) (0)  (0)  (0)  (0)}
\DoxyCodeLine{544       (0)  (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(twist\_cov\_list[2])) (0)  (0)  (0)}
\DoxyCodeLine{545       (0)  (0)  (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(twist\_cov\_list[3])) (0)  (0)}
\DoxyCodeLine{546       (0)  (0)  (0)  (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(twist\_cov\_list[4])) (0)}
\DoxyCodeLine{547       (0)  (0)  (0)  (0)  (0)  (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(twist\_cov\_list[5]));}
\DoxyCodeLine{548 }
\DoxyCodeLine{549   \textcolor{comment}{// Setup tf msg.}}
\DoxyCodeLine{550   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\_odom\_pub\_}}.reset(\textcolor{keyword}{new} realtime\_tools::RealtimePublisher<tf::tfMessage>(root\_nh, \textcolor{stringliteral}{"/tf"}, 100));}
\DoxyCodeLine{551   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\_odom\_pub\_}}-\/>msg\_.transforms.resize(1);}
\DoxyCodeLine{552   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\_odom\_pub\_}}-\/>msg\_.transforms[0].transform.translation.z = 0.0;}
\DoxyCodeLine{553   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\_odom\_pub\_}}-\/>msg\_.transforms[0].child\_frame\_id = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}{base\_frame\_id\_}};}
\DoxyCodeLine{554   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\_odom\_pub\_}}-\/>msg\_.transforms[0].header.frame\_id = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}{odom\_frame\_id\_}};}
\DoxyCodeLine{555 \}}

\end{DoxyCode}


References base\+\_\+frame\+\_\+id\+\_\+, odom\+\_\+frame\+\_\+id\+\_\+, odom\+\_\+pub\+\_\+, and tf\+\_\+odom\+\_\+pub\+\_\+.



Referenced by init().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_ada24ca16c8bf4293c3de52d3e63b1e56_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a257323c9b4ead5742d880a5cafc01042}\label{classmecanum__drive__controller_1_1MecanumDriveController_a257323c9b4ead5742d880a5cafc01042}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!setWheelParamsFromUrdf@{setWheelParamsFromUrdf}}
\index{setWheelParamsFromUrdf@{setWheelParamsFromUrdf}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{setWheelParamsFromUrdf()}{setWheelParamsFromUrdf()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::set\+Wheel\+Params\+From\+Urdf (\begin{DoxyParamCaption}\item[{ros\+::\+Node\+Handle \&}]{root\+\_\+nh,  }\item[{ros\+::\+Node\+Handle \&}]{controller\+\_\+nh,  }\item[{const std\+::string \&}]{wheel0\+\_\+name,  }\item[{const std\+::string \&}]{wheel1\+\_\+name,  }\item[{const std\+::string \&}]{wheel2\+\_\+name,  }\item[{const std\+::string \&}]{wheel3\+\_\+name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Sets odometry parameters from the U\+R\+DF, i.\+e. the wheel radius and separation. 


\begin{DoxyParams}{Parameters}
{\em root\+\_\+nh} & Root node handle \\
\hline
{\em wheel0\+\_\+name} & Name of wheel0 joint \\
\hline
{\em wheel1\+\_\+name} & Name of wheel1 joint \\
\hline
{\em wheel2\+\_\+name} & Name of wheel2 joint \\
\hline
{\em wheel3\+\_\+name} & Name of wheel3 joint \\
\hline
\end{DoxyParams}


Definition at line 328 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{334 \{}
\DoxyCodeLine{335   \textcolor{keywordtype}{bool} has\_wheel\_separation\_x = controller\_nh.getParam(\textcolor{stringliteral}{"wheel\_separation\_x"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_adbae31c3466c0fa7d94b64b36bfcdcb9}{wheel\_separation\_x\_}});}
\DoxyCodeLine{336   \textcolor{keywordtype}{bool} has\_wheel\_separation\_y = controller\_nh.getParam(\textcolor{stringliteral}{"wheel\_separation\_y"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_af3664f57b188157c7f4e87d426d8d801}{wheel\_separation\_y\_}});}
\DoxyCodeLine{337 }
\DoxyCodeLine{338   \textcolor{comment}{// Check to see if both X and Y separations are overrided.}}
\DoxyCodeLine{339   \textcolor{keywordflow}{if} (has\_wheel\_separation\_x != has\_wheel\_separation\_y)}
\DoxyCodeLine{340   \{}
\DoxyCodeLine{341     ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Only one wheel separation overrided"});}
\DoxyCodeLine{342     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{343   \}}
\DoxyCodeLine{344 }
\DoxyCodeLine{345   \textcolor{keywordtype}{bool} lookup\_wheel\_separation = !(has\_wheel\_separation\_x \&\& has\_wheel\_separation\_y);}
\DoxyCodeLine{346   \textcolor{keywordtype}{bool} lookup\_wheel\_radius = !controller\_nh.getParam(\textcolor{stringliteral}{"wheel\_radius"}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}});}
\DoxyCodeLine{347 }
\DoxyCodeLine{348   \textcolor{comment}{// Avoid URDF requirement if wheel separation and radius already specified}}
\DoxyCodeLine{349   \textcolor{keywordflow}{if} (lookup\_wheel\_separation || lookup\_wheel\_radius)}
\DoxyCodeLine{350   \{}
\DoxyCodeLine{351     \textcolor{comment}{// Parse robot description}}
\DoxyCodeLine{352     \textcolor{keyword}{const} std::string model\_param\_name = \textcolor{stringliteral}{"robot\_description"};}
\DoxyCodeLine{353     \textcolor{keywordtype}{bool} res = root\_nh.hasParam(model\_param\_name);}
\DoxyCodeLine{354     std::string robot\_model\_str=\textcolor{stringliteral}{""};}
\DoxyCodeLine{355     \textcolor{keywordflow}{if}(!res || !root\_nh.getParam(model\_param\_name,robot\_model\_str))}
\DoxyCodeLine{356     \{}
\DoxyCodeLine{357       ROS\_ERROR\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Robot descripion couldn't be retrieved from param server."});}
\DoxyCodeLine{358       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{359     \}}
\DoxyCodeLine{360 }
\DoxyCodeLine{361     urdf::ModelInterfaceSharedPtr model(urdf::parseURDF(robot\_model\_str));}
\DoxyCodeLine{362 }
\DoxyCodeLine{363     \textcolor{comment}{// Get wheels position and compute parameter k\_ (used in mecanum wheels IK).}}
\DoxyCodeLine{364     urdf::JointConstSharedPtr wheel0\_urdfJoint(model-\/>getJoint(wheel0\_name));}
\DoxyCodeLine{365     \textcolor{keywordflow}{if}(!wheel0\_urdfJoint)}
\DoxyCodeLine{366     \{}
\DoxyCodeLine{367       ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, wheel0\_name}
\DoxyCodeLine{368                              << \textcolor{stringliteral}{" couldn't be retrieved from model description"});}
\DoxyCodeLine{369       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{370     \}}
\DoxyCodeLine{371     urdf::JointConstSharedPtr wheel1\_urdfJoint(model-\/>getJoint(wheel1\_name));}
\DoxyCodeLine{372     \textcolor{keywordflow}{if}(!wheel1\_urdfJoint)}
\DoxyCodeLine{373     \{}
\DoxyCodeLine{374       ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, wheel1\_name}
\DoxyCodeLine{375                              << \textcolor{stringliteral}{" couldn't be retrieved from model description"});}
\DoxyCodeLine{376       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{377     \}}
\DoxyCodeLine{378     urdf::JointConstSharedPtr wheel2\_urdfJoint(model-\/>getJoint(wheel2\_name));}
\DoxyCodeLine{379     \textcolor{keywordflow}{if}(!wheel2\_urdfJoint)}
\DoxyCodeLine{380     \{}
\DoxyCodeLine{381       ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, wheel2\_name}
\DoxyCodeLine{382                              << \textcolor{stringliteral}{" couldn't be retrieved from model description"});}
\DoxyCodeLine{383       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{384     \}}
\DoxyCodeLine{385     urdf::JointConstSharedPtr wheel3\_urdfJoint(model-\/>getJoint(wheel3\_name));}
\DoxyCodeLine{386     \textcolor{keywordflow}{if}(!wheel3\_urdfJoint)}
\DoxyCodeLine{387     \{}
\DoxyCodeLine{388       ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, wheel3\_name}
\DoxyCodeLine{389                              << \textcolor{stringliteral}{" couldn't be retrieved from model description"});}
\DoxyCodeLine{390       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{391     \}}
\DoxyCodeLine{392 }
\DoxyCodeLine{393     \textcolor{keywordflow}{if} (lookup\_wheel\_separation)}
\DoxyCodeLine{394     \{}
\DoxyCodeLine{395       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"wheel0 to origin: "}  << wheel0\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.x << \textcolor{stringliteral}{","}}
\DoxyCodeLine{396                                             << wheel0\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.y << \textcolor{stringliteral}{", "}}
\DoxyCodeLine{397                                             << wheel0\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.z);}
\DoxyCodeLine{398       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"wheel1 to origin: "}  << wheel1\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.x << \textcolor{stringliteral}{","}}
\DoxyCodeLine{399                                             << wheel1\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.y << \textcolor{stringliteral}{", "}}
\DoxyCodeLine{400                                             << wheel1\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.z);}
\DoxyCodeLine{401       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"wheel2 to origin: "}  << wheel2\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.x << \textcolor{stringliteral}{","}}
\DoxyCodeLine{402                                             << wheel2\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.y << \textcolor{stringliteral}{", "}}
\DoxyCodeLine{403                                             << wheel2\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.z);}
\DoxyCodeLine{404       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"wheel3 to origin: "}  << wheel3\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.x << \textcolor{stringliteral}{","}}
\DoxyCodeLine{405                                             << wheel3\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.y << \textcolor{stringliteral}{", "}}
\DoxyCodeLine{406                                             << wheel3\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.z);}
\DoxyCodeLine{407 }
\DoxyCodeLine{408       \textcolor{keywordtype}{double} wheel0\_x = wheel0\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.x;}
\DoxyCodeLine{409       \textcolor{keywordtype}{double} wheel0\_y = wheel0\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.y;}
\DoxyCodeLine{410       \textcolor{keywordtype}{double} wheel1\_x = wheel1\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.x;}
\DoxyCodeLine{411       \textcolor{keywordtype}{double} wheel1\_y = wheel1\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.y;}
\DoxyCodeLine{412       \textcolor{keywordtype}{double} wheel2\_x = wheel2\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.x;}
\DoxyCodeLine{413       \textcolor{keywordtype}{double} wheel2\_y = wheel2\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.y;}
\DoxyCodeLine{414       \textcolor{keywordtype}{double} wheel3\_x = wheel3\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.x;}
\DoxyCodeLine{415       \textcolor{keywordtype}{double} wheel3\_y = wheel3\_urdfJoint-\/>parent\_to\_joint\_origin\_transform.position.y;}
\DoxyCodeLine{416 }
\DoxyCodeLine{417       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\_k\_}} = (-\/(-\/wheel0\_x -\/ wheel0\_y) -\/ (wheel1\_x -\/ wheel1\_y) + (-\/wheel2\_x -\/ wheel2\_y) + (wheel3\_x -\/ wheel3\_y))}
\DoxyCodeLine{418                   / 4.0;}
\DoxyCodeLine{419     \}}
\DoxyCodeLine{420     \textcolor{keywordflow}{else}}
\DoxyCodeLine{421     \{}
\DoxyCodeLine{422       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"Wheel seperation in X: "} << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_adbae31c3466c0fa7d94b64b36bfcdcb9}{wheel\_separation\_x\_}});}
\DoxyCodeLine{423       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"Wheel seperation in Y: "} << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_af3664f57b188157c7f4e87d426d8d801}{wheel\_separation\_y\_}});}
\DoxyCodeLine{424 }
\DoxyCodeLine{425       \textcolor{comment}{// The seperation is the total distance between the wheels in X and Y.}}
\DoxyCodeLine{426 }
\DoxyCodeLine{427       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\_k\_}} = (\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_adbae31c3466c0fa7d94b64b36bfcdcb9}{wheel\_separation\_x\_}} + \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_af3664f57b188157c7f4e87d426d8d801}{wheel\_separation\_y\_}}) / 2.0;}
\DoxyCodeLine{428     \}}
\DoxyCodeLine{429 }
\DoxyCodeLine{430     \textcolor{keywordflow}{if} (lookup\_wheel\_radius)}
\DoxyCodeLine{431     \{}
\DoxyCodeLine{432       \textcolor{comment}{// Get wheels radius}}
\DoxyCodeLine{433       \textcolor{keywordtype}{double} wheel0\_radius = 0.0;}
\DoxyCodeLine{434       \textcolor{keywordtype}{double} wheel1\_radius = 0.0;}
\DoxyCodeLine{435       \textcolor{keywordtype}{double} wheel2\_radius = 0.0;}
\DoxyCodeLine{436       \textcolor{keywordtype}{double} wheel3\_radius = 0.0;}
\DoxyCodeLine{437 }
\DoxyCodeLine{438       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8}{getWheelRadius}}(model, model-\/>getLink(wheel0\_urdfJoint-\/>child\_link\_name), wheel0\_radius) ||}
\DoxyCodeLine{439           !\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8}{getWheelRadius}}(model, model-\/>getLink(wheel1\_urdfJoint-\/>child\_link\_name), wheel1\_radius) ||}
\DoxyCodeLine{440           !\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8}{getWheelRadius}}(model, model-\/>getLink(wheel2\_urdfJoint-\/>child\_link\_name), wheel2\_radius) ||}
\DoxyCodeLine{441           !\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad1c2b98a54e6bd89533045a0d3b5ffa8}{getWheelRadius}}(model, model-\/>getLink(wheel3\_urdfJoint-\/>child\_link\_name), wheel3\_radius))}
\DoxyCodeLine{442       \{}
\DoxyCodeLine{443         ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Couldn't retrieve wheels' radius"});}
\DoxyCodeLine{444         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{445       \}}
\DoxyCodeLine{446 }
\DoxyCodeLine{447       \textcolor{keywordflow}{if} (abs(wheel0\_radius -\/ wheel1\_radius) > 1e-\/3 ||}
\DoxyCodeLine{448           abs(wheel0\_radius -\/ wheel2\_radius) > 1e-\/3 ||}
\DoxyCodeLine{449           abs(wheel0\_radius -\/ wheel3\_radius) > 1e-\/3)}
\DoxyCodeLine{450       \{}
\DoxyCodeLine{451         ROS\_ERROR\_STREAM\_NAMED(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}{name\_}}, \textcolor{stringliteral}{"Wheels radius are not egual"});}
\DoxyCodeLine{452         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{453       \}}
\DoxyCodeLine{454 }
\DoxyCodeLine{455       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}} = wheel0\_radius;}
\DoxyCodeLine{456     \}}
\DoxyCodeLine{457   \}}
\DoxyCodeLine{458 }
\DoxyCodeLine{459   ROS\_INFO\_STREAM(\textcolor{stringliteral}{"Wheel radius: "} << \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}});}
\DoxyCodeLine{460 }
\DoxyCodeLine{461   \textcolor{comment}{// Set wheel params for the odometry computation}}
\DoxyCodeLine{462   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_aabd05f5d6caf20f0d2f7ba9406efe3e9}{setWheelsParams}}(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\_k\_}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}});}
\DoxyCodeLine{463 }
\DoxyCodeLine{464   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{465 \}}

\end{DoxyCode}


References get\+Wheel\+Radius(), name\+\_\+, odometry\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::set\+Wheels\+Params(), wheel\+\_\+separation\+\_\+x\+\_\+, wheel\+\_\+separation\+\_\+y\+\_\+, wheels\+\_\+k\+\_\+, and wheels\+\_\+radius\+\_\+.



Referenced by init().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_a257323c9b4ead5742d880a5cafc01042_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_a257323c9b4ead5742d880a5cafc01042_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a0f226fc034ee64d5cc8bc1a0d8237fc6}\label{classmecanum__drive__controller_1_1MecanumDriveController_a0f226fc034ee64d5cc8bc1a0d8237fc6}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!starting@{starting}}
\index{starting@{starting}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{starting()}{starting()}}
{\footnotesize\ttfamily void mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::starting (\begin{DoxyParamCaption}\item[{const ros\+::\+Time \&}]{time }\end{DoxyParamCaption})}



Starts controller. 


\begin{DoxyParams}{Parameters}
{\em time} & Current time \\
\hline
\end{DoxyParams}


Definition at line 279 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{280 \{}
\DoxyCodeLine{281   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a82d58a19b2dd36850aafcb24a2ed728a}{brake}}();}
\DoxyCodeLine{282 }
\DoxyCodeLine{283   \textcolor{comment}{// Register starting time used to keep fixed rate}}
\DoxyCodeLine{284   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2cf720fa110296eba5dfff94d8a82193}{last\_state\_publish\_time\_}} = time;}
\DoxyCodeLine{285 }
\DoxyCodeLine{286   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_aab16ac85e777de56f586734fad0d3b54}{init}}(time);}
\DoxyCodeLine{287 \}}

\end{DoxyCode}


References brake(), mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::init(), last\+\_\+state\+\_\+publish\+\_\+time\+\_\+, and odometry\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_a0f226fc034ee64d5cc8bc1a0d8237fc6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_abf933c790a867ee8cc794ac85386d59c}\label{classmecanum__drive__controller_1_1MecanumDriveController_abf933c790a867ee8cc794ac85386d59c}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!stopping@{stopping}}
\index{stopping@{stopping}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{stopping()}{stopping()}}
{\footnotesize\ttfamily void mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::stopping (\begin{DoxyParamCaption}\item[{const ros\+::\+Time \&}]{time }\end{DoxyParamCaption})}



Stops controller. 


\begin{DoxyParams}{Parameters}
{\em time} & Current time \\
\hline
\end{DoxyParams}


Definition at line 290 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{291 \{}
\DoxyCodeLine{292   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a82d58a19b2dd36850aafcb24a2ed728a}{brake}}();}
\DoxyCodeLine{293 \}}

\end{DoxyCode}


References brake().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_abf933c790a867ee8cc794ac85386d59c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a458c6c52b997c8b91d44f16e7bc31221}\label{classmecanum__drive__controller_1_1MecanumDriveController_a458c6c52b997c8b91d44f16e7bc31221}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!update@{update}}
\index{update@{update}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::update (\begin{DoxyParamCaption}\item[{const ros\+::\+Time \&}]{time,  }\item[{const ros\+::\+Duration \&}]{period }\end{DoxyParamCaption})}



Updates controller, i.\+e. computes the odometry and sets the new velocity commands. 


\begin{DoxyParams}{Parameters}
{\em time} & Current time \\
\hline
{\em period} & Time since the last called to update \\
\hline
\end{DoxyParams}


Definition at line 190 of file mecanum\+\_\+drive\+\_\+controller.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{191 \{}
\DoxyCodeLine{192   \textcolor{comment}{// COMPUTE AND PUBLISH ODOMETRY}}
\DoxyCodeLine{193   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aa1e47a9705bb716938d76b3141682309}{open\_loop\_}})}
\DoxyCodeLine{194   \{}
\DoxyCodeLine{195     \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_ab0562b24b9174f345683e28f1bbb2e49}{updateOpenLoop}}(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}{last\_cmd\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_af268f9ef6dbde8d71b00cc93f5f21791}{linX}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}{last\_cmd\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_ae71fb4a62afabf941d316663ba01c4bf}{linY}}, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}{last\_cmd\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_a5f4d51b69f1df3f562939fea746948ce}{ang}}, time);}
\DoxyCodeLine{196   \}}
\DoxyCodeLine{197   \textcolor{keywordflow}{else}}
\DoxyCodeLine{198   \{}
\DoxyCodeLine{199     \textcolor{keywordtype}{double} wheel0\_vel = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aca6e3b54f2b2eedceb9dda0de5023e56}{wheel0\_jointHandle\_}}.getVelocity();}
\DoxyCodeLine{200     \textcolor{keywordtype}{double} wheel1\_vel = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a13b7670baf9fac06971bb43287f371b7}{wheel1\_jointHandle\_}}.getVelocity();}
\DoxyCodeLine{201     \textcolor{keywordtype}{double} wheel2\_vel = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a79edb2d766cf0dcb9cfc2df9ab0a48a6}{wheel2\_jointHandle\_}}.getVelocity();}
\DoxyCodeLine{202     \textcolor{keywordtype}{double} wheel3\_vel = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2d85b2614cc903b0774c8a9bbc1dfdad}{wheel3\_jointHandle\_}}.getVelocity();}
\DoxyCodeLine{203 }
\DoxyCodeLine{204     \textcolor{keywordflow}{if} (std::isnan(wheel0\_vel) || std::isnan(wheel1\_vel) || std::isnan(wheel2\_vel) || std::isnan(wheel3\_vel))}
\DoxyCodeLine{205       \textcolor{keywordflow}{return};}
\DoxyCodeLine{206 }
\DoxyCodeLine{207     \textcolor{comment}{// Estimate twist (using joint information) and integrate}}
\DoxyCodeLine{208     \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_af4c7c019ccb5db9878bbdf0b83bbbc5c}{update}}(wheel0\_vel, wheel1\_vel, wheel2\_vel, wheel3\_vel, time);}
\DoxyCodeLine{209   \}}
\DoxyCodeLine{210 }
\DoxyCodeLine{211   \textcolor{comment}{// Publish odometry message}}
\DoxyCodeLine{212   \textcolor{keywordflow}{if}(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2cf720fa110296eba5dfff94d8a82193}{last\_state\_publish\_time\_}} + \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4668b52e51c7e3966ae367ce8a6b4327}{publish\_period\_}} < time)}
\DoxyCodeLine{213   \{}
\DoxyCodeLine{214     \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2cf720fa110296eba5dfff94d8a82193}{last\_state\_publish\_time\_}} += \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a4668b52e51c7e3966ae367ce8a6b4327}{publish\_period\_}};}
\DoxyCodeLine{215     \textcolor{comment}{// Compute and store orientation info}}
\DoxyCodeLine{216     \textcolor{keyword}{const} geometry\_msgs::Quaternion orientation(}
\DoxyCodeLine{217           tf::createQuaternionMsgFromYaw(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_ae99c465bd00eb9498266ec88fe7712f7}{getHeading}}()));}
\DoxyCodeLine{218 }
\DoxyCodeLine{219     \textcolor{comment}{// Populate odom message and publish}}
\DoxyCodeLine{220     \textcolor{keywordflow}{if}(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>trylock())}
\DoxyCodeLine{221     \{}
\DoxyCodeLine{222       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.header.stamp = time;}
\DoxyCodeLine{223       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.pose.pose.position.x = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_a4964c24a7e17cca8d3eba39123e92733}{getX}}();}
\DoxyCodeLine{224       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.pose.pose.position.y = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_aa10bb571e668d1fe549c42bb9bad1ea6}{getY}}();}
\DoxyCodeLine{225       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.pose.pose.orientation = orientation;}
\DoxyCodeLine{226       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.twist.twist.linear.x  = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_a853fa4f4d60e6bde3156a040b2d2afd4}{getLinearX}}();}
\DoxyCodeLine{227       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.twist.twist.linear.y  = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_a8099ac0900687515b3e700c9334594ab}{getLinearY}}();}
\DoxyCodeLine{228       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>msg\_.twist.twist.angular.z = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_aede4d8f9fccf9c6b5ff41f035f383a0f}{getAngular}}();}
\DoxyCodeLine{229       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}{odom\_pub\_}}-\/>unlockAndPublish();}
\DoxyCodeLine{230     \}}
\DoxyCodeLine{231 }
\DoxyCodeLine{232     \textcolor{comment}{// Publish tf /odom frame}}
\DoxyCodeLine{233     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ad598a183ca7029d959b230b7d2722e96}{enable\_odom\_tf\_}} \&\& \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\_odom\_pub\_}}-\/>trylock())}
\DoxyCodeLine{234     \{}
\DoxyCodeLine{235       geometry\_msgs::TransformStamped\& odom\_frame = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\_odom\_pub\_}}-\/>msg\_.transforms[0];}
\DoxyCodeLine{236       odom\_frame.header.stamp = time;}
\DoxyCodeLine{237       odom\_frame.transform.translation.x = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_a4964c24a7e17cca8d3eba39123e92733}{getX}}();}
\DoxyCodeLine{238       odom\_frame.transform.translation.y = \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}{odometry\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry_aa10bb571e668d1fe549c42bb9bad1ea6}{getY}}();}
\DoxyCodeLine{239       odom\_frame.transform.rotation = orientation;}
\DoxyCodeLine{240       \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}{tf\_odom\_pub\_}}-\/>unlockAndPublish();}
\DoxyCodeLine{241     \}}
\DoxyCodeLine{242   \}}
\DoxyCodeLine{243 }
\DoxyCodeLine{244   \textcolor{comment}{// MOVE ROBOT}}
\DoxyCodeLine{245   \textcolor{comment}{// Retrieve current velocity command and time step:}}
\DoxyCodeLine{246   Commands curr\_cmd = *(\mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a311afd56ce59be8faa3e6c0e5d57ccd8}{command\_}}.readFromRT());}
\DoxyCodeLine{247   \textcolor{keyword}{const} \textcolor{keywordtype}{double} dt = (time -\/ curr\_cmd.stamp).toSec();}
\DoxyCodeLine{248 }
\DoxyCodeLine{249   \textcolor{comment}{// Brake if cmd\_vel has timeout:}}
\DoxyCodeLine{250   \textcolor{keywordflow}{if} (dt > \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a0ca155c7c2e1efed5c67fba61392698d}{cmd\_vel\_timeout\_}})}
\DoxyCodeLine{251   \{}
\DoxyCodeLine{252     curr\_cmd.linX = 0.0;}
\DoxyCodeLine{253     curr\_cmd.linY = 0.0;}
\DoxyCodeLine{254     curr\_cmd.ang = 0.0;}
\DoxyCodeLine{255   \}}
\DoxyCodeLine{256 }
\DoxyCodeLine{257   \textcolor{comment}{// Limit velocities and accelerations:}}
\DoxyCodeLine{258   \textcolor{keyword}{const} \textcolor{keywordtype}{double} cmd\_dt(period.toSec());}
\DoxyCodeLine{259   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}{limiter\_linX\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a648a5d296d9275e5be8f10744dce16ba}{limit}}(curr\_cmd.linX, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}{last\_cmd\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_af268f9ef6dbde8d71b00cc93f5f21791}{linX}}, cmd\_dt);}
\DoxyCodeLine{260   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}{limiter\_linY\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a648a5d296d9275e5be8f10744dce16ba}{limit}}(curr\_cmd.linY, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}{last\_cmd\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_ae71fb4a62afabf941d316663ba01c4bf}{linY}}, cmd\_dt);}
\DoxyCodeLine{261   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}{limiter\_ang\_}}.\mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter_a648a5d296d9275e5be8f10744dce16ba}{limit}}(curr\_cmd.ang, \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}{last\_cmd\_}}.\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands_a5f4d51b69f1df3f562939fea746948ce}{ang}}, cmd\_dt);}
\DoxyCodeLine{262   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}{last\_cmd\_}} = curr\_cmd;}
\DoxyCodeLine{263 }
\DoxyCodeLine{264   \textcolor{comment}{// Compute wheels velocities (this is the actual ik):}}
\DoxyCodeLine{265   \textcolor{comment}{// NOTE: the input desired twist (from topic /cmd\_vel) is a body twist.}}
\DoxyCodeLine{266   \textcolor{keyword}{const} \textcolor{keywordtype}{double} w0\_vel = 1.0 / \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}} * (curr\_cmd.linX -\/ curr\_cmd.linY -\/ \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\_k\_}} * curr\_cmd.ang);}
\DoxyCodeLine{267   \textcolor{keyword}{const} \textcolor{keywordtype}{double} w1\_vel = 1.0 / \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}} * (curr\_cmd.linX + curr\_cmd.linY -\/ \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\_k\_}} * curr\_cmd.ang);}
\DoxyCodeLine{268   \textcolor{keyword}{const} \textcolor{keywordtype}{double} w2\_vel = 1.0 / \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}} * (curr\_cmd.linX -\/ curr\_cmd.linY + \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\_k\_}} * curr\_cmd.ang);}
\DoxyCodeLine{269   \textcolor{keyword}{const} \textcolor{keywordtype}{double} w3\_vel = 1.0 / \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}{wheels\_radius\_}} * (curr\_cmd.linX + curr\_cmd.linY + \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}{wheels\_k\_}} * curr\_cmd.ang);}
\DoxyCodeLine{270 }
\DoxyCodeLine{271   \textcolor{comment}{// Set wheels velocities:}}
\DoxyCodeLine{272   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_aca6e3b54f2b2eedceb9dda0de5023e56}{wheel0\_jointHandle\_}}.setCommand(w0\_vel);}
\DoxyCodeLine{273   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a13b7670baf9fac06971bb43287f371b7}{wheel1\_jointHandle\_}}.setCommand(w1\_vel);}
\DoxyCodeLine{274   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a79edb2d766cf0dcb9cfc2df9ab0a48a6}{wheel2\_jointHandle\_}}.setCommand(w2\_vel);}
\DoxyCodeLine{275   \mbox{\hyperlink{classmecanum__drive__controller_1_1MecanumDriveController_a2d85b2614cc903b0774c8a9bbc1dfdad}{wheel3\_jointHandle\_}}.setCommand(w3\_vel);}
\DoxyCodeLine{276 \}}

\end{DoxyCode}


References mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Commands\+::ang, cmd\+\_\+vel\+\_\+timeout\+\_\+, command\+\_\+, enable\+\_\+odom\+\_\+tf\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::get\+Angular(), mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::get\+Heading(), mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::get\+Linear\+X(), mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::get\+Linear\+Y(), mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::get\+X(), mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::get\+Y(), last\+\_\+cmd\+\_\+, last\+\_\+state\+\_\+publish\+\_\+time\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Speed\+Limiter\+::limit(), limiter\+\_\+ang\+\_\+, limiter\+\_\+lin\+X\+\_\+, limiter\+\_\+lin\+Y\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Commands\+::linX, mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Commands\+::linY, odom\+\_\+pub\+\_\+, odometry\+\_\+, open\+\_\+loop\+\_\+, publish\+\_\+period\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::\+Commands\+::stamp, tf\+\_\+odom\+\_\+pub\+\_\+, mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::update(), mecanum\+\_\+drive\+\_\+controller\+::\+Odometry\+::update\+Open\+Loop(), wheel0\+\_\+joint\+Handle\+\_\+, wheel1\+\_\+joint\+Handle\+\_\+, wheel2\+\_\+joint\+Handle\+\_\+, wheel3\+\_\+joint\+Handle\+\_\+, wheels\+\_\+k\+\_\+, and wheels\+\_\+radius\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmecanum__drive__controller_1_1MecanumDriveController_a458c6c52b997c8b91d44f16e7bc31221_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}\label{classmecanum__drive__controller_1_1MecanumDriveController_aead5e23156fc2e898bf329f19adcb2e2}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!base\_frame\_id\_@{base\_frame\_id\_}}
\index{base\_frame\_id\_@{base\_frame\_id\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{base\_frame\_id\_}{base\_frame\_id\_}}
{\footnotesize\ttfamily std\+::string mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::base\+\_\+frame\+\_\+id\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Frame to use for the robot base\+: 



Definition at line 208 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and setup\+Rt\+Publishers\+Msg().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a0ca155c7c2e1efed5c67fba61392698d}\label{classmecanum__drive__controller_1_1MecanumDriveController_a0ca155c7c2e1efed5c67fba61392698d}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!cmd\_vel\_timeout\_@{cmd\_vel\_timeout\_}}
\index{cmd\_vel\_timeout\_@{cmd\_vel\_timeout\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{cmd\_vel\_timeout\_}{cmd\_vel\_timeout\_}}
{\footnotesize\ttfamily double mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::cmd\+\_\+vel\+\_\+timeout\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Timeout to consider cmd\+\_\+vel commands old\+: 



Definition at line 205 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a311afd56ce59be8faa3e6c0e5d57ccd8}\label{classmecanum__drive__controller_1_1MecanumDriveController_a311afd56ce59be8faa3e6c0e5d57ccd8}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!command\_@{command\_}}
\index{command\_@{command\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{command\_}{command\_}}
{\footnotesize\ttfamily realtime\+\_\+tools\+::\+Realtime\+Buffer$<$\mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands}{Commands}}$>$ mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::command\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 187 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by cmd\+Vel\+Callback(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}\label{classmecanum__drive__controller_1_1MecanumDriveController_a4762197e2fa3d70046d89a587ff85158}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!command\_struct\_@{command\_struct\_}}
\index{command\_struct\_@{command\_struct\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{command\_struct\_}{command\_struct\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands}{Commands}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::command\+\_\+struct\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 188 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by cmd\+Vel\+Callback().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_ad598a183ca7029d959b230b7d2722e96}\label{classmecanum__drive__controller_1_1MecanumDriveController_ad598a183ca7029d959b230b7d2722e96}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!enable\_odom\_tf\_@{enable\_odom\_tf\_}}
\index{enable\_odom\_tf\_@{enable\_odom\_tf\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{enable\_odom\_tf\_}{enable\_odom\_tf\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::enable\+\_\+odom\+\_\+tf\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Whether to publish odometry to tf or not\+: 



Definition at line 212 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}\label{classmecanum__drive__controller_1_1MecanumDriveController_a3acfdef01862a8d3d1dc41a016f0b82c}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!last\_cmd\_@{last\_cmd\_}}
\index{last\_cmd\_@{last\_cmd\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{last\_cmd\_}{last\_cmd\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{structmecanum__drive__controller_1_1MecanumDriveController_1_1Commands}{Commands}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::last\+\_\+cmd\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 218 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a2cf720fa110296eba5dfff94d8a82193}\label{classmecanum__drive__controller_1_1MecanumDriveController_a2cf720fa110296eba5dfff94d8a82193}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!last\_state\_publish\_time\_@{last\_state\_publish\_time\_}}
\index{last\_state\_publish\_time\_@{last\_state\_publish\_time\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{last\_state\_publish\_time\_}{last\_state\_publish\_time\_}}
{\footnotesize\ttfamily ros\+::\+Time mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::last\+\_\+state\+\_\+publish\+\_\+time\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 168 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by starting(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}\label{classmecanum__drive__controller_1_1MecanumDriveController_a5c9958f7212487357406cda2509406d1}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!limiter\_ang\_@{limiter\_ang\_}}
\index{limiter\_ang\_@{limiter\_ang\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{limiter\_ang\_}{limiter\_ang\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter}{Speed\+Limiter}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::limiter\+\_\+ang\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 221 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}\label{classmecanum__drive__controller_1_1MecanumDriveController_aadaa5a330379388d2a5e216e474ea1c3}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!limiter\_linX\_@{limiter\_linX\_}}
\index{limiter\_linX\_@{limiter\_linX\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{limiter\_linX\_}{limiter\_linX\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter}{Speed\+Limiter}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::limiter\+\_\+lin\+X\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 219 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}\label{classmecanum__drive__controller_1_1MecanumDriveController_a3914f2b91518c2eb527f7e8cc0ca4602}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!limiter\_linY\_@{limiter\_linY\_}}
\index{limiter\_linY\_@{limiter\_linY\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{limiter\_linY\_}{limiter\_linY\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmecanum__drive__controller_1_1SpeedLimiter}{Speed\+Limiter}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::limiter\+\_\+lin\+Y\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 220 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}\label{classmecanum__drive__controller_1_1MecanumDriveController_a4fdc9f866c0494228d8109c653a48207}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!name\_@{name\_}}
\index{name\_@{name\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{name\_}{name\_}}
{\footnotesize\ttfamily std\+::string mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::name\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 164 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by cmd\+Vel\+Callback(), get\+Wheel\+Radius(), init(), and set\+Wheel\+Params\+From\+Urdf().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_ad78b85246ebd4cdb2469c82c6ff8013d}\label{classmecanum__drive__controller_1_1MecanumDriveController_ad78b85246ebd4cdb2469c82c6ff8013d}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!odom\_frame\_@{odom\_frame\_}}
\index{odom\_frame\_@{odom\_frame\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{odom\_frame\_}{odom\_frame\_}}
{\footnotesize\ttfamily geometry\+\_\+msgs\+::\+Transform\+Stamped mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::odom\+\_\+frame\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 195 of file mecanum\+\_\+drive\+\_\+controller.\+h.

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}\label{classmecanum__drive__controller_1_1MecanumDriveController_a4acdf024c4146d783c0d5d73e79fa823}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!odom\_frame\_id\_@{odom\_frame\_id\_}}
\index{odom\_frame\_id\_@{odom\_frame\_id\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{odom\_frame\_id\_}{odom\_frame\_id\_}}
{\footnotesize\ttfamily std\+::string mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::odom\+\_\+frame\+\_\+id\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 209 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and setup\+Rt\+Publishers\+Msg().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}\label{classmecanum__drive__controller_1_1MecanumDriveController_a9c440621e979ce5cc062129b416b6b2c}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!odom\_pub\_@{odom\_pub\_}}
\index{odom\_pub\_@{odom\_pub\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{odom\_pub\_}{odom\_pub\_}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$realtime\+\_\+tools\+::\+Realtime\+Publisher$<$nav\+\_\+msgs\+::\+Odometry$>$ $>$ mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::odom\+\_\+pub\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry}{Odometry}} related\+: 



Definition at line 192 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by setup\+Rt\+Publishers\+Msg(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}\label{classmecanum__drive__controller_1_1MecanumDriveController_a9a0d961a9a5953fc4762678c7797408b}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!odometry\_@{odometry\_}}
\index{odometry\_@{odometry\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{odometry\_}{odometry\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry}{Odometry}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::odometry\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 194 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by set\+Wheel\+Params\+From\+Urdf(), starting(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_aa1e47a9705bb716938d76b3141682309}\label{classmecanum__drive__controller_1_1MecanumDriveController_aa1e47a9705bb716938d76b3141682309}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!open\_loop\_@{open\_loop\_}}
\index{open\_loop\_@{open\_loop\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{open\_loop\_}{open\_loop\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::open\+\_\+loop\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 169 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a4668b52e51c7e3966ae367ce8a6b4327}\label{classmecanum__drive__controller_1_1MecanumDriveController_a4668b52e51c7e3966ae367ce8a6b4327}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!publish\_period\_@{publish\_period\_}}
\index{publish\_period\_@{publish\_period\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{publish\_period\_}{publish\_period\_}}
{\footnotesize\ttfamily ros\+::\+Duration mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::publish\+\_\+period\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



\mbox{\hyperlink{classmecanum__drive__controller_1_1Odometry}{Odometry}} related\+: 



Definition at line 167 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_ab611510b85871164d436d14af575ebd2}\label{classmecanum__drive__controller_1_1MecanumDriveController_ab611510b85871164d436d14af575ebd2}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!sub\_command\_@{sub\_command\_}}
\index{sub\_command\_@{sub\_command\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{sub\_command\_}{sub\_command\_}}
{\footnotesize\ttfamily ros\+::\+Subscriber mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::sub\+\_\+command\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 189 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by init().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}\label{classmecanum__drive__controller_1_1MecanumDriveController_acc8165b9d50ec8b379350f97027fc8c7}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!tf\_odom\_pub\_@{tf\_odom\_pub\_}}
\index{tf\_odom\_pub\_@{tf\_odom\_pub\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{tf\_odom\_pub\_}{tf\_odom\_pub\_}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$realtime\+\_\+tools\+::\+Realtime\+Publisher$<$tf\+::tf\+Message$>$ $>$ mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::tf\+\_\+odom\+\_\+pub\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 193 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by setup\+Rt\+Publishers\+Msg(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a94baa6ec5c923e0e0eb9505542ec7f5f}\label{classmecanum__drive__controller_1_1MecanumDriveController_a94baa6ec5c923e0e0eb9505542ec7f5f}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!use\_realigned\_roller\_joints\_@{use\_realigned\_roller\_joints\_}}
\index{use\_realigned\_roller\_joints\_@{use\_realigned\_roller\_joints\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{use\_realigned\_roller\_joints\_}{use\_realigned\_roller\_joints\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classbool}{bool}} mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::use\+\_\+realigned\+\_\+roller\+\_\+joints\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Wheel radius (assuming it\textquotesingle{}s the same for the left and right wheels)\+: 



Definition at line 198 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by get\+Wheel\+Radius(), and init().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_aca6e3b54f2b2eedceb9dda0de5023e56}\label{classmecanum__drive__controller_1_1MecanumDriveController_aca6e3b54f2b2eedceb9dda0de5023e56}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheel0\_jointHandle\_@{wheel0\_jointHandle\_}}
\index{wheel0\_jointHandle\_@{wheel0\_jointHandle\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheel0\_jointHandle\_}{wheel0\_jointHandle\_}}
{\footnotesize\ttfamily hardware\+\_\+interface\+::\+Joint\+Handle mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheel0\+\_\+joint\+Handle\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Hardware handles\+: 



Definition at line 172 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by brake(), init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a13b7670baf9fac06971bb43287f371b7}\label{classmecanum__drive__controller_1_1MecanumDriveController_a13b7670baf9fac06971bb43287f371b7}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheel1\_jointHandle\_@{wheel1\_jointHandle\_}}
\index{wheel1\_jointHandle\_@{wheel1\_jointHandle\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheel1\_jointHandle\_}{wheel1\_jointHandle\_}}
{\footnotesize\ttfamily hardware\+\_\+interface\+::\+Joint\+Handle mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheel1\+\_\+joint\+Handle\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 173 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by brake(), init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a79edb2d766cf0dcb9cfc2df9ab0a48a6}\label{classmecanum__drive__controller_1_1MecanumDriveController_a79edb2d766cf0dcb9cfc2df9ab0a48a6}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheel2\_jointHandle\_@{wheel2\_jointHandle\_}}
\index{wheel2\_jointHandle\_@{wheel2\_jointHandle\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheel2\_jointHandle\_}{wheel2\_jointHandle\_}}
{\footnotesize\ttfamily hardware\+\_\+interface\+::\+Joint\+Handle mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheel2\+\_\+joint\+Handle\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 174 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by brake(), init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a2d85b2614cc903b0774c8a9bbc1dfdad}\label{classmecanum__drive__controller_1_1MecanumDriveController_a2d85b2614cc903b0774c8a9bbc1dfdad}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheel3\_jointHandle\_@{wheel3\_jointHandle\_}}
\index{wheel3\_jointHandle\_@{wheel3\_jointHandle\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheel3\_jointHandle\_}{wheel3\_jointHandle\_}}
{\footnotesize\ttfamily hardware\+\_\+interface\+::\+Joint\+Handle mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheel3\+\_\+joint\+Handle\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 175 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by brake(), init(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_ae411c4804246e9583c03926f0f4471cb}\label{classmecanum__drive__controller_1_1MecanumDriveController_ae411c4804246e9583c03926f0f4471cb}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheel\_joints\_size\_@{wheel\_joints\_size\_}}
\index{wheel\_joints\_size\_@{wheel\_joints\_size\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheel\_joints\_size\_}{wheel\_joints\_size\_}}
{\footnotesize\ttfamily size\+\_\+t mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheel\+\_\+joints\+\_\+size\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Number of wheel joints\+: 



Definition at line 215 of file mecanum\+\_\+drive\+\_\+controller.\+h.

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_adbae31c3466c0fa7d94b64b36bfcdcb9}\label{classmecanum__drive__controller_1_1MecanumDriveController_adbae31c3466c0fa7d94b64b36bfcdcb9}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheel\_separation\_x\_@{wheel\_separation\_x\_}}
\index{wheel\_separation\_x\_@{wheel\_separation\_x\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheel\_separation\_x\_}{wheel\_separation\_x\_}}
{\footnotesize\ttfamily double mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheel\+\_\+separation\+\_\+x\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 201 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by set\+Wheel\+Params\+From\+Urdf().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_af3664f57b188157c7f4e87d426d8d801}\label{classmecanum__drive__controller_1_1MecanumDriveController_af3664f57b188157c7f4e87d426d8d801}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheel\_separation\_y\_@{wheel\_separation\_y\_}}
\index{wheel\_separation\_y\_@{wheel\_separation\_y\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheel\_separation\_y\_}{wheel\_separation\_y\_}}
{\footnotesize\ttfamily double mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheel\+\_\+separation\+\_\+y\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 202 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by set\+Wheel\+Params\+From\+Urdf().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}\label{classmecanum__drive__controller_1_1MecanumDriveController_ac7091c9de0c1c9643c383f4413beb829}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheels\_k\_@{wheels\_k\_}}
\index{wheels\_k\_@{wheels\_k\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheels\_k\_}{wheels\_k\_}}
{\footnotesize\ttfamily double mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheels\+\_\+k\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 199 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by set\+Wheel\+Params\+From\+Urdf(), and update().

\mbox{\Hypertarget{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}\label{classmecanum__drive__controller_1_1MecanumDriveController_a8e0ffa0a9e59cf581de01caae58f3c03}} 
\index{mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}!wheels\_radius\_@{wheels\_radius\_}}
\index{wheels\_radius\_@{wheels\_radius\_}!mecanum\_drive\_controller::MecanumDriveController@{mecanum\_drive\_controller::MecanumDriveController}}
\doxysubsubsection{\texorpdfstring{wheels\_radius\_}{wheels\_radius\_}}
{\footnotesize\ttfamily double mecanum\+\_\+drive\+\_\+controller\+::\+Mecanum\+Drive\+Controller\+::wheels\+\_\+radius\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 200 of file mecanum\+\_\+drive\+\_\+controller.\+h.



Referenced by set\+Wheel\+Params\+From\+Urdf(), and update().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
submodules/ridgeback/ridgeback\+\_\+control/include/mecanum\+\_\+drive\+\_\+controller/\mbox{\hyperlink{mecanum__drive__controller_8h}{mecanum\+\_\+drive\+\_\+controller.\+h}}\item 
submodules/ridgeback/ridgeback\+\_\+control/src/\mbox{\hyperlink{mecanum__drive__controller_8cpp}{mecanum\+\_\+drive\+\_\+controller.\+cpp}}\end{DoxyCompactItemize}
