\hypertarget{gripper__joint__state__publisher_8cpp}{}\section{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/franka\+\_\+ros/franka\+\_\+visualization/src/gripper\+\_\+joint\+\_\+state\+\_\+publisher.cpp File Reference}
\label{gripper__joint__state__publisher_8cpp}\index{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/franka\+\_\+ros/franka\+\_\+visualization/src/gripper\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp@{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/franka\+\_\+ros/franka\+\_\+visualization/src/gripper\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp}}
{\ttfamily \#include $<$franka/exception.\+h$>$}\newline
{\ttfamily \#include $<$franka/gripper.\+h$>$}\newline
{\ttfamily \#include $<$ros/ros.\+h$>$}\newline
{\ttfamily \#include $<$sensor\+\_\+msgs/\+Joint\+State.\+h$>$}\newline
Include dependency graph for gripper\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{gripper__joint__state__publisher_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{gripper__joint__state__publisher_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{gripper__joint__state__publisher_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{gripper__joint__state__publisher_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{gripper\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp@{gripper\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp}!main@{main}}
\index{main@{main}!gripper\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp@{gripper\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



Definition at line 8 of file gripper\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp.



References franka\+::\+Gripper\+::read\+Once(), and franka\+::\+Gripper\+State\+::width.


\begin{DoxyCode}
8                                 \{
9   ros::init(argc, argv, \textcolor{stringliteral}{"gripper\_joint\_state\_publisher"});
10   ros::NodeHandle node\_handle(\textcolor{stringliteral}{"~"});
11 
12   std::vector<std::string> joint\_names;
13   node\_handle.getParam(\textcolor{stringliteral}{"joint\_names"}, joint\_names);
14 
15   \hyperlink{namespacetesting_1_1internal_a8e8ff5b11e64078831112677156cb111}{std::string} robot\_ip;
16   node\_handle.getParam(\textcolor{stringliteral}{"robot\_ip"}, robot\_ip);
17 
18   \textcolor{keywordtype}{double} publish\_rate;
19   node\_handle.getParam(\textcolor{stringliteral}{"publish\_rate"}, publish\_rate);
20 
21   ros::Rate rate(publish\_rate);
22 
23   sensor\_msgs::JointState states;
24   states.effort.resize(joint\_names.size());
25   states.name.resize(joint\_names.size());
26   states.position.resize(joint\_names.size());
27   states.velocity.resize(joint\_names.size());
28 
29   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < joint\_names.size(); i++) \{
30     states.name[i] = joint\_names[i];
31   \}
32 
33   ros::Publisher publisher = node\_handle.advertise<sensor\_msgs::JointState>(\textcolor{stringliteral}{"joint\_states"}, 1);
34 
35   \textcolor{keywordflow}{try} \{
36     \hyperlink{classfranka_1_1Gripper}{franka::Gripper} gripper(robot\_ip);
37 
38     \textcolor{keywordflow}{while} (ros::ok()) \{
39       \hyperlink{structfranka_1_1GripperState}{franka::GripperState} gripper\_state = gripper.readOnce();
40       states.header.stamp = ros::Time::now();
41       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < joint\_names.size(); i++) \{
42         states.position[i] = gripper\_state.\hyperlink{structfranka_1_1GripperState_adf095f446ec39a9a48e120b209dcd6e9}{width} * 0.5;
43         states.velocity[i] = 0.0;
44         states.effort[i] = 0.0;
45       \}
46       publisher.publish(states);
47       ros::spinOnce();
48       rate.sleep();
49     \}
50 
51   \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} \hyperlink{structfranka_1_1Exception}{franka::Exception}& e) \{
52     ROS\_ERROR\_STREAM(\textcolor{stringliteral}{"Exception: "} << e.what());
53     \textcolor{keywordflow}{return} -1;
54   \}
55 
56   \textcolor{keywordflow}{return} 0;
57 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{gripper__joint__state__publisher_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}
