\hypertarget{classfranka_1_1ControlLoop}{}\section{franka\+:\+:Control\+Loop$<$ T $>$ Class Template Reference}
\label{classfranka_1_1ControlLoop}\index{franka\+::\+Control\+Loop$<$ T $>$@{franka\+::\+Control\+Loop$<$ T $>$}}


{\ttfamily \#include $<$control\+\_\+loop.\+h$>$}



Collaboration diagram for franka\+:\+:Control\+Loop$<$ T $>$\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \hyperlink{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}{Control\+Callback} = std\+::function$<$ \hyperlink{classfranka_1_1Torques}{Torques}(const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&, \hyperlink{classfranka_1_1Duration}{franka\+::\+Duration})$>$
\item 
using \hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback} = std\+::function$<$ T(const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&, \hyperlink{classfranka_1_1Duration}{franka\+::\+Duration})$>$
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classfranka_1_1ControlLoop_ac98d7227389027af16be738dbe7043c7}{Control\+Loop} (\hyperlink{classfranka_1_1RobotControl}{Robot\+Control} \&robot, \hyperlink{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}{Control\+Callback} control\+\_\+callback, \hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback} motion\+\_\+callback, \hyperlink{classbool}{bool} limit\+\_\+rate, double cutoff\+\_\+frequency)
\item 
\hyperlink{classfranka_1_1ControlLoop_a1fda76bf0db7818859abf1d52f6c0c94}{Control\+Loop} (\hyperlink{classfranka_1_1RobotControl}{Robot\+Control} \&robot, \hyperlink{namespacefranka_a3e20bc77587e2c0c53598753e3f4816b}{Controller\+Mode} controller\+\_\+mode, \hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback} motion\+\_\+callback, \hyperlink{classbool}{bool} limit\+\_\+rate, double cutoff\+\_\+frequency)
\item 
void \hyperlink{classfranka_1_1ControlLoop_acfd08b5dca8a6618b2c4f8aa0ce751b7}{operator()} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr \hyperlink{structresearch__interface_1_1robot_1_1Move_1_1Deviation}{research\+\_\+interface\+::robot\+::\+Move\+::\+Deviation} \hyperlink{classfranka_1_1ControlLoop_a935eeb4a950ed2276e5c00d26e9c5a16}{k\+Default\+Deviation}
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classfranka_1_1ControlLoop_aecc26183c892cb2c1d125e5c14486bae}{Control\+Loop} (\hyperlink{classfranka_1_1RobotControl}{Robot\+Control} \&robot, \hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback} motion\+\_\+callback, \hyperlink{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}{Control\+Callback} control\+\_\+callback, \hyperlink{classbool}{bool} limit\+\_\+rate, double cutoff\+\_\+frequency)
\item 
\hyperlink{classbool}{bool} \hyperlink{classfranka_1_1ControlLoop_a480c19a57bf2a7df4ab9c6f68667b865}{spin\+Control} (const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&robot\+\_\+state, \hyperlink{classfranka_1_1Duration}{franka\+::\+Duration} time\+\_\+step, \hyperlink{structresearch__interface_1_1robot_1_1ControllerCommand}{research\+\_\+interface\+::robot\+::\+Controller\+Command} $\ast$command)
\item 
\hyperlink{classbool}{bool} \hyperlink{classfranka_1_1ControlLoop_abec82e0ac5015ccc5fb078851ecae381}{spin\+Motion} (const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&robot\+\_\+state, \hyperlink{classfranka_1_1Duration}{franka\+::\+Duration} time\+\_\+step, \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$command)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classfranka_1_1ControlLoop_a51052003f900ee3e99bc5409df6bbf47}{convert\+Motion} (const T \&motion, const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&robot\+\_\+state, \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$command)
\item 
{\footnotesize template$<$$>$ }\\void \hyperlink{classfranka_1_1ControlLoop_aab46712ac11588d598ff9d99958ba98d}{convert\+Motion} (const \hyperlink{classfranka_1_1JointPositions}{Joint\+Positions} \&motion, const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&robot\+\_\+state, \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$command)
\item 
{\footnotesize template$<$$>$ }\\void \hyperlink{classfranka_1_1ControlLoop_a64b502db834f429b6869c09bd1afd2fb}{convert\+Motion} (const \hyperlink{classfranka_1_1JointVelocities}{Joint\+Velocities} \&motion, const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&robot\+\_\+state, \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$command)
\item 
{\footnotesize template$<$$>$ }\\void \hyperlink{classfranka_1_1ControlLoop_a1b12d574fd73dfeab9d44cc662435fb6}{convert\+Motion} (const \hyperlink{classfranka_1_1CartesianPose}{Cartesian\+Pose} \&motion, const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&robot\+\_\+state, \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$command)
\item 
{\footnotesize template$<$$>$ }\\void \hyperlink{classfranka_1_1ControlLoop_ae6c2b0808a95542fa41e2351f7d8f242}{convert\+Motion} (const \hyperlink{classfranka_1_1CartesianVelocities}{Cartesian\+Velocities} \&motion, const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&robot\+\_\+state, \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$command)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classfranka_1_1RobotControl}{Robot\+Control} \& \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\+\_\+}
\item 
const \hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback} \hyperlink{classfranka_1_1ControlLoop_a8304d484624d562c70e3572d5037871b}{motion\+\_\+callback\+\_\+}
\item 
const \hyperlink{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}{Control\+Callback} \hyperlink{classfranka_1_1ControlLoop_a71249c690ee56b2c099bbb4f29e92c95}{control\+\_\+callback\+\_\+}
\item 
const \hyperlink{classbool}{bool} \hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\+\_\+rate\+\_\+}
\item 
const double \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\+\_\+frequency\+\_\+}
\item 
uint32\+\_\+t \hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\+\_\+id\+\_\+} = 0
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$typename T$>$\newline
class franka\+::\+Control\+Loop$<$ T $>$}



Definition at line 18 of file control\+\_\+loop.\+h.



\subsection{Member Typedef Documentation}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}\label{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!Control\+Callback@{Control\+Callback}}
\index{Control\+Callback@{Control\+Callback}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{Control\+Callback}{ControlCallback}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
using \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::\hyperlink{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}{Control\+Callback} =  std\+::function$<$\hyperlink{classfranka_1_1Torques}{Torques}(const \hyperlink{structfranka_1_1RobotState}{Robot\+State}\&, \hyperlink{classfranka_1_1Duration}{franka\+::\+Duration})$>$}



Definition at line 23 of file control\+\_\+loop.\+h.

\mbox{\Hypertarget{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}\label{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!Motion\+Generator\+Callback@{Motion\+Generator\+Callback}}
\index{Motion\+Generator\+Callback@{Motion\+Generator\+Callback}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{Motion\+Generator\+Callback}{MotionGeneratorCallback}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
using \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::\hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback} =  std\+::function$<$T(const \hyperlink{structfranka_1_1RobotState}{Robot\+State}\&, \hyperlink{classfranka_1_1Duration}{franka\+::\+Duration})$>$}



Definition at line 24 of file control\+\_\+loop.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_ac98d7227389027af16be738dbe7043c7}\label{classfranka_1_1ControlLoop_ac98d7227389027af16be738dbe7043c7}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!Control\+Loop@{Control\+Loop}}
\index{Control\+Loop@{Control\+Loop}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{Control\+Loop()}{ControlLoop()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::\hyperlink{classfranka_1_1ControlLoop}{Control\+Loop} (\begin{DoxyParamCaption}\item[{\hyperlink{classfranka_1_1RobotControl}{Robot\+Control} \&}]{robot,  }\item[{\hyperlink{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}{Control\+Callback}}]{control\+\_\+callback,  }\item[{\hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback}}]{motion\+\_\+callback,  }\item[{\hyperlink{classbool}{bool}}]{limit\+\_\+rate,  }\item[{double}]{cutoff\+\_\+frequency }\end{DoxyParamCaption})}



Definition at line 80 of file control\+\_\+loop.\+cpp.



References franka\+::\+Control\+Loop$<$ T $>$\+::control\+\_\+callback\+\_\+, franka\+::\+Control\+Loop$<$ T $>$\+::k\+Default\+Deviation, research\+\_\+interface\+::robot\+::\+Move\+::k\+External\+Controller, franka\+::\+Control\+Loop$<$ T $>$\+::motion\+\_\+callback\+\_\+, franka\+::\+Control\+Loop$<$ T $>$\+::motion\+\_\+id\+\_\+, and franka\+::\+Robot\+Control\+::start\+Motion().


\begin{DoxyCode}
85     : \hyperlink{classfranka_1_1ControlLoop_ac98d7227389027af16be738dbe7043c7}{ControlLoop}(robot,
86                   \hyperlink{namespacefranka__gripper_a1356a87108d2229401d3755bd3e53bdf}{std::move}(motion\_callback),
87                   \hyperlink{namespacefranka__gripper_a1356a87108d2229401d3755bd3e53bdf}{std::move}(control\_callback),
88                   limit\_rate,
89                   cutoff\_frequency) \{
90   \textcolor{keywordflow}{if} (!\hyperlink{classfranka_1_1ControlLoop_a71249c690ee56b2c099bbb4f29e92c95}{control\_callback\_}) \{
91     \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"libfranka: Invalid control callback given."});
92   \}
93   \textcolor{keywordflow}{if} (!\hyperlink{classfranka_1_1ControlLoop_a8304d484624d562c70e3572d5037871b}{motion\_callback\_}) \{
94     \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"libfranka: Invalid motion callback given."});
95   \}
96 
97   \hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\_id\_} = robot.startMotion(
98       \hyperlink{structresearch__interface_1_1robot_1_1Move_a3e7b80b30bbf01dc902c84402502ebbcaae18ec698c6d2260b411166de51e86fe}{research\_interface::robot::Move::ControllerMode::kExternalController}
      ,
99       MotionGeneratorTraits<T>::kMotionGeneratorMode, \hyperlink{classfranka_1_1ControlLoop_a935eeb4a950ed2276e5c00d26e9c5a16}{kDefaultDeviation}, 
      \hyperlink{classfranka_1_1ControlLoop_a935eeb4a950ed2276e5c00d26e9c5a16}{kDefaultDeviation});
100 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classfranka_1_1ControlLoop_ac98d7227389027af16be738dbe7043c7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_a1fda76bf0db7818859abf1d52f6c0c94}\label{classfranka_1_1ControlLoop_a1fda76bf0db7818859abf1d52f6c0c94}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!Control\+Loop@{Control\+Loop}}
\index{Control\+Loop@{Control\+Loop}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{Control\+Loop()}{ControlLoop()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::\hyperlink{classfranka_1_1ControlLoop}{Control\+Loop} (\begin{DoxyParamCaption}\item[{\hyperlink{classfranka_1_1RobotControl}{Robot\+Control} \&}]{robot,  }\item[{\hyperlink{namespacefranka_a3e20bc77587e2c0c53598753e3f4816b}{Controller\+Mode}}]{controller\+\_\+mode,  }\item[{\hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback}}]{motion\+\_\+callback,  }\item[{\hyperlink{classbool}{bool}}]{limit\+\_\+rate,  }\item[{double}]{cutoff\+\_\+frequency }\end{DoxyParamCaption})}



Definition at line 103 of file control\+\_\+loop.\+cpp.



References franka\+::k\+Cartesian\+Impedance, franka\+::\+Control\+Loop$<$ T $>$\+::k\+Default\+Deviation, franka\+::k\+Joint\+Impedance, franka\+::\+Control\+Loop$<$ T $>$\+::motion\+\_\+callback\+\_\+, and franka\+::\+Control\+Loop$<$ T $>$\+::motion\+\_\+id\+\_\+.


\begin{DoxyCode}
108     : \hyperlink{classfranka_1_1ControlLoop_ac98d7227389027af16be738dbe7043c7}{ControlLoop}(robot, \hyperlink{namespacefranka__gripper_a1356a87108d2229401d3755bd3e53bdf}{std::move}(motion\_callback), \{\}, limit\_rate, cutoff\_frequency) 
      \{
109   \textcolor{keywordflow}{if} (!\hyperlink{classfranka_1_1ControlLoop_a8304d484624d562c70e3572d5037871b}{motion\_callback\_}) \{
110     \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"libfranka: Invalid motion callback given."});
111   \}
112   \hyperlink{structresearch__interface_1_1robot_1_1Move_a3e7b80b30bbf01dc902c84402502ebbc}{research\_interface::robot::Move::ControllerMode} mode;
113   \textcolor{keywordflow}{switch} (controller\_mode) \{
114     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a3e20bc77587e2c0c53598753e3f4816baa7cd8fc7552b5b9c50684e57f032d724}{ControllerMode::kJointImpedance}:
115       mode = decltype(mode)::\hyperlink{namespacefranka_a3e20bc77587e2c0c53598753e3f4816baa7cd8fc7552b5b9c50684e57f032d724}{kJointImpedance};
116       \textcolor{keywordflow}{break};
117     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a3e20bc77587e2c0c53598753e3f4816bac2c3f2cf686f3debef77b3049958b488}{ControllerMode::kCartesianImpedance}:
118       mode = decltype(mode)::\hyperlink{namespacefranka_a3e20bc77587e2c0c53598753e3f4816bac2c3f2cf686f3debef77b3049958b488}{kCartesianImpedance};
119       \textcolor{keywordflow}{break};
120     \textcolor{keywordflow}{default}:
121       \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"libfranka: Invalid controller mode given."});
122   \}
123   \hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\_id\_} = robot.startMotion(mode, MotionGeneratorTraits<T>::kMotionGeneratorMode,
124                                  \hyperlink{classfranka_1_1ControlLoop_a935eeb4a950ed2276e5c00d26e9c5a16}{kDefaultDeviation}, 
      \hyperlink{classfranka_1_1ControlLoop_a935eeb4a950ed2276e5c00d26e9c5a16}{kDefaultDeviation});
125 \}
\end{DoxyCode}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_aecc26183c892cb2c1d125e5c14486bae}\label{classfranka_1_1ControlLoop_aecc26183c892cb2c1d125e5c14486bae}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!Control\+Loop@{Control\+Loop}}
\index{Control\+Loop@{Control\+Loop}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{Control\+Loop()}{ControlLoop()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::\hyperlink{classfranka_1_1ControlLoop}{Control\+Loop} (\begin{DoxyParamCaption}\item[{\hyperlink{classfranka_1_1RobotControl}{Robot\+Control} \&}]{robot,  }\item[{\hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback}}]{motion\+\_\+callback,  }\item[{\hyperlink{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}{Control\+Callback}}]{control\+\_\+callback,  }\item[{\hyperlink{classbool}{bool}}]{limit\+\_\+rate,  }\item[{double}]{cutoff\+\_\+frequency }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 59 of file control\+\_\+loop.\+cpp.



References franka\+::has\+Realtime\+Kernel(), franka\+::k\+Enforce, franka\+::\+Robot\+Control\+::realtime\+Config(), franka\+::\+Control\+Loop$<$ T $>$\+::robot\+\_\+, and franka\+::set\+Current\+Thread\+To\+Highest\+Scheduler\+Priority().


\begin{DoxyCode}
64     : \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}(robot),
65       \hyperlink{classfranka_1_1ControlLoop_a8304d484624d562c70e3572d5037871b}{motion\_callback\_}(\hyperlink{namespacefranka__gripper_a1356a87108d2229401d3755bd3e53bdf}{std::move}(motion\_callback)),
66       \hyperlink{classfranka_1_1ControlLoop_a71249c690ee56b2c099bbb4f29e92c95}{control\_callback\_}(\hyperlink{namespacefranka__gripper_a1356a87108d2229401d3755bd3e53bdf}{std::move}(control\_callback)),
67       \hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\_rate\_}(limit\_rate),
68       \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_}(cutoff\_frequency) \{
69   \textcolor{keywordtype}{bool} throw\_on\_error = \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_aca02c0c27b863d4a42e08d541c400832}{realtimeConfig}() == 
      \hyperlink{namespacefranka_aeede4f4629390fea21ca5e5a35a8a943a024bd586d70db805d622b85815bfa0de}{RealtimeConfig::kEnforce};
70   \hyperlink{namespacetesting_1_1internal_a8e8ff5b11e64078831112677156cb111}{std::string} error\_message;
71   \textcolor{keywordflow}{if} (!\hyperlink{namespacefranka_a5c090196bc50ead82194d3e594e61e65}{setCurrentThreadToHighestSchedulerPriority}(&error\_message)
       && throw\_on\_error) \{
72     \textcolor{keywordflow}{throw} RealtimeException(error\_message);
73   \}
74   \textcolor{keywordflow}{if} (throw\_on\_error && !\hyperlink{namespacefranka_ad165a74da105c78586c0cd4c1ed57bd2}{hasRealtimeKernel}()) \{
75     \textcolor{keywordflow}{throw} RealtimeException(\textcolor{stringliteral}{"libfranka: Running kernel does not have realtime capabilities."});
76   \}
77 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop_aecc26183c892cb2c1d125e5c14486bae_cgraph}
\end{center}
\end{figure}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_a51052003f900ee3e99bc5409df6bbf47}\label{classfranka_1_1ControlLoop_a51052003f900ee3e99bc5409df6bbf47}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!convert\+Motion@{convert\+Motion}}
\index{convert\+Motion@{convert\+Motion}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{convert\+Motion()}{convertMotion()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
void \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::convert\+Motion (\begin{DoxyParamCaption}\item[{const T \&}]{motion,  }\item[{const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&}]{robot\+\_\+state,  }\item[{\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::spin\+Motion().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop_a51052003f900ee3e99bc5409df6bbf47_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_aab46712ac11588d598ff9d99958ba98d}\label{classfranka_1_1ControlLoop_aab46712ac11588d598ff9d99958ba98d}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!convert\+Motion@{convert\+Motion}}
\index{convert\+Motion@{convert\+Motion}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{convert\+Motion()}{convertMotion()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily template$<$$>$ \\
void \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ \hyperlink{classfranka_1_1JointPositions}{Joint\+Positions} $>$\+::convert\+Motion (\begin{DoxyParamCaption}\item[{const \hyperlink{classfranka_1_1JointPositions}{Joint\+Positions} \&}]{motion,  }\item[{const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&}]{robot\+\_\+state,  }\item[{\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 189 of file control\+\_\+loop.\+cpp.



References franka\+::anonymous\+\_\+namespace\{control\+\_\+loop.\+cpp\}\+::check\+Finite(), franka\+::\+Control\+Loop$<$ T $>$\+::cutoff\+\_\+frequency\+\_\+, franka\+::\+Robot\+State\+::ddq\+\_\+d, franka\+::\+Robot\+State\+::dq\+\_\+d, franka\+::k\+DeltaT, franka\+::k\+Max\+Cutoff\+Frequency, franka\+::k\+Max\+Joint\+Acceleration, franka\+::k\+Max\+Joint\+Jerk, franka\+::k\+Max\+Joint\+Velocity, franka\+::\+Control\+Loop$<$ T $>$\+::limit\+\_\+rate\+\_\+, franka\+::limit\+Rate(), franka\+::lowpass\+Filter(), franka\+::\+Joint\+Positions\+::q, research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command\+::q\+\_\+c, and franka\+::\+Robot\+State\+::q\+\_\+d.


\begin{DoxyCode}
192                                                             \{
193   command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_aae29370603fa15690aeab4961aec0f36}{q\_c} = motion.q;
194   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_} < \hyperlink{namespacefranka_adb10b364af8deb9e17d9bcc1ff2695be}{kMaxCutoffFrequency}) \{
195     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < 7; i++) \{
196       command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_aae29370603fa15690aeab4961aec0f36}{q\_c}[i] =
197           \hyperlink{namespacefranka_a94c21b0e87afce0147a9cd6025c239ca}{lowpassFilter}(\hyperlink{namespacefranka_a1e207a0d5a6e90c1e1a78e6e1057120a}{kDeltaT}, command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_aae29370603fa15690aeab4961aec0f36}{q\_c}[i], robot\_state.q\_d[i], 
      \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_});
198     \}
199   \}
200   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\_rate\_}) \{
201     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_aae29370603fa15690aeab4961aec0f36}{q\_c} = \hyperlink{namespacefranka_a77e127a920da5b0ad29877ec3ff29f15}{limitRate}(\hyperlink{namespacefranka_a6d451800a90b939422dc9c3fb103ca23}{kMaxJointVelocity}, 
      \hyperlink{namespacefranka_a826ecf0b7d214df69c1ee416d3e66b93}{kMaxJointAcceleration}, \hyperlink{namespacefranka_a600a21a6151ff2eee38294293dd8aeec}{kMaxJointJerk}, command->
      \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_aae29370603fa15690aeab4961aec0f36}{q\_c},
202                              robot\_state.q\_d, robot\_state.dq\_d, robot\_state.ddq\_d);
203   \}
204   \hyperlink{namespacefranka_1_1anonymous__namespace_02control__loop_8cpp_03_af284e9c97573a00e6fc31f0c716d6add}{checkFinite}(command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_aae29370603fa15690aeab4961aec0f36}{q\_c});
205 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop_aab46712ac11588d598ff9d99958ba98d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_a64b502db834f429b6869c09bd1afd2fb}\label{classfranka_1_1ControlLoop_a64b502db834f429b6869c09bd1afd2fb}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!convert\+Motion@{convert\+Motion}}
\index{convert\+Motion@{convert\+Motion}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{convert\+Motion()}{convertMotion()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily template$<$$>$ \\
void \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ \hyperlink{classfranka_1_1JointVelocities}{Joint\+Velocities} $>$\+::convert\+Motion (\begin{DoxyParamCaption}\item[{const \hyperlink{classfranka_1_1JointVelocities}{Joint\+Velocities} \&}]{motion,  }\item[{const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&}]{robot\+\_\+state,  }\item[{\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 208 of file control\+\_\+loop.\+cpp.



References franka\+::anonymous\+\_\+namespace\{control\+\_\+loop.\+cpp\}\+::check\+Finite(), franka\+::\+Control\+Loop$<$ T $>$\+::cutoff\+\_\+frequency\+\_\+, franka\+::\+Robot\+State\+::ddq\+\_\+d, franka\+::\+Joint\+Velocities\+::dq, research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command\+::dq\+\_\+c, franka\+::\+Robot\+State\+::dq\+\_\+d, franka\+::k\+DeltaT, franka\+::k\+Max\+Cutoff\+Frequency, franka\+::k\+Max\+Joint\+Acceleration, franka\+::k\+Max\+Joint\+Jerk, franka\+::k\+Max\+Joint\+Velocity, franka\+::\+Control\+Loop$<$ T $>$\+::limit\+\_\+rate\+\_\+, franka\+::limit\+Rate(), and franka\+::lowpass\+Filter().


\begin{DoxyCode}
211                                                             \{
212   command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab8de7c1bdd902fbf88b2d3637a958a54}{dq\_c} = motion.dq;
213   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_} < \hyperlink{namespacefranka_adb10b364af8deb9e17d9bcc1ff2695be}{kMaxCutoffFrequency}) \{
214     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < 7; i++) \{
215       command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab8de7c1bdd902fbf88b2d3637a958a54}{dq\_c}[i] =
216           \hyperlink{namespacefranka_a94c21b0e87afce0147a9cd6025c239ca}{lowpassFilter}(\hyperlink{namespacefranka_a1e207a0d5a6e90c1e1a78e6e1057120a}{kDeltaT}, command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab8de7c1bdd902fbf88b2d3637a958a54}{dq\_c}[i], robot\_state.dq\_d[i], 
      \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_});
217     \}
218   \}
219   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\_rate\_}) \{
220     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab8de7c1bdd902fbf88b2d3637a958a54}{dq\_c} = \hyperlink{namespacefranka_a77e127a920da5b0ad29877ec3ff29f15}{limitRate}(\hyperlink{namespacefranka_a6d451800a90b939422dc9c3fb103ca23}{kMaxJointVelocity}, 
      \hyperlink{namespacefranka_a826ecf0b7d214df69c1ee416d3e66b93}{kMaxJointAcceleration}, \hyperlink{namespacefranka_a600a21a6151ff2eee38294293dd8aeec}{kMaxJointJerk},
221                               command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab8de7c1bdd902fbf88b2d3637a958a54}{dq\_c}, robot\_state.dq\_d, robot\_state.ddq\_d);
222   \}
223   \hyperlink{namespacefranka_1_1anonymous__namespace_02control__loop_8cpp_03_af284e9c97573a00e6fc31f0c716d6add}{checkFinite}(command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab8de7c1bdd902fbf88b2d3637a958a54}{dq\_c});
224 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop_a64b502db834f429b6869c09bd1afd2fb_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_a1b12d574fd73dfeab9d44cc662435fb6}\label{classfranka_1_1ControlLoop_a1b12d574fd73dfeab9d44cc662435fb6}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!convert\+Motion@{convert\+Motion}}
\index{convert\+Motion@{convert\+Motion}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{convert\+Motion()}{convertMotion()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily template$<$$>$ \\
void \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ \hyperlink{classfranka_1_1CartesianPose}{Cartesian\+Pose} $>$\+::convert\+Motion (\begin{DoxyParamCaption}\item[{const \hyperlink{classfranka_1_1CartesianPose}{Cartesian\+Pose} \&}]{motion,  }\item[{const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&}]{robot\+\_\+state,  }\item[{\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 227 of file control\+\_\+loop.\+cpp.



References franka\+::cartesian\+Lowpass\+Filter(), franka\+::anonymous\+\_\+namespace\{control\+\_\+loop.\+cpp\}\+::check\+Elbow(), franka\+::anonymous\+\_\+namespace\{control\+\_\+loop.\+cpp\}\+::check\+Matrix(), franka\+::\+Control\+Loop$<$ T $>$\+::cutoff\+\_\+frequency\+\_\+, franka\+::\+Robot\+State\+::ddelbow\+\_\+c, franka\+::\+Robot\+State\+::delbow\+\_\+c, franka\+::\+Cartesian\+Pose\+::elbow, research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command\+::elbow\+\_\+c, franka\+::\+Robot\+State\+::elbow\+\_\+c, franka\+::\+Cartesian\+Pose\+::has\+Elbow(), franka\+::k\+DeltaT, franka\+::k\+Max\+Cutoff\+Frequency, franka\+::k\+Max\+Elbow\+Acceleration, franka\+::k\+Max\+Elbow\+Jerk, franka\+::k\+Max\+Elbow\+Velocity, franka\+::k\+Max\+Rotational\+Acceleration, franka\+::k\+Max\+Rotational\+Jerk, franka\+::k\+Max\+Rotational\+Velocity, franka\+::k\+Max\+Translational\+Acceleration, franka\+::k\+Max\+Translational\+Jerk, franka\+::k\+Max\+Translational\+Velocity, franka\+::\+Control\+Loop$<$ T $>$\+::limit\+\_\+rate\+\_\+, franka\+::limit\+Rate(), franka\+::lowpass\+Filter(), franka\+::\+Robot\+State\+::\+O\+\_\+dd\+P\+\_\+\+E\+E\+\_\+c, franka\+::\+Robot\+State\+::\+O\+\_\+d\+P\+\_\+\+E\+E\+\_\+c, franka\+::\+Cartesian\+Pose\+::\+O\+\_\+\+T\+\_\+\+EE, research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command\+::\+O\+\_\+\+T\+\_\+\+E\+E\+\_\+c, franka\+::\+Robot\+State\+::\+O\+\_\+\+T\+\_\+\+E\+E\+\_\+c, and research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command\+::valid\+\_\+elbow.


\begin{DoxyCode}
230                                                             \{
231   command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a7291f9f7ad3b2cce841f4c0f2a976acb}{O\_T\_EE\_c} = motion.O\_T\_EE;
232   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_} < \hyperlink{namespacefranka_adb10b364af8deb9e17d9bcc1ff2695be}{kMaxCutoffFrequency}) \{
233     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a7291f9f7ad3b2cce841f4c0f2a976acb}{O\_T\_EE\_c} =
234         \hyperlink{namespacefranka_a7c9b0bec78181cabee7466bc136996e6}{cartesianLowpassFilter}(\hyperlink{namespacefranka_a1e207a0d5a6e90c1e1a78e6e1057120a}{kDeltaT}, command->
      \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a7291f9f7ad3b2cce841f4c0f2a976acb}{O\_T\_EE\_c}, robot\_state.O\_T\_EE\_c, \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_});
235   \}
236 
237   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\_rate\_}) \{
238     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a7291f9f7ad3b2cce841f4c0f2a976acb}{O\_T\_EE\_c} = \hyperlink{namespacefranka_a77e127a920da5b0ad29877ec3ff29f15}{limitRate}(
239         \hyperlink{namespacefranka_a857e1e5e18d688ec7095264a629bf474}{kMaxTranslationalVelocity}, 
      \hyperlink{namespacefranka_a3803b1a54ba526ccaa4fa0d15446f3db}{kMaxTranslationalAcceleration}, 
      \hyperlink{namespacefranka_a46b8f11959ed3f731a0914f524af8e69}{kMaxTranslationalJerk},
240         \hyperlink{namespacefranka_aafb1f5ef8f8a7abd546edea498c18b45}{kMaxRotationalVelocity}, \hyperlink{namespacefranka_a5e3d5c95ba72f9660f17f8ebf1e0aa2e}{kMaxRotationalAcceleration},
       \hyperlink{namespacefranka_a259520ce1b6b5b85a88d05262286820d}{kMaxRotationalJerk}, command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a7291f9f7ad3b2cce841f4c0f2a976acb}{O\_T\_EE\_c},
241         robot\_state.O\_T\_EE\_c, robot\_state.O\_dP\_EE\_c, robot\_state.O\_ddP\_EE\_c);
242   \}
243   \hyperlink{namespacefranka_1_1anonymous__namespace_02control__loop_8cpp_03_aff0fa7aeeb1c7339b142b323b30b1146}{checkMatrix}(command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a7291f9f7ad3b2cce841f4c0f2a976acb}{O\_T\_EE\_c});
244 
245   \textcolor{keywordflow}{if} (motion.hasElbow()) \{
246     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a1ad30cc0b7210a2d93914e3f98c0ef22}{valid\_elbow} = \textcolor{keyword}{true};
247     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c} = motion.elbow;
248     \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_} < \hyperlink{namespacefranka_adb10b364af8deb9e17d9bcc1ff2695be}{kMaxCutoffFrequency}) \{
249       command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c}[0] =
250           \hyperlink{namespacefranka_a94c21b0e87afce0147a9cd6025c239ca}{lowpassFilter}(\hyperlink{namespacefranka_a1e207a0d5a6e90c1e1a78e6e1057120a}{kDeltaT}, command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c}[0], robot\_state.elbow\_c[0], 
      \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_});
251     \}
252     \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\_rate\_}) \{
253       command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c}[0] =
254           \hyperlink{namespacefranka_a77e127a920da5b0ad29877ec3ff29f15}{limitRate}(\hyperlink{namespacefranka_a2896b2e0c8bd96f9ee242c1203ac3483}{kMaxElbowVelocity}, 
      \hyperlink{namespacefranka_af365e574ad7b1580ce15e30dd909b3ba}{kMaxElbowAcceleration}, \hyperlink{namespacefranka_adc70178204d4da073c78de777a2dff74}{kMaxElbowJerk}, command->
      \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c}[0],
255                     robot\_state.elbow\_c[0], robot\_state.delbow\_c[0], robot\_state.ddelbow\_c[0]);
256     \}
257     \hyperlink{namespacefranka_1_1anonymous__namespace_02control__loop_8cpp_03_a36007bd7eb2c55ea2c41d6bdad9c5abc}{checkElbow}(command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c});
258   \} \textcolor{keywordflow}{else} \{
259     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a1ad30cc0b7210a2d93914e3f98c0ef22}{valid\_elbow} = \textcolor{keyword}{false};
260     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c} = \{\};
261   \}
262 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop_a1b12d574fd73dfeab9d44cc662435fb6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_ae6c2b0808a95542fa41e2351f7d8f242}\label{classfranka_1_1ControlLoop_ae6c2b0808a95542fa41e2351f7d8f242}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!convert\+Motion@{convert\+Motion}}
\index{convert\+Motion@{convert\+Motion}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{convert\+Motion()}{convertMotion()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily template$<$$>$ \\
void \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ \hyperlink{classfranka_1_1CartesianVelocities}{Cartesian\+Velocities} $>$\+::convert\+Motion (\begin{DoxyParamCaption}\item[{const \hyperlink{classfranka_1_1CartesianVelocities}{Cartesian\+Velocities} \&}]{motion,  }\item[{const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&}]{robot\+\_\+state,  }\item[{\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 265 of file control\+\_\+loop.\+cpp.



References franka\+::anonymous\+\_\+namespace\{control\+\_\+loop.\+cpp\}\+::check\+Elbow(), franka\+::anonymous\+\_\+namespace\{control\+\_\+loop.\+cpp\}\+::check\+Finite(), franka\+::\+Control\+Loop$<$ T $>$\+::cutoff\+\_\+frequency\+\_\+, franka\+::\+Robot\+State\+::ddelbow\+\_\+c, franka\+::\+Robot\+State\+::delbow\+\_\+c, franka\+::\+Cartesian\+Velocities\+::elbow, research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command\+::elbow\+\_\+c, franka\+::\+Robot\+State\+::elbow\+\_\+c, franka\+::\+Cartesian\+Velocities\+::has\+Elbow(), franka\+::k\+DeltaT, franka\+::k\+Max\+Cutoff\+Frequency, franka\+::k\+Max\+Elbow\+Acceleration, franka\+::k\+Max\+Elbow\+Jerk, franka\+::k\+Max\+Elbow\+Velocity, franka\+::k\+Max\+Rotational\+Acceleration, franka\+::k\+Max\+Rotational\+Jerk, franka\+::k\+Max\+Rotational\+Velocity, franka\+::k\+Max\+Translational\+Acceleration, franka\+::k\+Max\+Translational\+Jerk, franka\+::k\+Max\+Translational\+Velocity, franka\+::\+Control\+Loop$<$ T $>$\+::limit\+\_\+rate\+\_\+, franka\+::limit\+Rate(), franka\+::lowpass\+Filter(), franka\+::\+Robot\+State\+::\+O\+\_\+dd\+P\+\_\+\+E\+E\+\_\+c, franka\+::\+Cartesian\+Velocities\+::\+O\+\_\+d\+P\+\_\+\+EE, research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command\+::\+O\+\_\+d\+P\+\_\+\+E\+E\+\_\+c, franka\+::\+Robot\+State\+::\+O\+\_\+d\+P\+\_\+\+E\+E\+\_\+c, and research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command\+::valid\+\_\+elbow.


\begin{DoxyCode}
268                                                             \{
269   command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab7e7e2e76ab64b86802b95a20780412f}{O\_dP\_EE\_c} = motion.O\_dP\_EE;
270   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_} < \hyperlink{namespacefranka_adb10b364af8deb9e17d9bcc1ff2695be}{kMaxCutoffFrequency}) \{
271     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < 6; i++) \{
272       command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab7e7e2e76ab64b86802b95a20780412f}{O\_dP\_EE\_c}[i] = \hyperlink{namespacefranka_a94c21b0e87afce0147a9cd6025c239ca}{lowpassFilter}(\hyperlink{namespacefranka_a1e207a0d5a6e90c1e1a78e6e1057120a}{kDeltaT}, command->
      \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab7e7e2e76ab64b86802b95a20780412f}{O\_dP\_EE\_c}[i],
273                                             robot\_state.O\_dP\_EE\_c[i], 
      \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_});
274     \}
275   \}
276   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\_rate\_}) \{
277     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab7e7e2e76ab64b86802b95a20780412f}{O\_dP\_EE\_c} =
278         \hyperlink{namespacefranka_a77e127a920da5b0ad29877ec3ff29f15}{limitRate}(\hyperlink{namespacefranka_a857e1e5e18d688ec7095264a629bf474}{kMaxTranslationalVelocity}, 
      \hyperlink{namespacefranka_a3803b1a54ba526ccaa4fa0d15446f3db}{kMaxTranslationalAcceleration}, 
      \hyperlink{namespacefranka_a46b8f11959ed3f731a0914f524af8e69}{kMaxTranslationalJerk},
279                   \hyperlink{namespacefranka_aafb1f5ef8f8a7abd546edea498c18b45}{kMaxRotationalVelocity}, 
      \hyperlink{namespacefranka_a5e3d5c95ba72f9660f17f8ebf1e0aa2e}{kMaxRotationalAcceleration}, \hyperlink{namespacefranka_a259520ce1b6b5b85a88d05262286820d}{kMaxRotationalJerk},
280                   command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab7e7e2e76ab64b86802b95a20780412f}{O\_dP\_EE\_c}, robot\_state.O\_dP\_EE\_c, robot\_state.O\_ddP\_EE\_c);
281   \}
282   \hyperlink{namespacefranka_1_1anonymous__namespace_02control__loop_8cpp_03_af284e9c97573a00e6fc31f0c716d6add}{checkFinite}(command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_ab7e7e2e76ab64b86802b95a20780412f}{O\_dP\_EE\_c});
283 
284   \textcolor{keywordflow}{if} (motion.hasElbow()) \{
285     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a1ad30cc0b7210a2d93914e3f98c0ef22}{valid\_elbow} = \textcolor{keyword}{true};
286     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c} = motion.elbow;
287     \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_} < \hyperlink{namespacefranka_adb10b364af8deb9e17d9bcc1ff2695be}{kMaxCutoffFrequency}) \{
288       command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c}[0] =
289           \hyperlink{namespacefranka_a94c21b0e87afce0147a9cd6025c239ca}{lowpassFilter}(\hyperlink{namespacefranka_a1e207a0d5a6e90c1e1a78e6e1057120a}{kDeltaT}, command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c}[0], robot\_state.elbow\_c[0], 
      \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_});
290     \}
291     \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\_rate\_}) \{
292       command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c}[0] =
293           \hyperlink{namespacefranka_a77e127a920da5b0ad29877ec3ff29f15}{limitRate}(\hyperlink{namespacefranka_a2896b2e0c8bd96f9ee242c1203ac3483}{kMaxElbowVelocity}, 
      \hyperlink{namespacefranka_af365e574ad7b1580ce15e30dd909b3ba}{kMaxElbowAcceleration}, \hyperlink{namespacefranka_adc70178204d4da073c78de777a2dff74}{kMaxElbowJerk}, command->
      \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c}[0],
294                     robot\_state.elbow\_c[0], robot\_state.delbow\_c[0], robot\_state.ddelbow\_c[0]);
295     \}
296     \hyperlink{namespacefranka_1_1anonymous__namespace_02control__loop_8cpp_03_a36007bd7eb2c55ea2c41d6bdad9c5abc}{checkElbow}(command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c});
297   \} \textcolor{keywordflow}{else} \{
298     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a1ad30cc0b7210a2d93914e3f98c0ef22}{valid\_elbow} = \textcolor{keyword}{false};
299     command->\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand_a04b8ac36d04098c1f7b2935bb954af95}{elbow\_c} = \{\};
300   \}
301 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop_ae6c2b0808a95542fa41e2351f7d8f242_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_acfd08b5dca8a6618b2c4f8aa0ce751b7}\label{classfranka_1_1ControlLoop_acfd08b5dca8a6618b2c4f8aa0ce751b7}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!operator()@{operator()}}
\index{operator()@{operator()}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{operator()()}{operator()()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::operator() (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 128 of file control\+\_\+loop.\+cpp.



References franka\+::\+Robot\+Control\+::cancel\+Motion(), franka\+::\+Control\+Loop$<$ T $>$\+::control\+\_\+callback\+\_\+, franka\+::\+Robot\+Control\+::finish\+Motion(), franka\+::\+Control\+Loop$<$ T $>$\+::motion\+\_\+id\+\_\+, franka\+::\+Control\+Loop$<$ T $>$\+::robot\+\_\+, franka\+::\+Control\+Loop$<$ T $>$\+::spin\+Control(), franka\+::\+Control\+Loop$<$ T $>$\+::spin\+Motion(), franka\+::\+Robot\+Control\+::throw\+On\+Motion\+Error(), franka\+::\+Robot\+State\+::time, and franka\+::\+Robot\+Control\+::update().


\begin{DoxyCode}
128                                     \{
129   RobotState robot\_state = \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_a5b581e84547a76ad1600158345cfd40d}{update}(\textcolor{keyword}{nullptr}, \textcolor{keyword}{nullptr});
130   \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_a796e9fb049ffc36ea44bec85f24e2fe4}{throwOnMotionError}(robot\_state, \hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\_id\_});
131 
132   Duration previous\_time = robot\_state.time;
133 
134   \hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\_interface::robot::MotionGeneratorCommand} 
      motion\_command\{\};
135   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a71249c690ee56b2c099bbb4f29e92c95}{control\_callback\_}) \{
136     \hyperlink{structresearch__interface_1_1robot_1_1ControllerCommand}{research\_interface::robot::ControllerCommand} 
      control\_command\{\};
137     \textcolor{keywordflow}{while} (\hyperlink{classfranka_1_1ControlLoop_abec82e0ac5015ccc5fb078851ecae381}{spinMotion}(robot\_state, robot\_state.time - previous\_time, &motion\_command) &&
138            \hyperlink{classfranka_1_1ControlLoop_a480c19a57bf2a7df4ab9c6f68667b865}{spinControl}(robot\_state, robot\_state.time - previous\_time, &control\_command)) \{
139       previous\_time = robot\_state.time;
140       robot\_state = \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_a5b581e84547a76ad1600158345cfd40d}{update}(&motion\_command, &control\_command);
141       \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_a796e9fb049ffc36ea44bec85f24e2fe4}{throwOnMotionError}(robot\_state, \hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\_id\_});
142     \}
143     \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_aae1629178b5eeb5d8e4d41d2f746f2fc}{finishMotion}(\hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\_id\_}, &motion\_command, &control\_command);
144   \} \textcolor{keywordflow}{else} \{
145     \textcolor{keywordflow}{while} (\hyperlink{classfranka_1_1ControlLoop_abec82e0ac5015ccc5fb078851ecae381}{spinMotion}(robot\_state, robot\_state.time - previous\_time, &motion\_command)) \{
146       previous\_time = robot\_state.time;
147       robot\_state = \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_a5b581e84547a76ad1600158345cfd40d}{update}(&motion\_command, \textcolor{keyword}{nullptr});
148       \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_a796e9fb049ffc36ea44bec85f24e2fe4}{throwOnMotionError}(robot\_state, \hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\_id\_});
149     \}
150     \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_aae1629178b5eeb5d8e4d41d2f746f2fc}{finishMotion}(\hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\_id\_}, &motion\_command, \textcolor{keyword}{nullptr});
151   \}
152 \} \textcolor{keywordflow}{catch} (...) \{
153   \textcolor{keywordflow}{try} \{
154     \hyperlink{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}{robot\_}.\hyperlink{classfranka_1_1RobotControl_a8eb19b5e21e2ac8d9c98bffe2dd9124d}{cancelMotion}(\hyperlink{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}{motion\_id\_});
155   \} \textcolor{keywordflow}{catch} (...) \{
156   \}
157   \textcolor{keywordflow}{throw};
158 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop_acfd08b5dca8a6618b2c4f8aa0ce751b7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_a480c19a57bf2a7df4ab9c6f68667b865}\label{classfranka_1_1ControlLoop_a480c19a57bf2a7df4ab9c6f68667b865}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!spin\+Control@{spin\+Control}}
\index{spin\+Control@{spin\+Control}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{spin\+Control()}{spinControl()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\hyperlink{classbool}{bool} \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::spin\+Control (\begin{DoxyParamCaption}\item[{const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&}]{robot\+\_\+state,  }\item[{\hyperlink{classfranka_1_1Duration}{franka\+::\+Duration}}]{time\+\_\+step,  }\item[{\hyperlink{structresearch__interface_1_1robot_1_1ControllerCommand}{research\+\_\+interface\+::robot\+::\+Controller\+Command} $\ast$}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 161 of file control\+\_\+loop.\+cpp.



References franka\+::anonymous\+\_\+namespace\{control\+\_\+loop.\+cpp\}\+::check\+Finite(), franka\+::\+Control\+Loop$<$ T $>$\+::control\+\_\+callback\+\_\+, franka\+::\+Control\+Loop$<$ T $>$\+::cutoff\+\_\+frequency\+\_\+, franka\+::k\+DeltaT, franka\+::k\+Max\+Cutoff\+Frequency, franka\+::k\+Max\+Torque\+Rate, franka\+::\+Control\+Loop$<$ T $>$\+::limit\+\_\+rate\+\_\+, franka\+::limit\+Rate(), franka\+::lowpass\+Filter(), franka\+::\+Finishable\+::motion\+\_\+finished, franka\+::\+Torques\+::tau\+\_\+J, research\+\_\+interface\+::robot\+::\+Controller\+Command\+::tau\+\_\+\+J\+\_\+d, and franka\+::\+Robot\+State\+::tau\+\_\+\+J\+\_\+d.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::operator()().


\begin{DoxyCode}
163                                                                                     \{
164   Torques control\_output = \hyperlink{classfranka_1_1ControlLoop_a71249c690ee56b2c099bbb4f29e92c95}{control\_callback\_}(robot\_state, time\_step);
165   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_} < \hyperlink{namespacefranka_adb10b364af8deb9e17d9bcc1ff2695be}{kMaxCutoffFrequency}) \{
166     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < 7; i++) \{
167       control\_output.tau\_J[i] = \hyperlink{namespacefranka_a94c21b0e87afce0147a9cd6025c239ca}{lowpassFilter}(\hyperlink{namespacefranka_a1e207a0d5a6e90c1e1a78e6e1057120a}{kDeltaT}, control\_output.tau\_J[i],
168                                               robot\_state.tau\_J\_d[i], 
      \hyperlink{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}{cutoff\_frequency\_});
169     \}
170   \}
171   \textcolor{keywordflow}{if} (\hyperlink{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}{limit\_rate\_}) \{
172     control\_output.tau\_J = \hyperlink{namespacefranka_a77e127a920da5b0ad29877ec3ff29f15}{limitRate}(\hyperlink{namespacefranka_a6c1a0e9a5e1f375d2aad61edac907d4e}{kMaxTorqueRate}, control\_output.tau\_J, 
      robot\_state.tau\_J\_d);
173   \}
174   command->\hyperlink{structresearch__interface_1_1robot_1_1ControllerCommand_a55f1abde5337f7ba6f170c8b7d8f89aa}{tau\_J\_d} = control\_output.tau\_J;
175   \hyperlink{namespacefranka_1_1anonymous__namespace_02control__loop_8cpp_03_af284e9c97573a00e6fc31f0c716d6add}{checkFinite}(command->\hyperlink{structresearch__interface_1_1robot_1_1ControllerCommand_a55f1abde5337f7ba6f170c8b7d8f89aa}{tau\_J\_d});
176   \textcolor{keywordflow}{return} !control\_output.motion\_finished;
177 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1ControlLoop_a480c19a57bf2a7df4ab9c6f68667b865_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{classfranka_1_1ControlLoop_a480c19a57bf2a7df4ab9c6f68667b865_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_abec82e0ac5015ccc5fb078851ecae381}\label{classfranka_1_1ControlLoop_abec82e0ac5015ccc5fb078851ecae381}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!spin\+Motion@{spin\+Motion}}
\index{spin\+Motion@{spin\+Motion}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{spin\+Motion()}{spinMotion()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\hyperlink{classbool}{bool} \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::spin\+Motion (\begin{DoxyParamCaption}\item[{const \hyperlink{structfranka_1_1RobotState}{Robot\+State} \&}]{robot\+\_\+state,  }\item[{\hyperlink{classfranka_1_1Duration}{franka\+::\+Duration}}]{time\+\_\+step,  }\item[{\hyperlink{structresearch__interface_1_1robot_1_1MotionGeneratorCommand}{research\+\_\+interface\+::robot\+::\+Motion\+Generator\+Command} $\ast$}]{command }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 180 of file control\+\_\+loop.\+cpp.



References franka\+::\+Control\+Loop$<$ T $>$\+::convert\+Motion(), and franka\+::\+Control\+Loop$<$ T $>$\+::motion\+\_\+callback\+\_\+.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::operator()().


\begin{DoxyCode}
182                                                                                         \{
183   T motion\_output = \hyperlink{classfranka_1_1ControlLoop_a8304d484624d562c70e3572d5037871b}{motion\_callback\_}(robot\_state, time\_step);
184   \hyperlink{classfranka_1_1ControlLoop_a51052003f900ee3e99bc5409df6bbf47}{convertMotion}(motion\_output, robot\_state, command);
185   \textcolor{keywordflow}{return} !motion\_output.motion\_finished;
186 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{classfranka_1_1ControlLoop_abec82e0ac5015ccc5fb078851ecae381_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{classfranka_1_1ControlLoop_abec82e0ac5015ccc5fb078851ecae381_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classfranka_1_1ControlLoop_a71249c690ee56b2c099bbb4f29e92c95}\label{classfranka_1_1ControlLoop_a71249c690ee56b2c099bbb4f29e92c95}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!control\+\_\+callback\+\_\+@{control\+\_\+callback\+\_\+}}
\index{control\+\_\+callback\+\_\+@{control\+\_\+callback\+\_\+}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{control\+\_\+callback\+\_\+}{control\_callback\_}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
const \hyperlink{classfranka_1_1ControlLoop_a1b050245c6f2795d491899440f95cec3}{Control\+Callback} \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::control\+\_\+callback\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 56 of file control\+\_\+loop.\+h.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::\+Control\+Loop(), franka\+::\+Control\+Loop$<$ T $>$\+::operator()(), and franka\+::\+Control\+Loop$<$ T $>$\+::spin\+Control().

\mbox{\Hypertarget{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}\label{classfranka_1_1ControlLoop_a1c01098536341d3e1da2617a08129529}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!cutoff\+\_\+frequency\+\_\+@{cutoff\+\_\+frequency\+\_\+}}
\index{cutoff\+\_\+frequency\+\_\+@{cutoff\+\_\+frequency\+\_\+}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{cutoff\+\_\+frequency\+\_\+}{cutoff\_frequency\_}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
const double \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::cutoff\+\_\+frequency\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 58 of file control\+\_\+loop.\+h.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::convert\+Motion(), and franka\+::\+Control\+Loop$<$ T $>$\+::spin\+Control().

\mbox{\Hypertarget{classfranka_1_1ControlLoop_a935eeb4a950ed2276e5c00d26e9c5a16}\label{classfranka_1_1ControlLoop_a935eeb4a950ed2276e5c00d26e9c5a16}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!k\+Default\+Deviation@{k\+Default\+Deviation}}
\index{k\+Default\+Deviation@{k\+Default\+Deviation}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{k\+Default\+Deviation}{kDefaultDeviation}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
constexpr \hyperlink{structresearch__interface_1_1robot_1_1Move_1_1Deviation}{research\+\_\+interface\+::robot\+::\+Move\+::\+Deviation} \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::k\+Default\+Deviation\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}
\{10.0, 3.12,
                                                                                2 * M\_PI\}
\end{DoxyCode}


Definition at line 20 of file control\+\_\+loop.\+h.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::\+Control\+Loop().

\mbox{\Hypertarget{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}\label{classfranka_1_1ControlLoop_a660f32d739c7f7ed05fa97b06220b98b}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!limit\+\_\+rate\+\_\+@{limit\+\_\+rate\+\_\+}}
\index{limit\+\_\+rate\+\_\+@{limit\+\_\+rate\+\_\+}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{limit\+\_\+rate\+\_\+}{limit\_rate\_}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
const \hyperlink{classbool}{bool} \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::limit\+\_\+rate\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 57 of file control\+\_\+loop.\+h.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::convert\+Motion(), and franka\+::\+Control\+Loop$<$ T $>$\+::spin\+Control().

\mbox{\Hypertarget{classfranka_1_1ControlLoop_a8304d484624d562c70e3572d5037871b}\label{classfranka_1_1ControlLoop_a8304d484624d562c70e3572d5037871b}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!motion\+\_\+callback\+\_\+@{motion\+\_\+callback\+\_\+}}
\index{motion\+\_\+callback\+\_\+@{motion\+\_\+callback\+\_\+}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{motion\+\_\+callback\+\_\+}{motion\_callback\_}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
const \hyperlink{classfranka_1_1ControlLoop_a23624d5a86fe2b206986af4757ba1822}{Motion\+Generator\+Callback} \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::motion\+\_\+callback\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 55 of file control\+\_\+loop.\+h.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::\+Control\+Loop(), and franka\+::\+Control\+Loop$<$ T $>$\+::spin\+Motion().

\mbox{\Hypertarget{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}\label{classfranka_1_1ControlLoop_a4dd139afcabc3a50bb9eb35ca44845fa}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!motion\+\_\+id\+\_\+@{motion\+\_\+id\+\_\+}}
\index{motion\+\_\+id\+\_\+@{motion\+\_\+id\+\_\+}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{motion\+\_\+id\+\_\+}{motion\_id\_}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
uint32\+\_\+t \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::motion\+\_\+id\+\_\+ = 0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 59 of file control\+\_\+loop.\+h.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::\+Control\+Loop(), and franka\+::\+Control\+Loop$<$ T $>$\+::operator()().

\mbox{\Hypertarget{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}\label{classfranka_1_1ControlLoop_aa618899fdcd85da8659fb3b1bd8c65b3}} 
\index{franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}!robot\+\_\+@{robot\+\_\+}}
\index{robot\+\_\+@{robot\+\_\+}!franka\+::\+Control\+Loop@{franka\+::\+Control\+Loop}}
\subsubsection{\texorpdfstring{robot\+\_\+}{robot\_}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
\hyperlink{classfranka_1_1RobotControl}{Robot\+Control}\& \hyperlink{classfranka_1_1ControlLoop}{franka\+::\+Control\+Loop}$<$ T $>$\+::robot\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 54 of file control\+\_\+loop.\+h.



Referenced by franka\+::\+Control\+Loop$<$ T $>$\+::\+Control\+Loop(), and franka\+::\+Control\+Loop$<$ T $>$\+::operator()().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/libfranka/src/\hyperlink{control__loop_8h}{control\+\_\+loop.\+h}\item 
smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/libfranka/src/\hyperlink{control__loop_8cpp}{control\+\_\+loop.\+cpp}\end{DoxyCompactItemize}
