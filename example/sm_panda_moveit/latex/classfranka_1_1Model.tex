\hypertarget{classfranka_1_1Model}{}\section{franka\+:\+:Model Class Reference}
\label{classfranka_1_1Model}\index{franka\+::\+Model@{franka\+::\+Model}}


{\ttfamily \#include $<$model.\+h$>$}



Collaboration diagram for franka\+:\+:Model\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=191pt]{classfranka_1_1Model__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classfranka_1_1Model_a751d939935eb51f06dcfd18c6c756ceb}{Model} (\hyperlink{classfranka_1_1Network}{franka\+::\+Network} \&network)
\item 
\hyperlink{classfranka_1_1Model_a8b58ff37f62512aecdcd0e6aabfd9548}{Model} (\hyperlink{classfranka_1_1Model}{Model} \&\&model) noexcept
\item 
\hyperlink{classfranka_1_1Model}{Model} \& \hyperlink{classfranka_1_1Model_ae45b00c240eb10447beda17f4b916ca8}{operator=} (\hyperlink{classfranka_1_1Model}{Model} \&\&model) noexcept
\item 
\hyperlink{classfranka_1_1Model_a1d6ffa26afc6cfdff7e329d15b8bd65e}{$\sim$\+Model} () noexcept
\item 
std\+::array$<$ double, 16 $>$ \hyperlink{classfranka_1_1Model_adcd68a474d3843e5d9699c0f37fc76e8}{pose} (\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame} frame, const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&robot\+\_\+state) const
\item 
std\+::array$<$ double, 16 $>$ \hyperlink{classfranka_1_1Model_a0961c236a435b5378dcfc732a22c632d}{pose} (\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame} frame, const std\+::array$<$ double, 7 $>$ \&q, const std\+::array$<$ double, 16 $>$ \&F\+\_\+\+T\+\_\+\+EE, const std\+::array$<$ double, 16 $>$ \&E\+E\+\_\+\+T\+\_\+K) const
\item 
std\+::array$<$ double, 42 $>$ \hyperlink{classfranka_1_1Model_af5525104e79cd6b8b05adbf83dc328c1}{body\+Jacobian} (\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame} frame, const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&robot\+\_\+state) const
\item 
std\+::array$<$ double, 42 $>$ \hyperlink{classfranka_1_1Model_a9ce79d7c8a1461ba7769e7348ce85b4d}{body\+Jacobian} (\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame} frame, const std\+::array$<$ double, 7 $>$ \&q, const std\+::array$<$ double, 16 $>$ \&F\+\_\+\+T\+\_\+\+EE, const std\+::array$<$ double, 16 $>$ \&E\+E\+\_\+\+T\+\_\+K) const
\item 
std\+::array$<$ double, 42 $>$ \hyperlink{classfranka_1_1Model_a0b0fb1bf5f54be87bfaa023e4d0c5b9f}{zero\+Jacobian} (\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame} frame, const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&robot\+\_\+state) const
\item 
std\+::array$<$ double, 42 $>$ \hyperlink{classfranka_1_1Model_a4b5cfa12760f3db4b919ac0651614386}{zero\+Jacobian} (\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame} frame, const std\+::array$<$ double, 7 $>$ \&q, const std\+::array$<$ double, 16 $>$ \&F\+\_\+\+T\+\_\+\+EE, const std\+::array$<$ double, 16 $>$ \&E\+E\+\_\+\+T\+\_\+K) const
\item 
std\+::array$<$ double, 49 $>$ \hyperlink{classfranka_1_1Model_a39eefe959a2a9155b4782b98ad766530}{mass} (const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&robot\+\_\+state) const noexcept
\item 
std\+::array$<$ double, 49 $>$ \hyperlink{classfranka_1_1Model_a8ad5a8fcf29a3112c10664b644d2151a}{mass} (const std\+::array$<$ double, 7 $>$ \&q, const std\+::array$<$ double, 9 $>$ \&I\+\_\+total, double m\+\_\+total, const std\+::array$<$ double, 3 $>$ \&F\+\_\+x\+\_\+\+Ctotal) const noexcept
\item 
std\+::array$<$ double, 7 $>$ \hyperlink{classfranka_1_1Model_a9be45a91c3288088dd222f2e55870aa8}{coriolis} (const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&robot\+\_\+state) const noexcept
\item 
std\+::array$<$ double, 7 $>$ \hyperlink{classfranka_1_1Model_a4f9edd79fba1989a09cda4aeaf811bf2}{coriolis} (const std\+::array$<$ double, 7 $>$ \&q, const std\+::array$<$ double, 7 $>$ \&dq, const std\+::array$<$ double, 9 $>$ \&I\+\_\+total, double m\+\_\+total, const std\+::array$<$ double, 3 $>$ \&F\+\_\+x\+\_\+\+Ctotal) const noexcept
\item 
std\+::array$<$ double, 7 $>$ \hyperlink{classfranka_1_1Model_a9ebf2dbe37a78071fd74d2e552125cb4}{gravity} (const std\+::array$<$ double, 7 $>$ \&q, double m\+\_\+total, const std\+::array$<$ double, 3 $>$ \&F\+\_\+x\+\_\+\+Ctotal, const std\+::array$<$ double, 3 $>$ \&gravity\+\_\+earth=\{\{0., 0., -\/9.\+81\}\}) const noexcept
\item 
std\+::array$<$ double, 7 $>$ \hyperlink{classfranka_1_1Model_abe3bf8777c9476d2d089dc6b9a4f638c}{gravity} (const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&robot\+\_\+state, const std\+::array$<$ double, 3 $>$ \&gravity\+\_\+earth=\{ \{0., 0., -\/9.\+81\}\}) const noexcept
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \hyperlink{classfranka_1_1ModelLibrary}{Model\+Library} $>$ \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Calculates poses of joints and dynamic properties of the robot. 

Definition at line 51 of file model.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classfranka_1_1Model_a751d939935eb51f06dcfd18c6c756ceb}\label{classfranka_1_1Model_a751d939935eb51f06dcfd18c6c756ceb}} 
\index{franka\+::\+Model@{franka\+::\+Model}!Model@{Model}}
\index{Model@{Model}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{Model()}{Model()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily franka\+::\+Model\+::\+Model (\begin{DoxyParamCaption}\item[{\hyperlink{classfranka_1_1Network}{franka\+::\+Network} \&}]{network }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}

Creates a new \hyperlink{classfranka_1_1Model}{Model} instance.

This constructor is for internal use only.

\begin{DoxySeeAlso}{See also}
\hyperlink{classfranka_1_1Robot_a2da598c539469827409ac7e3bb61d5da}{Robot\+::load\+Model}
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em network} & For internal use.\\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em \hyperlink{structfranka_1_1ModelException}{Model\+Exception}} & if the model library cannot be loaded. \\
\hline
\end{DoxyExceptions}


Definition at line 24 of file model.\+cpp.



References operator=(), and $\sim$\+Model().


\begin{DoxyCode}
24 : \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}\{\textcolor{keyword}{new} ModelLibrary(network)\} \{\}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_a751d939935eb51f06dcfd18c6c756ceb_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_a8b58ff37f62512aecdcd0e6aabfd9548}\label{classfranka_1_1Model_a8b58ff37f62512aecdcd0e6aabfd9548}} 
\index{franka\+::\+Model@{franka\+::\+Model}!Model@{Model}}
\index{Model@{Model}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{Model()}{Model()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily franka\+::\+Model\+::\+Model (\begin{DoxyParamCaption}\item[{\hyperlink{classfranka_1_1Model}{Model} \&\&}]{model }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}, {\ttfamily [noexcept]}}

Move-\/constructs a new \hyperlink{classfranka_1_1Model}{Model} instance.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em model} & Other \hyperlink{classfranka_1_1Model}{Model} instance. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classfranka_1_1Model_a1d6ffa26afc6cfdff7e329d15b8bd65e}\label{classfranka_1_1Model_a1d6ffa26afc6cfdff7e329d15b8bd65e}} 
\index{franka\+::\+Model@{franka\+::\+Model}!````~Model@{$\sim$\+Model}}
\index{````~Model@{$\sim$\+Model}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{$\sim$\+Model()}{~Model()}}
{\footnotesize\ttfamily franka\+::\+Model\+::$\sim$\+Model (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}, {\ttfamily [noexcept]}}

Unloads the model library. 

Referenced by Model().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_a1d6ffa26afc6cfdff7e329d15b8bd65e_icgraph}
\end{center}
\end{figure}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classfranka_1_1Model_af5525104e79cd6b8b05adbf83dc328c1}\label{classfranka_1_1Model_af5525104e79cd6b8b05adbf83dc328c1}} 
\index{franka\+::\+Model@{franka\+::\+Model}!body\+Jacobian@{body\+Jacobian}}
\index{body\+Jacobian@{body\+Jacobian}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{body\+Jacobian()}{bodyJacobian()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 42 $>$ franka\+::\+Model\+::body\+Jacobian (\begin{DoxyParamCaption}\item[{\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame}}]{frame,  }\item[{const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&}]{robot\+\_\+state }\end{DoxyParamCaption}) const}

Gets the 6x7 Jacobian for the given frame, relative to that frame.

The Jacobian is represented as a 6x7 matrix in column-\/major format.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em frame} & The desired frame. \\
\hline
\mbox{\tt in}  & {\em robot\+\_\+state} & State from which the pose should be calculated.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vectorized 6x7 Jacobian, column-\/major. 
\end{DoxyReturn}


Definition at line 83 of file model.\+cpp.



References franka\+::\+Robot\+State\+::\+E\+E\+\_\+\+T\+\_\+K, franka\+::\+Robot\+State\+::\+F\+\_\+\+T\+\_\+\+EE, and franka\+::\+Robot\+State\+::q.



Referenced by franka\+\_\+hw\+::\+Franka\+Model\+Handle\+::get\+Body\+Jacobian().


\begin{DoxyCode}
84                                                                                       \{
85   \textcolor{keywordflow}{return} \hyperlink{classfranka_1_1Model_af5525104e79cd6b8b05adbf83dc328c1}{bodyJacobian}(frame, robot\_state.\hyperlink{structfranka_1_1RobotState_ade3335d1ac2f6c44741a916d565f7091}{q}, robot\_state.\hyperlink{structfranka_1_1RobotState_a705b85049fef747008b0eba8284c8057}{F\_T\_EE}, robot\_state.
      \hyperlink{structfranka_1_1RobotState_aeb78a3b4b76d4f57b9898cbea3a0f7aa}{EE\_T\_K});
86 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_af5525104e79cd6b8b05adbf83dc328c1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_a9ce79d7c8a1461ba7769e7348ce85b4d}\label{classfranka_1_1Model_a9ce79d7c8a1461ba7769e7348ce85b4d}} 
\index{franka\+::\+Model@{franka\+::\+Model}!body\+Jacobian@{body\+Jacobian}}
\index{body\+Jacobian@{body\+Jacobian}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{body\+Jacobian()}{bodyJacobian()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 42 $>$ franka\+::\+Model\+::body\+Jacobian (\begin{DoxyParamCaption}\item[{\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame}}]{frame,  }\item[{const std\+::array$<$ double, 7 $>$ \&}]{q,  }\item[{const std\+::array$<$ double, 16 $>$ \&}]{F\+\_\+\+T\+\_\+\+EE,  }\item[{const std\+::array$<$ double, 16 $>$ \&}]{E\+E\+\_\+\+T\+\_\+K }\end{DoxyParamCaption}) const}

Gets the 6x7 Jacobian for the given frame, relative to that frame.

The Jacobian is represented as a 6x7 matrix in column-\/major format.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em frame} & The desired frame. \\
\hline
\mbox{\tt in}  & {\em q} & Joint position. \\
\hline
\mbox{\tt in}  & {\em F\+\_\+\+T\+\_\+\+EE} & End effector in flange frame. \\
\hline
\mbox{\tt in}  & {\em E\+E\+\_\+\+T\+\_\+K} & Stiffness frame K in the end effector frame.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vectorized 6x7 Jacobian, column-\/major. 
\end{DoxyReturn}


Definition at line 88 of file model.\+cpp.



References franka\+::k\+End\+Effector, franka\+::k\+Flange, franka\+::k\+Joint1, franka\+::k\+Joint2, franka\+::k\+Joint3, franka\+::k\+Joint4, franka\+::k\+Joint5, franka\+::k\+Joint6, franka\+::k\+Joint7, franka\+::k\+Stiffness, and library\+\_\+.


\begin{DoxyCode}
93           \{
94   std::array<double, 42> output;
95   \textcolor{keywordflow}{switch} (frame) \{
96     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba63d7910434fd319f86f05a4f0210dc26}{Frame::kJoint1}:
97       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_joint1(output.data());
98       \textcolor{keywordflow}{break};
99     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba568ae979341feef702b710374046568a}{Frame::kJoint2}:
100       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_joint2(q.data(), output.data());
101       \textcolor{keywordflow}{break};
102     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baa9878edbe51d6b7f7a748103fae58a9d}{Frame::kJoint3}:
103       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_joint3(q.data(), output.data());
104       \textcolor{keywordflow}{break};
105     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baee68341b1d0398c4cf2b5fc46bf23936}{Frame::kJoint4}:
106       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_joint4(q.data(), output.data());
107       \textcolor{keywordflow}{break};
108     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5bab59c412f96c1d2e2c4d89fb32d4a647e}{Frame::kJoint5}:
109       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_joint5(q.data(), output.data());
110       \textcolor{keywordflow}{break};
111     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba36035e6e54fca79a6959d78e25a079a4}{Frame::kJoint6}:
112       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_joint6(q.data(), output.data());
113       \textcolor{keywordflow}{break};
114     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baeb10b1b7bf0eff68e741b654c9ab7aef}{Frame::kJoint7}:
115       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_joint7(q.data(), output.data());
116       \textcolor{keywordflow}{break};
117     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba44dcff883faf38ca9a05c8586b5f59c8}{Frame::kFlange}:
118       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_flange(q.data(), output.data());
119       \textcolor{keywordflow}{break};
120     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba3617dcc7555dbca3c3e86e7535914fdf}{Frame::kEndEffector}:
121       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_ee(q.data(), F\_T\_EE.data(), output.data());
122       \textcolor{keywordflow}{break};
123     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba4aa2dd9baea7adf953d69fcea698348f}{Frame::kStiffness}:
124       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->body\_jacobian\_ee(
125           q.data(),
126           Eigen::Matrix4d(Eigen::Matrix4d(F\_T\_EE.data()) * Eigen::Matrix4d(EE\_T\_K.data())).data(),
127           output.data());
128       \textcolor{keywordflow}{break};
129     \textcolor{keywordflow}{default}:
130       \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"Invalid frame given."});
131   \}
132 
133   \textcolor{keywordflow}{return} output;
134 \}
\end{DoxyCode}
\mbox{\Hypertarget{classfranka_1_1Model_a9be45a91c3288088dd222f2e55870aa8}\label{classfranka_1_1Model_a9be45a91c3288088dd222f2e55870aa8}} 
\index{franka\+::\+Model@{franka\+::\+Model}!coriolis@{coriolis}}
\index{coriolis@{coriolis}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{coriolis()}{coriolis()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 7 $>$ franka\+::\+Model\+::coriolis (\begin{DoxyParamCaption}\item[{const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&}]{robot\+\_\+state }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}

Calculates the Coriolis force vector (state-\/space equation)\+: $ c= C \times dq$, in $[Nm]$.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em robot\+\_\+state} & State from which the Coriolis force vector should be calculated.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Coriolis force vector. 
\end{DoxyReturn}


Definition at line 205 of file model.\+cpp.



Referenced by franka\+\_\+hw\+::\+Franka\+Model\+Handle\+::get\+Coriolis(), and main().


\begin{DoxyCode}
206              \{
207   \textcolor{keywordflow}{return} \hyperlink{classfranka_1_1Model_a9be45a91c3288088dd222f2e55870aa8}{coriolis}(robot\_state.\hyperlink{structfranka_1_1RobotState_ade3335d1ac2f6c44741a916d565f7091}{q}, robot\_state.\hyperlink{structfranka_1_1RobotState_af372a0081d72bc7b4fe873f99c7b2d8c}{dq}, robot\_state.\hyperlink{structfranka_1_1RobotState_ad9120ae7b7613e77df8c1c3eba8fb033}{I\_total}, robot\_state.
      \hyperlink{structfranka_1_1RobotState_a87880d4693c8f576ebdabf00f4d4f981}{m\_total},
208                   robot\_state.\hyperlink{structfranka_1_1RobotState_a72ee7362018e3c9e95e3c41e857bfd8d}{F\_x\_Ctotal});
209 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_a9be45a91c3288088dd222f2e55870aa8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_a4f9edd79fba1989a09cda4aeaf811bf2}\label{classfranka_1_1Model_a4f9edd79fba1989a09cda4aeaf811bf2}} 
\index{franka\+::\+Model@{franka\+::\+Model}!coriolis@{coriolis}}
\index{coriolis@{coriolis}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{coriolis()}{coriolis()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 7 $>$ franka\+::\+Model\+::coriolis (\begin{DoxyParamCaption}\item[{const std\+::array$<$ double, 7 $>$ \&}]{q,  }\item[{const std\+::array$<$ double, 7 $>$ \&}]{dq,  }\item[{const std\+::array$<$ double, 9 $>$ \&}]{I\+\_\+total,  }\item[{double}]{m\+\_\+total,  }\item[{const std\+::array$<$ double, 3 $>$ \&}]{F\+\_\+x\+\_\+\+Ctotal }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}

Calculates the Coriolis force vector (state-\/space equation)\+: $ c= C \times dq$, in $[Nm]$.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em q} & Joint position. \\
\hline
\mbox{\tt in}  & {\em dq} & Joint velocity. \\
\hline
\mbox{\tt in}  & {\em I\+\_\+total} & Inertia of the attached total load including end effector, relative to center of mass, given as vectorized 3x3 column-\/major matrix. Unit\+: $[kg \times m^2]$. \\
\hline
\mbox{\tt in}  & {\em m\+\_\+total} & Weight of the attached total load including end effector. Unit\+: $[kg]$. \\
\hline
\mbox{\tt in}  & {\em F\+\_\+x\+\_\+\+Ctotal} & Translation from flange to center of mass of the attached total load. Unit\+: $[m]$.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Coriolis force vector. 
\end{DoxyReturn}


Definition at line 211 of file model.\+cpp.



References library\+\_\+.


\begin{DoxyCode}
217                    \{
218   std::array<double, 7> output;
219   \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->coriolis(q.data(), dq.data(), I\_total.data(), m\_total, F\_x\_Ctotal.data(),
220                      output.data());
221 
222   \textcolor{keywordflow}{return} output;
223 \}
\end{DoxyCode}
\mbox{\Hypertarget{classfranka_1_1Model_a9ebf2dbe37a78071fd74d2e552125cb4}\label{classfranka_1_1Model_a9ebf2dbe37a78071fd74d2e552125cb4}} 
\index{franka\+::\+Model@{franka\+::\+Model}!gravity@{gravity}}
\index{gravity@{gravity}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{gravity()}{gravity()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 7 $>$ franka\+::\+Model\+::gravity (\begin{DoxyParamCaption}\item[{const std\+::array$<$ double, 7 $>$ \&}]{q,  }\item[{double}]{m\+\_\+total,  }\item[{const std\+::array$<$ double, 3 $>$ \&}]{F\+\_\+x\+\_\+\+Ctotal,  }\item[{const std\+::array$<$ double, 3 $>$ \&}]{gravity\+\_\+earth = {\ttfamily \{\{0.,~0.,~-\/9.81\}\}} }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}

Calculates the gravity vector. Unit\+: $[Nm]$.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em q} & Joint position. \\
\hline
\mbox{\tt in}  & {\em m\+\_\+total} & Weight of the attached total load including end effector. Unit\+: $[kg]$. \\
\hline
\mbox{\tt in}  & {\em F\+\_\+x\+\_\+\+Ctotal} & Translation from flange to center of mass of the attached total load. Unit\+: $[m]$. \\
\hline
\mbox{\tt in}  & {\em gravity\+\_\+earth} & Earth\textquotesingle{}s gravity vector. Unit\+: $\frac{m}{s^2}$. Default to \{0.\+0, 0.\+0, -\/9.\+81\}.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Gravity vector. 
\end{DoxyReturn}


Definition at line 231 of file model.\+cpp.



References library\+\_\+.



Referenced by franka\+\_\+hw\+::\+Franka\+Model\+Handle\+::get\+Gravity(), gravity(), and main().


\begin{DoxyCode}
235                                                              \{
236   std::array<double, 7> output;
237   \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->gravity(q.data(), gravity\_earth.data(), m\_total, F\_x\_Ctotal.data(), output.data());
238 
239   \textcolor{keywordflow}{return} output;
240 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_a9ebf2dbe37a78071fd74d2e552125cb4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_abe3bf8777c9476d2d089dc6b9a4f638c}\label{classfranka_1_1Model_abe3bf8777c9476d2d089dc6b9a4f638c}} 
\index{franka\+::\+Model@{franka\+::\+Model}!gravity@{gravity}}
\index{gravity@{gravity}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{gravity()}{gravity()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 7 $>$ franka\+::\+Model\+::gravity (\begin{DoxyParamCaption}\item[{const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&}]{robot\+\_\+state,  }\item[{const std\+::array$<$ double, 3 $>$ \&}]{gravity\+\_\+earth = {\ttfamily \{~\{0.,~0.,~-\/9.81\}\}} }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}

Calculates the gravity vector. Unit\+: $[Nm]$.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em robot\+\_\+state} & State from which the gravity vector should be calculated. \\
\hline
\mbox{\tt in}  & {\em gravity\+\_\+earth} & Earth\textquotesingle{}s gravity vector. Unit\+: $\frac{m}{s^2}$. Default to \{0.\+0, 0.\+0, -\/9.\+81\}.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Gravity vector. 
\end{DoxyReturn}


Definition at line 225 of file model.\+cpp.



References gravity().


\begin{DoxyCode}
227              \{
228   \textcolor{keywordflow}{return} \hyperlink{classfranka_1_1Model_a9ebf2dbe37a78071fd74d2e552125cb4}{gravity}(robot\_state.\hyperlink{structfranka_1_1RobotState_ade3335d1ac2f6c44741a916d565f7091}{q}, robot\_state.\hyperlink{structfranka_1_1RobotState_a87880d4693c8f576ebdabf00f4d4f981}{m\_total}, robot\_state.
      \hyperlink{structfranka_1_1RobotState_a72ee7362018e3c9e95e3c41e857bfd8d}{F\_x\_Ctotal}, gravity\_earth);
229 \};
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_abe3bf8777c9476d2d089dc6b9a4f638c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_a39eefe959a2a9155b4782b98ad766530}\label{classfranka_1_1Model_a39eefe959a2a9155b4782b98ad766530}} 
\index{franka\+::\+Model@{franka\+::\+Model}!mass@{mass}}
\index{mass@{mass}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{mass()}{mass()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 49 $>$ franka\+::\+Model\+::mass (\begin{DoxyParamCaption}\item[{const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&}]{robot\+\_\+state }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}

Calculates the 7x7 mass matrix. Unit\+: $[kg \times m^2]$.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em robot\+\_\+state} & State from which the pose should be calculated.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vectorized 7x7 mass matrix, column-\/major. 
\end{DoxyReturn}


Definition at line 189 of file model.\+cpp.



Referenced by franka\+\_\+hw\+::\+Franka\+Model\+Handle\+::get\+Mass().


\begin{DoxyCode}
189                                                                                          \{
190   \textcolor{keywordflow}{return} \hyperlink{classfranka_1_1Model_a39eefe959a2a9155b4782b98ad766530}{mass}(robot\_state.\hyperlink{structfranka_1_1RobotState_ade3335d1ac2f6c44741a916d565f7091}{q}, robot\_state.\hyperlink{structfranka_1_1RobotState_ad9120ae7b7613e77df8c1c3eba8fb033}{I\_total}, robot\_state.
      \hyperlink{structfranka_1_1RobotState_a87880d4693c8f576ebdabf00f4d4f981}{m\_total}, robot\_state.\hyperlink{structfranka_1_1RobotState_a72ee7362018e3c9e95e3c41e857bfd8d}{F\_x\_Ctotal});
191 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_a39eefe959a2a9155b4782b98ad766530_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_a8ad5a8fcf29a3112c10664b644d2151a}\label{classfranka_1_1Model_a8ad5a8fcf29a3112c10664b644d2151a}} 
\index{franka\+::\+Model@{franka\+::\+Model}!mass@{mass}}
\index{mass@{mass}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{mass()}{mass()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 49 $>$ franka\+::\+Model\+::mass (\begin{DoxyParamCaption}\item[{const std\+::array$<$ double, 7 $>$ \&}]{q,  }\item[{const std\+::array$<$ double, 9 $>$ \&}]{I\+\_\+total,  }\item[{double}]{m\+\_\+total,  }\item[{const std\+::array$<$ double, 3 $>$ \&}]{F\+\_\+x\+\_\+\+Ctotal }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}

Calculates the 7x7 mass matrix. Unit\+: $[kg \times m^2]$.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em q} & Joint position. \\
\hline
\mbox{\tt in}  & {\em I\+\_\+total} & Inertia of the attached total load including end effector, relative to center of mass, given as vectorized 3x3 column-\/major matrix. Unit\+: $[kg \times m^2]$. \\
\hline
\mbox{\tt in}  & {\em m\+\_\+total} & Weight of the attached total load including end effector. Unit\+: $[kg]$. \\
\hline
\mbox{\tt in}  & {\em F\+\_\+x\+\_\+\+Ctotal} & Translation from flange to center of mass of the attached total load. Unit\+: $[m]$.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vectorized 7x7 mass matrix, column-\/major. 
\end{DoxyReturn}


Definition at line 193 of file model.\+cpp.



References library\+\_\+.


\begin{DoxyCode}
198                    \{
199   std::array<double, 49> output;
200   \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->mass(q.data(), I\_total.data(), m\_total, F\_x\_Ctotal.data(), output.data());
201 
202   \textcolor{keywordflow}{return} output;
203 \}
\end{DoxyCode}
\mbox{\Hypertarget{classfranka_1_1Model_ae45b00c240eb10447beda17f4b916ca8}\label{classfranka_1_1Model_ae45b00c240eb10447beda17f4b916ca8}} 
\index{franka\+::\+Model@{franka\+::\+Model}!operator=@{operator=}}
\index{operator=@{operator=}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classfranka_1_1Model}{Model} \& franka\+::\+Model\+::operator= (\begin{DoxyParamCaption}\item[{\hyperlink{classfranka_1_1Model}{Model} \&\&}]{model }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}, {\ttfamily [noexcept]}}

Move-\/assigns this \hyperlink{classfranka_1_1Model}{Model} from another \hyperlink{classfranka_1_1Model}{Model} instance.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em model} & Other \hyperlink{classfranka_1_1Model}{Model} instance.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{classfranka_1_1Model}{Model} instance. 
\end{DoxyReturn}


Referenced by Model().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_ae45b00c240eb10447beda17f4b916ca8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_adcd68a474d3843e5d9699c0f37fc76e8}\label{classfranka_1_1Model_adcd68a474d3843e5d9699c0f37fc76e8}} 
\index{franka\+::\+Model@{franka\+::\+Model}!pose@{pose}}
\index{pose@{pose}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{pose()}{pose()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 16 $>$ franka\+::\+Model\+::pose (\begin{DoxyParamCaption}\item[{\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame}}]{frame,  }\item[{const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&}]{robot\+\_\+state }\end{DoxyParamCaption}) const}

Gets the 4x4 pose matrix for the given frame in base frame.

The pose is represented as a 4x4 matrix in column-\/major format.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em frame} & The desired frame. \\
\hline
\mbox{\tt in}  & {\em robot\+\_\+state} & State from which the pose should be calculated.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vectorized 4x4 pose matrix, column-\/major. 
\end{DoxyReturn}


Definition at line 31 of file model.\+cpp.



References franka\+::\+Robot\+State\+::\+E\+E\+\_\+\+T\+\_\+K, franka\+::\+Robot\+State\+::\+F\+\_\+\+T\+\_\+\+EE, and franka\+::\+Robot\+State\+::q.



Referenced by franka\+\_\+hw\+::\+Franka\+Model\+Handle\+::get\+Pose(), and main().


\begin{DoxyCode}
31                                                                                        \{
32   \textcolor{keywordflow}{return} \hyperlink{classfranka_1_1Model_adcd68a474d3843e5d9699c0f37fc76e8}{pose}(frame, robot\_state.\hyperlink{structfranka_1_1RobotState_ade3335d1ac2f6c44741a916d565f7091}{q}, robot\_state.\hyperlink{structfranka_1_1RobotState_a705b85049fef747008b0eba8284c8057}{F\_T\_EE}, robot\_state.
      \hyperlink{structfranka_1_1RobotState_aeb78a3b4b76d4f57b9898cbea3a0f7aa}{EE\_T\_K});
33 \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_adcd68a474d3843e5d9699c0f37fc76e8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_a0961c236a435b5378dcfc732a22c632d}\label{classfranka_1_1Model_a0961c236a435b5378dcfc732a22c632d}} 
\index{franka\+::\+Model@{franka\+::\+Model}!pose@{pose}}
\index{pose@{pose}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{pose()}{pose()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 16 $>$ franka\+::\+Model\+::pose (\begin{DoxyParamCaption}\item[{\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame}}]{frame,  }\item[{const std\+::array$<$ double, 7 $>$ \&}]{q,  }\item[{const std\+::array$<$ double, 16 $>$ \&}]{F\+\_\+\+T\+\_\+\+EE,  }\item[{const std\+::array$<$ double, 16 $>$ \&}]{E\+E\+\_\+\+T\+\_\+K }\end{DoxyParamCaption}) const}

Gets the 4x4 pose matrix for the given frame in base frame.

The pose is represented as a 4x4 matrix in column-\/major format.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em frame} & The desired frame. \\
\hline
\mbox{\tt in}  & {\em q} & Joint position. \\
\hline
\mbox{\tt in}  & {\em F\+\_\+\+T\+\_\+\+EE} & End effector in flange frame. \\
\hline
\mbox{\tt in}  & {\em E\+E\+\_\+\+T\+\_\+K} & Stiffness frame K in the end effector frame.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vectorized 4x4 pose matrix, column-\/major. 
\end{DoxyReturn}


Definition at line 35 of file model.\+cpp.



References franka\+::k\+End\+Effector, franka\+::k\+Flange, franka\+::k\+Joint1, franka\+::k\+Joint2, franka\+::k\+Joint3, franka\+::k\+Joint4, franka\+::k\+Joint5, franka\+::k\+Joint6, franka\+::k\+Joint7, franka\+::k\+Stiffness, and library\+\_\+.


\begin{DoxyCode}
40           \{
41   std::array<double, 16> output;
42   \textcolor{keywordflow}{switch} (frame) \{
43     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba63d7910434fd319f86f05a4f0210dc26}{Frame::kJoint1}:
44       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->joint1(q.data(), output.data());
45       \textcolor{keywordflow}{break};
46     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba568ae979341feef702b710374046568a}{Frame::kJoint2}:
47       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->joint2(q.data(), output.data());
48       \textcolor{keywordflow}{break};
49     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baa9878edbe51d6b7f7a748103fae58a9d}{Frame::kJoint3}:
50       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->joint3(q.data(), output.data());
51       \textcolor{keywordflow}{break};
52     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baee68341b1d0398c4cf2b5fc46bf23936}{Frame::kJoint4}:
53       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->joint4(q.data(), output.data());
54       \textcolor{keywordflow}{break};
55     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5bab59c412f96c1d2e2c4d89fb32d4a647e}{Frame::kJoint5}:
56       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->joint5(q.data(), output.data());
57       \textcolor{keywordflow}{break};
58     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba36035e6e54fca79a6959d78e25a079a4}{Frame::kJoint6}:
59       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->joint6(q.data(), output.data());
60       \textcolor{keywordflow}{break};
61     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baeb10b1b7bf0eff68e741b654c9ab7aef}{Frame::kJoint7}:
62       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->joint7(q.data(), output.data());
63       \textcolor{keywordflow}{break};
64     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba44dcff883faf38ca9a05c8586b5f59c8}{Frame::kFlange}:
65       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->flange(q.data(), output.data());
66       \textcolor{keywordflow}{break};
67     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba3617dcc7555dbca3c3e86e7535914fdf}{Frame::kEndEffector}:
68       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->ee(q.data(), F\_T\_EE.data(), output.data());
69       \textcolor{keywordflow}{break};
70     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba4aa2dd9baea7adf953d69fcea698348f}{Frame::kStiffness}:
71       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->ee(
72           q.data(),
73           Eigen::Matrix4d(Eigen::Matrix4d(F\_T\_EE.data()) * Eigen::Matrix4d(EE\_T\_K.data())).data(),
74           output.data());
75       \textcolor{keywordflow}{break};
76     \textcolor{keywordflow}{default}:
77       \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"Invalid frame given."});
78   \}
79 
80   \textcolor{keywordflow}{return} output;
81 \}
\end{DoxyCode}
\mbox{\Hypertarget{classfranka_1_1Model_a0b0fb1bf5f54be87bfaa023e4d0c5b9f}\label{classfranka_1_1Model_a0b0fb1bf5f54be87bfaa023e4d0c5b9f}} 
\index{franka\+::\+Model@{franka\+::\+Model}!zero\+Jacobian@{zero\+Jacobian}}
\index{zero\+Jacobian@{zero\+Jacobian}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{zero\+Jacobian()}{zeroJacobian()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 42 $>$ franka\+::\+Model\+::zero\+Jacobian (\begin{DoxyParamCaption}\item[{\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame}}]{frame,  }\item[{const \hyperlink{structfranka_1_1RobotState}{franka\+::\+Robot\+State} \&}]{robot\+\_\+state }\end{DoxyParamCaption}) const}

Gets the 6x7 Jacobian for the given joint relative to the base frame.

The Jacobian is represented as a 6x7 matrix in column-\/major format.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em frame} & The desired frame. \\
\hline
\mbox{\tt in}  & {\em robot\+\_\+state} & State from which the pose should be calculated.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vectorized 6x7 Jacobian, column-\/major. 
\end{DoxyReturn}


Definition at line 136 of file model.\+cpp.



References franka\+::\+Robot\+State\+::\+E\+E\+\_\+\+T\+\_\+K, franka\+::\+Robot\+State\+::\+F\+\_\+\+T\+\_\+\+EE, and franka\+::\+Robot\+State\+::q.



Referenced by franka\+\_\+hw\+::\+Franka\+Model\+Handle\+::get\+Zero\+Jacobian(), and main().


\begin{DoxyCode}
137                                                                                       \{
138   \textcolor{keywordflow}{return} \hyperlink{classfranka_1_1Model_a0b0fb1bf5f54be87bfaa023e4d0c5b9f}{zeroJacobian}(frame, robot\_state.\hyperlink{structfranka_1_1RobotState_ade3335d1ac2f6c44741a916d565f7091}{q}, robot\_state.\hyperlink{structfranka_1_1RobotState_a705b85049fef747008b0eba8284c8057}{F\_T\_EE}, robot\_state.
      \hyperlink{structfranka_1_1RobotState_aeb78a3b4b76d4f57b9898cbea3a0f7aa}{EE\_T\_K});
139 \};
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classfranka_1_1Model_a0b0fb1bf5f54be87bfaa023e4d0c5b9f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classfranka_1_1Model_a4b5cfa12760f3db4b919ac0651614386}\label{classfranka_1_1Model_a4b5cfa12760f3db4b919ac0651614386}} 
\index{franka\+::\+Model@{franka\+::\+Model}!zero\+Jacobian@{zero\+Jacobian}}
\index{zero\+Jacobian@{zero\+Jacobian}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{zero\+Jacobian()}{zeroJacobian()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::array$<$ double, 42 $>$ franka\+::\+Model\+::zero\+Jacobian (\begin{DoxyParamCaption}\item[{\hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5b}{Frame}}]{frame,  }\item[{const std\+::array$<$ double, 7 $>$ \&}]{q,  }\item[{const std\+::array$<$ double, 16 $>$ \&}]{F\+\_\+\+T\+\_\+\+EE,  }\item[{const std\+::array$<$ double, 16 $>$ \&}]{E\+E\+\_\+\+T\+\_\+K }\end{DoxyParamCaption}) const}

Gets the 6x7 Jacobian for the given joint relative to the base frame.

The Jacobian is represented as a 6x7 matrix in column-\/major format.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em frame} & The desired frame. \\
\hline
\mbox{\tt in}  & {\em q} & Joint position. \\
\hline
\mbox{\tt in}  & {\em F\+\_\+\+T\+\_\+\+EE} & End effector in flange frame. \\
\hline
\mbox{\tt in}  & {\em E\+E\+\_\+\+T\+\_\+K} & Stiffness frame K in the end effector frame.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vectorized 6x7 Jacobian, column-\/major. 
\end{DoxyReturn}


Definition at line 141 of file model.\+cpp.



References franka\+::k\+End\+Effector, franka\+::k\+Flange, franka\+::k\+Joint1, franka\+::k\+Joint2, franka\+::k\+Joint3, franka\+::k\+Joint4, franka\+::k\+Joint5, franka\+::k\+Joint6, franka\+::k\+Joint7, franka\+::k\+Stiffness, and library\+\_\+.


\begin{DoxyCode}
146           \{
147   std::array<double, 42> output;
148   \textcolor{keywordflow}{switch} (frame) \{
149     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba63d7910434fd319f86f05a4f0210dc26}{Frame::kJoint1}:
150       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_joint1(output.data());
151       \textcolor{keywordflow}{break};
152     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba568ae979341feef702b710374046568a}{Frame::kJoint2}:
153       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_joint2(q.data(), output.data());
154       \textcolor{keywordflow}{break};
155     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baa9878edbe51d6b7f7a748103fae58a9d}{Frame::kJoint3}:
156       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_joint3(q.data(), output.data());
157       \textcolor{keywordflow}{break};
158     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baee68341b1d0398c4cf2b5fc46bf23936}{Frame::kJoint4}:
159       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_joint4(q.data(), output.data());
160       \textcolor{keywordflow}{break};
161     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5bab59c412f96c1d2e2c4d89fb32d4a647e}{Frame::kJoint5}:
162       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_joint5(q.data(), output.data());
163       \textcolor{keywordflow}{break};
164     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba36035e6e54fca79a6959d78e25a079a4}{Frame::kJoint6}:
165       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_joint6(q.data(), output.data());
166       \textcolor{keywordflow}{break};
167     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5baeb10b1b7bf0eff68e741b654c9ab7aef}{Frame::kJoint7}:
168       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_joint7(q.data(), output.data());
169       \textcolor{keywordflow}{break};
170     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba44dcff883faf38ca9a05c8586b5f59c8}{Frame::kFlange}:
171       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_flange(q.data(), output.data());
172       \textcolor{keywordflow}{break};
173     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba3617dcc7555dbca3c3e86e7535914fdf}{Frame::kEndEffector}:
174       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_ee(q.data(), F\_T\_EE.data(), output.data());
175       \textcolor{keywordflow}{break};
176     \textcolor{keywordflow}{case} \hyperlink{namespacefranka_a00b729ddce916481d3f0d10febec4f5ba4aa2dd9baea7adf953d69fcea698348f}{Frame::kStiffness}:
177       \hyperlink{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}{library\_}->zero\_jacobian\_ee(
178           q.data(),
179           Eigen::Matrix4d(Eigen::Matrix4d(F\_T\_EE.data()) * Eigen::Matrix4d(EE\_T\_K.data())).data(),
180           output.data());
181       \textcolor{keywordflow}{break};
182     \textcolor{keywordflow}{default}:
183       \textcolor{keywordflow}{throw} std::invalid\_argument(\textcolor{stringliteral}{"Invalid frame given."});
184   \}
185 
186   \textcolor{keywordflow}{return} output;
187 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}\label{classfranka_1_1Model_a966abbe74240654b093b4d18476ab09b}} 
\index{franka\+::\+Model@{franka\+::\+Model}!library\+\_\+@{library\+\_\+}}
\index{library\+\_\+@{library\+\_\+}!franka\+::\+Model@{franka\+::\+Model}}
\subsubsection{\texorpdfstring{library\+\_\+}{library\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\hyperlink{classfranka_1_1ModelLibrary}{Model\+Library}$>$ franka\+::\+Model\+::library\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 280 of file model.\+h.



Referenced by body\+Jacobian(), coriolis(), gravity(), mass(), pose(), and zero\+Jacobian().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/libfranka/include/franka/\hyperlink{model_8h}{model.\+h}\item 
smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/libfranka/src/\hyperlink{model_8cpp}{model.\+cpp}\end{DoxyCompactItemize}
