\hypertarget{robot__joint__state__publisher_8cpp}{}\section{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/franka\+\_\+ros/franka\+\_\+visualization/src/robot\+\_\+joint\+\_\+state\+\_\+publisher.cpp File Reference}
\label{robot__joint__state__publisher_8cpp}\index{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/franka\+\_\+ros/franka\+\_\+visualization/src/robot\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp@{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/franka\+\_\+ros/franka\+\_\+visualization/src/robot\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp}}
{\ttfamily \#include $<$franka/exception.\+h$>$}\newline
{\ttfamily \#include $<$franka/robot.\+h$>$}\newline
{\ttfamily \#include $<$ros/ros.\+h$>$}\newline
{\ttfamily \#include $<$sensor\+\_\+msgs/\+Joint\+State.\+h$>$}\newline
Include dependency graph for robot\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{robot__joint__state__publisher_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{robot__joint__state__publisher_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{robot__joint__state__publisher_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{robot__joint__state__publisher_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{robot\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp@{robot\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp}!main@{main}}
\index{main@{main}!robot\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp@{robot\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



Definition at line 8 of file robot\+\_\+joint\+\_\+state\+\_\+publisher.\+cpp.



References franka\+::\+Robot\+State\+::dq, franka\+::\+Robot\+State\+::q, franka\+::\+Robot\+::read(), and franka\+::\+Robot\+State\+::tau\+\_\+J.


\begin{DoxyCode}
8                                 \{
9   ros::init(argc, argv, \textcolor{stringliteral}{"robot\_joint\_state\_publisher"});
10   ros::NodeHandle node\_handle(\textcolor{stringliteral}{"~"});
11 
12   std::vector<std::string> joint\_names;
13   node\_handle.getParam(\textcolor{stringliteral}{"joint\_names"}, joint\_names);
14 
15   \hyperlink{namespacetesting_1_1internal_a8e8ff5b11e64078831112677156cb111}{std::string} robot\_ip;
16   node\_handle.getParam(\textcolor{stringliteral}{"robot\_ip"}, robot\_ip);
17 
18   \textcolor{keywordtype}{double} publish\_rate;
19   node\_handle.getParam(\textcolor{stringliteral}{"publish\_rate"}, publish\_rate);
20 
21   ros::Rate rate(publish\_rate);
22 
23   sensor\_msgs::JointState states;
24   states.effort.resize(joint\_names.size());
25   states.name.resize(joint\_names.size());
26   states.position.resize(joint\_names.size());
27   states.velocity.resize(joint\_names.size());
28 
29   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < joint\_names.size(); i++) \{
30     states.name[i] = joint\_names[i];
31   \}
32 
33   ros::Publisher publisher = node\_handle.advertise<sensor\_msgs::JointState>(\textcolor{stringliteral}{"joint\_states"}, 1);
34 
35   \textcolor{keywordflow}{try} \{
36     \hyperlink{classfranka_1_1Robot}{franka::Robot} robot(robot\_ip);
37 
38     robot.read([&](\textcolor{keyword}{const} \hyperlink{structfranka_1_1RobotState}{franka::RobotState}& robot\_state) \{
39       states.header.stamp = ros::Time::now();
40       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < joint\_names.size(); i++) \{
41         states.position[i] = robot\_state.\hyperlink{structfranka_1_1RobotState_ade3335d1ac2f6c44741a916d565f7091}{q}[i];
42         states.velocity[i] = robot\_state.\hyperlink{structfranka_1_1RobotState_af372a0081d72bc7b4fe873f99c7b2d8c}{dq}[i];
43         states.effort[i] = robot\_state.\hyperlink{structfranka_1_1RobotState_ad90e2518d661da0d8fa4c864bae210e5}{tau\_J}[i];
44       \}
45       publisher.publish(states);
46       ros::spinOnce();
47       rate.sleep();
48       \textcolor{keywordflow}{return} ros::ok();
49     \});
50 
51   \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} \hyperlink{structfranka_1_1Exception}{franka::Exception}& e) \{
52     ROS\_ERROR\_STREAM(\textcolor{stringliteral}{"Exception: "} << e.what());
53     \textcolor{keywordflow}{return} -1;
54   \}
55 
56   \textcolor{keywordflow}{return} 0;
57 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{robot__joint__state__publisher_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}
