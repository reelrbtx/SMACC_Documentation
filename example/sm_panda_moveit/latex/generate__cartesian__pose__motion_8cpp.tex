\hypertarget{generate__cartesian__pose__motion_8cpp}{}\section{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/libfranka/examples/generate\+\_\+cartesian\+\_\+pose\+\_\+motion.cpp File Reference}
\label{generate__cartesian__pose__motion_8cpp}\index{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/libfranka/examples/generate\+\_\+cartesian\+\_\+pose\+\_\+motion.\+cpp@{smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+panda\+\_\+moveit/libfranka/examples/generate\+\_\+cartesian\+\_\+pose\+\_\+motion.\+cpp}}
{\ttfamily \#include $<$cmath$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$franka/exception.\+h$>$}\newline
{\ttfamily \#include $<$franka/robot.\+h$>$}\newline
{\ttfamily \#include \char`\"{}examples\+\_\+common.\+h\char`\"{}}\newline
Include dependency graph for generate\+\_\+cartesian\+\_\+pose\+\_\+motion.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{generate__cartesian__pose__motion_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{generate__cartesian__pose__motion_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{generate__cartesian__pose__motion_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{generate__cartesian__pose__motion_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{generate\+\_\+cartesian\+\_\+pose\+\_\+motion.\+cpp@{generate\+\_\+cartesian\+\_\+pose\+\_\+motion.\+cpp}!main@{main}}
\index{main@{main}!generate\+\_\+cartesian\+\_\+pose\+\_\+motion.\+cpp@{generate\+\_\+cartesian\+\_\+pose\+\_\+motion.\+cpp}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



Definition at line 18 of file generate\+\_\+cartesian\+\_\+pose\+\_\+motion.\+cpp.



References franka\+::\+Robot\+::control(), franka\+::\+Motion\+Finished(), franka\+::\+Robot\+State\+::\+O\+\_\+\+T\+\_\+\+E\+E\+\_\+c, franka\+::\+Robot\+::set\+Collision\+Behavior(), set\+Default\+Behavior(), and franka\+::\+Duration\+::to\+Sec().


\begin{DoxyCode}
18                                 \{
19   \textcolor{keywordflow}{if} (argc != 2) \{
20     std::cerr << \textcolor{stringliteral}{"Usage: "} << argv[0] << \textcolor{stringliteral}{" <robot-hostname>"} << std::endl;
21     \textcolor{keywordflow}{return} -1;
22   \}
23   \textcolor{keywordflow}{try} \{
24     \hyperlink{classfranka_1_1Robot}{franka::Robot} robot(argv[1]);
25     \hyperlink{examples__common_8cpp_ad0c6e1cb044845ee8a01b5aa1e801a45}{setDefaultBehavior}(robot);
26 
27     \textcolor{comment}{// First move the robot to a suitable joint configuration}
28     std::array<double, 7> q\_goal = \{\{0, -M\_PI\_4, 0, -3 * M\_PI\_4, 0, M\_PI\_2, M\_PI\_4\}\};
29     \hyperlink{classMotionGenerator}{MotionGenerator} motion\_generator(0.5, q\_goal);
30     std::cout << \textcolor{stringliteral}{"WARNING: This example will move the robot! "}
31               << \textcolor{stringliteral}{"Please make sure to have the user stop button at hand!"} << std::endl
32               << \textcolor{stringliteral}{"Press Enter to continue..."} << std::endl;
33     std::cin.ignore();
34     robot.control(motion\_generator);
35     std::cout << \textcolor{stringliteral}{"Finished moving to initial joint configuration."} << std::endl;
36 
37     \textcolor{comment}{// Set additional parameters always before the control loop, NEVER in the control loop!}
38     \textcolor{comment}{// Set collision behavior.}
39     robot.setCollisionBehavior(
40         \{\{20.0, 20.0, 18.0, 18.0, 16.0, 14.0, 12.0\}\}, \{\{20.0, 20.0, 18.0, 18.0, 16.0, 14.0, 12.0\}\},
41         \{\{20.0, 20.0, 18.0, 18.0, 16.0, 14.0, 12.0\}\}, \{\{20.0, 20.0, 18.0, 18.0, 16.0, 14.0, 12.0\}\},
42         \{\{20.0, 20.0, 20.0, 25.0, 25.0, 25.0\}\}, \{\{20.0, 20.0, 20.0, 25.0, 25.0, 25.0\}\},
43         \{\{20.0, 20.0, 20.0, 25.0, 25.0, 25.0\}\}, \{\{20.0, 20.0, 20.0, 25.0, 25.0, 25.0\}\});
44 
45     std::array<double, 16> initial\_pose;
46     \textcolor{keywordtype}{double} time = 0.0;
47     robot.control([&time, &initial\_pose](\textcolor{keyword}{const} \hyperlink{structfranka_1_1RobotState}{franka::RobotState}& robot\_state,
48                                          \hyperlink{classfranka_1_1Duration}{franka::Duration} period) -> 
      \hyperlink{classfranka_1_1CartesianPose}{franka::CartesianPose} \{
49       time += period.\hyperlink{classfranka_1_1Duration_a497af77a3280159547f231f0374e9ac1}{toSec}();
50 
51       \textcolor{keywordflow}{if} (time == 0.0) \{
52         initial\_pose = robot\_state.\hyperlink{structfranka_1_1RobotState_a395c48eff099419ea5d42eaf0870fc18}{O\_T\_EE\_c};
53       \}
54 
55       constexpr \textcolor{keywordtype}{double} kRadius = 0.3;
56       \textcolor{keywordtype}{double} angle = M\_PI / 4 * (1 - std::cos(M\_PI / 5.0 * time));
57       \textcolor{keywordtype}{double} delta\_x = kRadius * std::sin(angle);
58       \textcolor{keywordtype}{double} delta\_z = kRadius * (std::cos(angle) - 1);
59 
60       std::array<double, 16> new\_pose = initial\_pose;
61       new\_pose[12] += delta\_x;
62       new\_pose[14] += delta\_z;
63 
64       \textcolor{keywordflow}{if} (time >= 10.0) \{
65         std::cout << std::endl << \textcolor{stringliteral}{"Finished motion, shutting down example"} << std::endl;
66         \textcolor{keywordflow}{return} \hyperlink{namespacefranka_a20791f7142d78bbbe3c957cc66a23ade}{franka::MotionFinished}(new\_pose);
67       \}
68       \textcolor{keywordflow}{return} new\_pose;
69     \});
70   \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} \hyperlink{structfranka_1_1Exception}{franka::Exception}& e) \{
71     std::cout << e.what() << std::endl;
72     \textcolor{keywordflow}{return} -1;
73   \}
74 
75   \textcolor{keywordflow}{return} 0;
76 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{generate__cartesian__pose__motion_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}
