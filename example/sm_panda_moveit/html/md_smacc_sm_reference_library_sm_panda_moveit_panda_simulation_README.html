<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMACC: panda_simulation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SMACC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespacepanda__simulation.html">panda_simulation</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="assets/panda-in-gazebo.png?raw=true" alt="Panda in Gazebo" title="Panda in Gazebo"/>
</div>
<p>This package was written for ROS melodic running under Ubuntu 18.04. Run the following commands to make sure that all additional packages are installed:</p>
<div class="fragment"><div class="line">mkdir -p catkin_ws/src</div><div class="line">cd catkin_ws/src</div><div class="line">git clone https://github.com/erdalpekel/panda_simulation.git</div><div class="line">git clone https://github.com/erdalpekel/panda_moveit_config.git</div><div class="line">git clone --branch simulation https://github.com/erdalpekel/franka_ros.git</div><div class="line">cd ..</div><div class="line">sudo apt-get install libboost-filesystem-dev</div><div class="line">rosdep install --from-paths src --ignore-src -y --skip-keys libfranka</div><div class="line">cd ..</div></div><!-- fragment --><p> It is also important that you build the <em>libfranka</em> library from source and pass its directory to <em>catkin_make</em> when building this ROS package as described in <a href="https://frankaemika.github.io/docs/installation.html#building-from-source">this tutorial</a>.</p>
<p>Currently it includes a controller parameter config file and a launch file to launch the <a href="http://gazebosim.org">Gazebo</a> simulation environment and the Panda robot from FRANKA EMIKA in it with the necessary controllers.</p>
<p>Build the catkin workspace and run the simulation: </p><div class="fragment"><div class="line">catkin_make -j4 -DCMAKE_BUILD_TYPE=Release -DFranka_DIR:PATH=/path/to/libfranka/build</div><div class="line">source devel/setup.bash</div><div class="line">roslaunch panda_simulation simulation.launch</div></div><!-- fragment --><p>Depending on your operating systems language you might need to export the numeric type so that rviz can read the floating point numbers in the robot model correctly:</p>
<div class="fragment"><div class="line">export LC_NUMERIC=&quot;en_US.UTF-8&quot;</div></div><!-- fragment --><p> Otherwise, the robot will appear in rviz in a collapsed state.</p>
<p>You can see the full explanation in my <a href="https://erdalpekel.de/?p=55">blog post</a>.</p>
<h2>Changelog:</h2>
<p><a href="https://erdalpekel.de/?p=123"><em>MoveIt!</em> constraint-aware planning</a></p>
<p>This repository was extended with a ROS node that communicates with the <em>MoveIt!</em> Planning Scene API. It makes sure that the motion planning pipeline avoids collision objects in the environment specified by the user in a separate directory (<code>~/.<a class="el" href="namespacepanda__simulation.html">panda_simulation</a></code>) as <em>json</em> files.</p>
<p><a href="https://erdalpekel.de/?p=123">Publishing a box at Panda's hand in <em>Gazebo</em></a></p>
<p>This repository was extended with a node that publishes a simple box object in the <em>Gazebo</em> simulation at the hand of the robot. The position of this box will get updated as soon as the robot moves.</p>
<p><a href="https://erdalpekel.de/?p=123">Visual Studio Code Remote Docker</a></p>
<p>I have added configuration files and additional setup scripts for developing and using this ROS package within a <em>Docker</em> container. Currently user interfaces for Gazebo and RViz are not supported.</p>
<p><a href="https://erdalpekel.de/?p=285">Position based trajectory execution</a></p>
<p>The joint specifications in Gazebo were changed from an effort interface to position based interface. Furthermore, the PID controller was substituted with the simple gazebo internal position based control mechanism for a more stable movement profile of the robot. A custom joint position based controller was implemented in order to set the initial joint states of the robot to a valid configuration.</p>
<p><a href="https://erdalpekel.de/?p=314">Automatic robot state initialization</a></p>
<p>A separate ROS node was implemented that starts a custom joint position controller and initializes the robot with a specific configuration. It switches back to the default controllers after the robot reaches the desired state.</p>
<div class="image">
<img src="assets/robot-state-initializer.gif?raw=true" alt="Panda state initialization in Gazebo" title="Panda state initialization in Gazebo"/>
</div>
 </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
