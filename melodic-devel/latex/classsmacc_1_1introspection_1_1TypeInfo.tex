\hypertarget{classsmacc_1_1introspection_1_1TypeInfo}{}\section{smacc\+:\+:introspection\+:\+:Type\+Info Class Reference}
\label{classsmacc_1_1introspection_1_1TypeInfo}\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}


{\ttfamily \#include $<$string\+\_\+type\+\_\+walker.\+h$>$}



Collaboration diagram for smacc\+:\+:introspection\+:\+:Type\+Info\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::shared\+\_\+ptr$<$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo}{Type\+Info} $>$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Ptr}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ae57986b3f7e913346a379ec7ad609ffc}{Type\+Info} (std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}, std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{codedtype}, std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype})
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a41eb6c64f46a8e24a206e5702c6f6818}{to\+String} ()
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_adf059b6105291f4d6402068e8b122365}{get\+Non\+Templated\+Type\+Name} ()
\item 
const std\+::string \& \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ad00815e2537a11be93c9a80846f4dc3a}{get\+Full\+Name} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837}{get\+Type\+Info\+From\+String} (std\+::string inputtext)
\item 
static \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881}{get\+From\+Std\+Type\+Info} (const std\+::type\+\_\+info \&tid)
\item 
{\footnotesize template$<$typename T $>$ }\\static \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a8716ca6ac890b4582986d9fe4f5962ad}{get\+Type\+Info\+From\+Type} ()
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Ptr} $>$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aed5166ab8bcd94489e7bc87deb01de5c}{template\+Parameters}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static std\+::map$<$ std\+::string, \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Ptr} $>$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{type\+Info\+Database}
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{codedtype}
\item 
std\+::string \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 18 of file string\+\_\+type\+\_\+walker.\+h.



\subsection{Member Typedef Documentation}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}\label{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!Ptr@{Ptr}}
\index{Ptr@{Ptr}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{Ptr}{Ptr}}
{\footnotesize\ttfamily typedef std\+::shared\+\_\+ptr$<$\hyperlink{classsmacc_1_1introspection_1_1TypeInfo}{Type\+Info}$>$ \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{smacc\+::introspection\+::\+Type\+Info\+::\+Ptr}}



Definition at line 21 of file string\+\_\+type\+\_\+walker.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_ae57986b3f7e913346a379ec7ad609ffc}\label{classsmacc_1_1introspection_1_1TypeInfo_ae57986b3f7e913346a379ec7ad609ffc}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!Type\+Info@{Type\+Info}}
\index{Type\+Info@{Type\+Info}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{Type\+Info()}{TypeInfo()}}
{\footnotesize\ttfamily smacc\+::introspection\+::\+Type\+Info\+::\+Type\+Info (\begin{DoxyParamCaption}\item[{std\+::string}]{tkey,  }\item[{std\+::string}]{codedtype,  }\item[{std\+::string}]{finaltype }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 36 of file string\+\_\+type\+\_\+walker.\+h.



References codedtype, finaltype, and tkey.


\begin{DoxyCode}
37     \{
38         this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} = \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey};
39         this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{codedtype} = \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}{codedtype};
40         this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype} = \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype};
41     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881}\label{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+From\+Std\+Type\+Info@{get\+From\+Std\+Type\+Info}}
\index{get\+From\+Std\+Type\+Info@{get\+From\+Std\+Type\+Info}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{get\+From\+Std\+Type\+Info()}{getFromStdTypeInfo()}}
{\footnotesize\ttfamily \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} smacc\+::introspection\+::\+Type\+Info\+::get\+From\+Std\+Type\+Info (\begin{DoxyParamCaption}\item[{const std\+::type\+\_\+info \&}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 56 of file string\+\_\+type\+\_\+walker.\+cpp.



References smacc\+::introspection\+::demangle\+Symbol(), and get\+Type\+Info\+From\+String().



Referenced by smacc\+::introspection\+::\+State\+Reactor\+Handler\+::add\+Input\+Event(), smacc\+::utils\+::clean\+Short\+Type\+Name(), smacc\+::\+I\+Smacc\+Client\+::get\+Type(), and get\+Type\+Info\+From\+Type().


\begin{DoxyCode}
57 \{
58     \textcolor{keywordflow}{return} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837}{TypeInfo::getTypeInfoFromString}(
      \hyperlink{namespacesmacc_1_1introspection_a2f495108db3e57604d8d3ff5ef030302}{demangleSymbol}(tid.name()));
59 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_ad00815e2537a11be93c9a80846f4dc3a}\label{classsmacc_1_1introspection_1_1TypeInfo_ad00815e2537a11be93c9a80846f4dc3a}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+Full\+Name@{get\+Full\+Name}}
\index{get\+Full\+Name@{get\+Full\+Name}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{get\+Full\+Name()}{getFullName()}}
{\footnotesize\ttfamily const std\+::string\& smacc\+::introspection\+::\+Type\+Info\+::get\+Full\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 55 of file string\+\_\+type\+\_\+walker.\+h.



References finaltype.


\begin{DoxyCode}
56     \{
57         \textcolor{keywordflow}{return} this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype};
58     \}
\end{DoxyCode}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_adf059b6105291f4d6402068e8b122365}\label{classsmacc_1_1introspection_1_1TypeInfo_adf059b6105291f4d6402068e8b122365}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+Non\+Templated\+Type\+Name@{get\+Non\+Templated\+Type\+Name}}
\index{get\+Non\+Templated\+Type\+Name@{get\+Non\+Templated\+Type\+Name}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{get\+Non\+Templated\+Type\+Name()}{getNonTemplatedTypeName()}}
{\footnotesize\ttfamily std\+::string smacc\+::introspection\+::\+Type\+Info\+::get\+Non\+Templated\+Type\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 48 of file string\+\_\+type\+\_\+walker.\+h.



References finaltype.


\begin{DoxyCode}
49     \{
50         \textcolor{keyword}{auto} index = this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype}.find(\textcolor{stringliteral}{"<"});
51         \textcolor{keywordflow}{return} this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype}.substr(0, index);
52     \}
\end{DoxyCode}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837}\label{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+Type\+Info\+From\+String@{get\+Type\+Info\+From\+String}}
\index{get\+Type\+Info\+From\+String@{get\+Type\+Info\+From\+String}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{get\+Type\+Info\+From\+String()}{getTypeInfoFromString()}}
{\footnotesize\ttfamily \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} smacc\+::introspection\+::\+Type\+Info\+::get\+Type\+Info\+From\+String (\begin{DoxyParamCaption}\item[{std\+::string}]{inputtext }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 61 of file string\+\_\+type\+\_\+walker.\+cpp.



References finaltype, smacc\+::introspection\+::replace(), smacc\+::introspection\+::replace\+\_\+back(), battery\+\_\+monitor\+\_\+node\+::t, tkey, and type\+Info\+Database.



Referenced by get\+From\+Std\+Type\+Info().


\begin{DoxyCode}
62 \{
63     \textcolor{keyword}{auto} it = \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{typeInfoDatabase}.find(inputtext);
64 
65     \textcolor{keywordflow}{if} (it != \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{typeInfoDatabase}.end())
66         \textcolor{keywordflow}{return} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{typeInfoDatabase}[inputtext];
67 
68     \textcolor{keywordtype}{bool} ok = \textcolor{keyword}{false};
69     \textcolor{keywordtype}{int} typecount = 0;
70     std::string originalinputtext = inputtext;
71     std::map<std::string, std::string> typesdict;
72     std::map<std::string, std::string> typesdict\_content;
73 
74     \textcolor{keywordflow}{while} (!ok)
75     \{
76         \textcolor{comment}{//simpletypeRE = r"[^<>,\(\backslash\)s]+<[^<>]+>"}
77         \textcolor{comment}{//print ("input: " + inputtext)}
78 
79         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *simpletypeRE = \textcolor{stringliteral}{"[^\(\backslash\)\(\backslash\)<\(\backslash\)\(\backslash\)>,\(\backslash\)\(\backslash\)s]+\(\backslash\)\(\backslash\)<[^\(\backslash\)\(\backslash\)<\(\backslash\)\(\backslash\)>]+\(\backslash\)\(\backslash\)>"};
80         \textcolor{comment}{//std::cout << inputtext << std::endl;}
81 
82         \textcolor{comment}{// locate moste outter template}
83         std::smatch matches;
84         std::regex regex(simpletypeRE); \textcolor{comment}{// matches words beginning by "sub"}
85 
86         \textcolor{comment}{//matches = [m for m in enumerate(re.finditer(simpletypeRE, inputtext))]}
87         std::regex\_search(inputtext, matches, regex);
88 
89         \textcolor{comment}{//   if len(matches) == 0:}
90         \textcolor{comment}{//     if len(typesdict) == 0:}
91         \textcolor{comment}{//         tkey = "$T" + str(typecount)}
92         \textcolor{comment}{//         typesdict[tkey] = inputtext}
93         \textcolor{comment}{//     break}
94 
95         \textcolor{keywordflow}{if} (matches.size() == 0)
96         \{
97             \textcolor{keywordflow}{if} (typesdict.size() == 0)
98             \{
99                 \textcolor{keyword}{auto} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} = \textcolor{stringliteral}{"$T"} + std::to\_string(typecount);
100                 typesdict[\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}] = inputtext;
101             \}
102             \textcolor{keywordflow}{break};
103         \}
104 
105         \textcolor{comment}{// for i, m in matches:}
106         \textcolor{comment}{//     tstr = m.group(0)}
107         \textcolor{comment}{//     tkey = "$T" + str(typecount)}
108         \textcolor{comment}{//     inputtext = inputtext.replace(tstr, tkey)}
109         \textcolor{comment}{//     print("updating input text: " + inputtext)}
110         \textcolor{comment}{//     typecount += 1}
111         \textcolor{comment}{//     typesdict[tkey] = tstr}
112     
113         \textcolor{comment}{// find and replace internal templates with tokens}
114         \textcolor{keywordtype}{int} i = 0;
115         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &m : matches)
116         \{
117             std::string tstr = m;
118             \textcolor{keyword}{auto} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} = \textcolor{stringliteral}{"$T"} + std::to\_string(typecount);
119             \hyperlink{namespacesmacc_1_1introspection_a48571b9bf3b115d2a83cc0147c96d0bd}{replace}(inputtext, tstr, \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey});
120 
121             \textcolor{comment}{//std::cout << "updating input text:" << inputtext << std::endl;}
122 
123             typecount++;
124             typesdict[\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}] = tstr;
125 
126             i++;
127         \}
128     \}
129 
130     \textcolor{comment}{// allbasetypes = set()}
131     \textcolor{comment}{// for tkey in typesdict.keys():}
132     \textcolor{comment}{//     flat = typesdict[tkey]}
133     \textcolor{comment}{//     print flat}
134     \textcolor{comment}{//     startindex = flat.index("<")}
135     \textcolor{comment}{//     flat = flat[startindex + 1:-1]}
136     \textcolor{comment}{//     basetypes = [t.strip() for t in flat.split(",")]}
137     \textcolor{comment}{//     for b in basetypes:}
138     \textcolor{comment}{//         if not "$" in b:}
139     \textcolor{comment}{//             allbasetypes.add(b)}
140 
141     \textcolor{comment}{// SORT by token key to replace back in a single pass}
142     std::vector<std::pair<std::string, std::string> > orderedTypedict;
143     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} &item : typesdict) \{
144         orderedTypedict.emplace\_back(item);
145     \}
146 
147      std::sort(orderedTypedict.begin(),orderedTypedict.end(),
148                                 [](\textcolor{keyword}{auto}& a, \textcolor{keyword}{auto}& b)    
149                                 \{
150                                     \textcolor{keywordflow}{return} std::stoi(a.first.substr(2)) > std::stoi(b.first.substr(2));
151                                 \});
152 
153     std::set<std::string> allbasetypes;
154     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &typeentry : orderedTypedict \textcolor{comment}{/*typesdict*/})
155     \{
156         \textcolor{keyword}{auto} flat = typeentry.second;
157         \textcolor{comment}{//std::cout << flat << std::endl;}
158 
159         \textcolor{keywordtype}{size\_t} startindex = flat.find(\textcolor{stringliteral}{"<"});
160         \textcolor{keywordtype}{size\_t} endindex = flat.find(\textcolor{stringliteral}{">"});
161         \textcolor{keywordflow}{if} (startindex != std::string::npos)
162         \{
163             flat = flat.substr(startindex + 1, endindex - startindex - 1);
164             \textcolor{comment}{//std::cout << typeentry.first <<":" << flat << std::endl;}
165             typesdict\_content[typeentry.first] = flat;
166             std::vector<std::string> localbasetypes;
167 
168             std::istringstream iss(flat);
169             std::string token;
170             \textcolor{keywordflow}{while} (std::getline(iss, token, \textcolor{charliteral}{','}))
171             \{
172                 boost::trim(token);
173                 localbasetypes.push\_back(token);
174                 \textcolor{comment}{//std::cout << "base type: " << token << std::endl;}
175             \}
176 
177             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &b : localbasetypes)
178             \{
179                 \textcolor{keywordtype}{size\_t} found = b.find(\textcolor{stringliteral}{"$"});
180 
181                 \textcolor{keywordflow}{if} (found == std::string::npos)
182                 \{
183                     allbasetypes.insert(b);
184                 \}
185             \}
186         \}
187 
188         \textcolor{comment}{// for b in allbasetypes:}
189         \textcolor{comment}{// typesdict[b] = b}
190 
191         \textcolor{comment}{//refresh}
192         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &b : allbasetypes)
193         \{
194             typesdict[b] = b;
195         \}
196     \}
197     \textcolor{comment}{// types = []}
198     \textcolor{comment}{// for tkey in typesdict:}
199     \textcolor{comment}{//     finaltype = replace\_back(typesdict[tkey], typesdict)}
200     \textcolor{comment}{//     t = TypeInfo(tkey, typesdict[tkey], finaltype)}
201     \textcolor{comment}{//     types.append(t)}
202 
203     \textcolor{comment}{//     print t}
204 
205     \textcolor{comment}{//std::cout << "---------- TYPES -------" << std::endl;}
206     std::vector<TypeInfo::Ptr> types;
207     std::vector<std::string> tokens;
208 
209     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t} : orderedTypedict) \textcolor{comment}{// must be ordered. to avoid issue, ie: $11 to be replaced in $T14}
210     \{
211         \textcolor{comment}{//auto t = *it;}
212         \textcolor{keyword}{auto} &\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} = \hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}.first;
213         \textcolor{keyword}{auto} &tval = \hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}.second;
214         \textcolor{keyword}{auto} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype} = \hyperlink{namespacesmacc_1_1introspection_a1fdcabf57e4277cd66c46522531e35fa}{replace\_back}(tval, orderedTypedict);
215         \textcolor{keyword}{auto} tinfo = std::make\_shared<TypeInfo>(\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey}, tval, \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype});
216         types.push\_back(tinfo);
217         tokens.push\_back(tkey);
218 
219         \textcolor{comment}{//std::cout << "replacing back: " << finaltype << std::endl;}
220     \}
221 
222     \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{TypeInfo::Ptr} roottype = \textcolor{keyword}{nullptr};
223     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t} : types)
224     \{
225         \textcolor{comment}{// std::cout << t->finaltype << " vs " <<originalinputtext;}
226         \textcolor{keywordflow}{if} (\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}->finaltype == originalinputtext)
227         \{
228             roottype = \hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t};
229             \textcolor{keywordflow}{break};
230         \}
231     \}
232 
233     \textcolor{comment}{// std::sort(types.begin(), types.end(),[](auto& a, auto& b)}
234     \textcolor{comment}{// \{}
235     \textcolor{comment}{//     return a->getFullName().size() > b->getFullName().size();}
236     \textcolor{comment}{// \});}
237 
238     \textcolor{comment}{/*}
239 \textcolor{comment}{    std::cout<<"types order:" << std::endl;}
240 \textcolor{comment}{    for(auto t: types)}
241 \textcolor{comment}{    \{}
242 \textcolor{comment}{        std::cout<< t->codedtype << std::endl;}
243 \textcolor{comment}{    \}}
244 \textcolor{comment}{    std::cout<<"---------" << std::endl;}
245 \textcolor{comment}{}
246 \textcolor{comment}{    std::cout<<"types order:" << std::endl;}
247 \textcolor{comment}{    for(auto t: types)}
248 \textcolor{comment}{    \{}
249 \textcolor{comment}{        std::cout<< t->finaltype << std::endl;}
250 \textcolor{comment}{    \}}
251 \textcolor{comment}{    std::cout<<"---------" << std::endl;}
252 \textcolor{comment}{    */}
253 
254     
255     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0; i< types.size();i++)
256     \{
257         \textcolor{keyword}{auto} \hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}= types[i];
258         \textcolor{keyword}{auto} ttoken = tokens[i];
259 
260         \textcolor{comment}{//auto t = types[it1];}
261         std::vector<std::pair<int, TypeInfo::Ptr>> unorderedTemplateParameters;
262 
263         
264         \textcolor{comment}{//std::cout << "original typestr: " << codedtypecopy << std::endl;}
265 
266         \textcolor{comment}{//auto codedtypecopy = t->codedtype;}
267         \textcolor{keyword}{auto} codedtypecopy = typesdict\_content[ttoken];
268 
269         \textcolor{comment}{// std::cout << "original typestr: " << codedtypecopy << std::endl;}
270         \textcolor{comment}{// std::cout << "original token: " << ttoken << std::endl;}
271         \textcolor{comment}{// std::cout << "original typestr: " << typesdict\_content[ttoken] << std::endl;}
272 
273         \textcolor{comment}{// size\_t startindex = codedtypecopy.find("<");}
274         \textcolor{comment}{// size\_t endindex = codedtypecopy.find(">");}
275 
276         \textcolor{comment}{// if (startindex != std::string::npos)}
277         \textcolor{comment}{// \{}
278         \textcolor{comment}{//     codedtypecopy = codedtypecopy.substr(startindex + 1, endindex - startindex - 1);}
279         \textcolor{comment}{// \}}
280         \textcolor{comment}{//std::cout << "original typestr: " << codedtypecopy << std::endl;}
281 
282         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &t2 : types)
283         \textcolor{comment}{//for (auto it2= types.size() -1; it2 >=0; it2--)}
284         \{
285             \textcolor{comment}{//std::cout << it2 << std::endl;}
286             \textcolor{comment}{//auto t2 = types[it2];}
287             \textcolor{comment}{//std::cout << t2->getFullName() << std::endl;}
288             \textcolor{keywordflow}{if} (\hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t} == t2)
289                 \textcolor{keywordflow}{continue};
290 
291             \textcolor{keyword}{auto} index = codedtypecopy.find(t2->tkey);
292             \textcolor{keywordflow}{if} (index != std::string::npos)
293             \{
294                 \textcolor{keyword}{auto} pair = std::make\_pair(index, t2); \textcolor{comment}{// this line is important for the order of templates}
295                 \textcolor{comment}{//auto pair = std::make\_pair(0, t2);}
296                 \textcolor{comment}{//std::cout << "matches: " << t2->tkey <<std::endl;}
297                 unorderedTemplateParameters.push\_back(pair);
298                 \hyperlink{namespacesmacc_1_1introspection_a48571b9bf3b115d2a83cc0147c96d0bd}{replace}(codedtypecopy,t2->tkey,\textcolor{stringliteral}{""}); \textcolor{comment}{// consume token}
299                 \textcolor{comment}{//std::cout << "codedtypecopy: " << codedtypecopy << std::endl;}
300             \}
301         \}
302 
303         std::sort(unorderedTemplateParameters.begin(), unorderedTemplateParameters.end(),
304                   [](\textcolor{keyword}{auto} &a, \textcolor{keyword}{auto} &b) -> \textcolor{keywordtype}{bool} \{
305                       \textcolor{keywordflow}{return} a.first <= b.first;
306                   \});
307 
308         ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"------------------"});
309         ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"CREATING TYPE:"} << \hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}->getFullName());
310 
311         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &item : unorderedTemplateParameters)
312         \{
313             ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{" - template paramter: "} << item.second->getFullName());
314             \hyperlink{namespacebattery__monitor__node_a7a63d20d1ea461e280f4eb5b47f925cd}{t}->templateParameters.push\_back(item.second);
315         \}
316         ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"------------------"});
317     \}
318 
319     ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"ADDING TYPE TO DATABASE: "} << inputtext);
320     ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"Current Database"});
321     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} &en : \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}{typeInfoDatabase})
322     \{
323         ROS\_DEBUG\_STREAM(\textcolor{stringliteral}{"- "} << en.first);
324     \}
325 
326     typeInfoDatabase[originalinputtext] = roottype;
327     \textcolor{keywordflow}{return} roottype;
328 \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_a47d65b6c61499d7ae8ab9f6325c84837_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a8716ca6ac890b4582986d9fe4f5962ad}\label{classsmacc_1_1introspection_1_1TypeInfo_a8716ca6ac890b4582986d9fe4f5962ad}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!get\+Type\+Info\+From\+Type@{get\+Type\+Info\+From\+Type}}
\index{get\+Type\+Info\+From\+Type@{get\+Type\+Info\+From\+Type}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{get\+Type\+Info\+From\+Type()}{getTypeInfoFromType()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
static \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} smacc\+::introspection\+::\+Type\+Info\+::get\+Type\+Info\+From\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 28 of file string\+\_\+type\+\_\+walker.\+h.



References get\+From\+Std\+Type\+Info().


\begin{DoxyCode}
29     \{
30         \textcolor{keywordflow}{return} \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_ada1e604cd8bf968a5f816fbace4af881}{TypeInfo::getFromStdTypeInfo}(\textcolor{keyword}{typeid}(T));
31     \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsmacc_1_1introspection_1_1TypeInfo_a8716ca6ac890b4582986d9fe4f5962ad_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a41eb6c64f46a8e24a206e5702c6f6818}\label{classsmacc_1_1introspection_1_1TypeInfo_a41eb6c64f46a8e24a206e5702c6f6818}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!to\+String@{to\+String}}
\index{to\+String@{to\+String}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{to\+String()}{toString()}}
{\footnotesize\ttfamily std\+::string smacc\+::introspection\+::\+Type\+Info\+::to\+String (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 43 of file string\+\_\+type\+\_\+walker.\+h.



References finaltype, and tkey.


\begin{DoxyCode}
44     \{
45         \textcolor{keywordflow}{return} this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}{tkey} + \textcolor{stringliteral}{":"} + this->\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}{finaltype};
46     \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}\label{classsmacc_1_1introspection_1_1TypeInfo_a117d2b73994b78a6e4e81cdf7054912c}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!codedtype@{codedtype}}
\index{codedtype@{codedtype}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{codedtype}{codedtype}}
{\footnotesize\ttfamily std\+::string smacc\+::introspection\+::\+Type\+Info\+::codedtype\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 64 of file string\+\_\+type\+\_\+walker.\+h.



Referenced by Type\+Info().

\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}\label{classsmacc_1_1introspection_1_1TypeInfo_aa4010ed427e12db443e08ab16a3de243}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!finaltype@{finaltype}}
\index{finaltype@{finaltype}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{finaltype}{finaltype}}
{\footnotesize\ttfamily std\+::string smacc\+::introspection\+::\+Type\+Info\+::finaltype\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 65 of file string\+\_\+type\+\_\+walker.\+h.



Referenced by get\+Full\+Name(), get\+Non\+Templated\+Type\+Name(), get\+Type\+Info\+From\+String(), to\+String(), and Type\+Info().

\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_aed5166ab8bcd94489e7bc87deb01de5c}\label{classsmacc_1_1introspection_1_1TypeInfo_aed5166ab8bcd94489e7bc87deb01de5c}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!template\+Parameters@{template\+Parameters}}
\index{template\+Parameters@{template\+Parameters}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{template\+Parameters}{templateParameters}}
{\footnotesize\ttfamily std\+::vector$<$\hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Ptr}$>$ smacc\+::introspection\+::\+Type\+Info\+::template\+Parameters}



Definition at line 34 of file string\+\_\+type\+\_\+walker.\+h.

\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}\label{classsmacc_1_1introspection_1_1TypeInfo_a697dd505119258dba1224d10eea5b2bd}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!tkey@{tkey}}
\index{tkey@{tkey}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{tkey}{tkey}}
{\footnotesize\ttfamily std\+::string smacc\+::introspection\+::\+Type\+Info\+::tkey\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 63 of file string\+\_\+type\+\_\+walker.\+h.



Referenced by get\+Type\+Info\+From\+String(), to\+String(), and Type\+Info().

\mbox{\Hypertarget{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}\label{classsmacc_1_1introspection_1_1TypeInfo_ab780c03206b824aaf338135d16b0eff4}} 
\index{smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}!type\+Info\+Database@{type\+Info\+Database}}
\index{type\+Info\+Database@{type\+Info\+Database}!smacc\+::introspection\+::\+Type\+Info@{smacc\+::introspection\+::\+Type\+Info}}
\subsubsection{\texorpdfstring{type\+Info\+Database}{typeInfoDatabase}}
{\footnotesize\ttfamily std\+::map$<$ std\+::string, \hyperlink{classsmacc_1_1introspection_1_1TypeInfo_aa6ffd9c39811d59f7c771941b7fad860}{Type\+Info\+::\+Ptr} $>$ smacc\+::introspection\+::\+Type\+Info\+::type\+Info\+Database\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 60 of file string\+\_\+type\+\_\+walker.\+h.



Referenced by get\+Type\+Info\+From\+String(), and smacc\+::introspection\+::replace\+\_\+back().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
smacc/include/smacc/introspection/\hyperlink{string__type__walker_8h}{string\+\_\+type\+\_\+walker.\+h}\item 
smacc/src/smacc/introspection/\hyperlink{string__type__walker_8cpp}{string\+\_\+type\+\_\+walker.\+cpp}\end{DoxyCompactItemize}
