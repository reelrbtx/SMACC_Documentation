\hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion}{}\section{cl\+\_\+move\+\_\+group\+\_\+interface\+:\+:Cb\+Circular\+Pivot\+Motion Class Reference}
\label{classcl__move__group__interface_1_1CbCircularPivotMotion}\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}


{\ttfamily \#include $<$cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+h$>$}



Inheritance diagram for cl\+\_\+move\+\_\+group\+\_\+interface\+:\+:Cb\+Circular\+Pivot\+Motion\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classcl__move__group__interface_1_1CbCircularPivotMotion__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for cl\+\_\+move\+\_\+group\+\_\+interface\+:\+:Cb\+Circular\+Pivot\+Motion\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcl__move__group__interface_1_1CbCircularPivotMotion__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_adc0d93cb33df529d6a1e277fed25ceb1}{Cb\+Circular\+Pivot\+Motion} (std\+::string tip\+Link=\char`\"{}\char`\"{})
\item 
\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_adff54e8098cab08fdf52839cd1e40dcb}{Cb\+Circular\+Pivot\+Motion} (const geometry\+\_\+msgs\+::\+Pose\+Stamped \&plane\+Pivot\+Pose, double delta\+Radians, std\+::string tip\+Link=\char`\"{}\char`\"{})
\item 
\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_ae2035c601c6eb32950dc1aba2aff5f3a}{Cb\+Circular\+Pivot\+Motion} (const geometry\+\_\+msgs\+::\+Pose\+Stamped \&plane\+Pivot\+Pose, const geometry\+\_\+msgs\+::\+Pose \&relative\+Initial\+Pose, double delta\+Radians, std\+::string tip\+Link=\char`\"{}\char`\"{})
\item 
virtual void \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a8d019ec6b9b26a2af0740b915d441a40}{generate\+Trajectory} () override
\item 
virtual void \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a48911ad62608cb00c04e979e2f6f644a}{create\+Markers} () override
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
boost\+::optional$<$ double $>$ \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a39fa383804d82285e07fa1c5a37cc587}{angular\+Speed\+\_\+rad\+\_\+s\+\_\+}
\item 
boost\+::optional$<$ double $>$ \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_adf6f6bc7a7a55f5c3dff80475e33c2e3}{linear\+Speed\+\_\+m\+\_\+s\+\_\+}
\item 
boost\+::optional$<$ geometry\+\_\+msgs\+::\+Pose $>$ \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relative\+Initial\+Pose\+\_\+}
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
geometry\+\_\+msgs\+::\+Pose\+Stamped \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{plane\+Pivot\+Pose\+\_\+}
\item 
double \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_afade33f1182615c64ea972075bfd2b95}{delta\+Radians\+\_\+}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a147d7113ed686709dc2d362e56a95ad9}{compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot} ()
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 14 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_adc0d93cb33df529d6a1e277fed25ceb1}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_adc0d93cb33df529d6a1e277fed25ceb1}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!Cb\+Circular\+Pivot\+Motion@{Cb\+Circular\+Pivot\+Motion}}
\index{Cb\+Circular\+Pivot\+Motion@{Cb\+Circular\+Pivot\+Motion}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{Cb\+Circular\+Pivot\+Motion()}{CbCircularPivotMotion()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::\+Cb\+Circular\+Pivot\+Motion (\begin{DoxyParamCaption}\item[{std\+::string}]{tip\+Link = {\ttfamily \char`\"{}\char`\"{}} }\end{DoxyParamCaption})}



Definition at line 11 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+cpp.


\begin{DoxyCode}
12         : \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_af7e718b0c53e912fd74968abbb0a4810}{CbMoveEndEffectorTrajectory}(tipLink)
13     \{
14     \}
\end{DoxyCode}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_adff54e8098cab08fdf52839cd1e40dcb}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_adff54e8098cab08fdf52839cd1e40dcb}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!Cb\+Circular\+Pivot\+Motion@{Cb\+Circular\+Pivot\+Motion}}
\index{Cb\+Circular\+Pivot\+Motion@{Cb\+Circular\+Pivot\+Motion}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{Cb\+Circular\+Pivot\+Motion()}{CbCircularPivotMotion()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::\+Cb\+Circular\+Pivot\+Motion (\begin{DoxyParamCaption}\item[{const geometry\+\_\+msgs\+::\+Pose\+Stamped \&}]{plane\+Pivot\+Pose,  }\item[{double}]{delta\+Radians,  }\item[{std\+::string}]{tip\+Link = {\ttfamily \char`\"{}\char`\"{}} }\end{DoxyParamCaption})}



Definition at line 16 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+cpp.


\begin{DoxyCode}
17         : \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}(planePivotPose), \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_afade33f1182615c64ea972075bfd2b95}{deltaRadians\_}(deltaRadians), 
      \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_af7e718b0c53e912fd74968abbb0a4810}{CbMoveEndEffectorTrajectory}(tipLink)
18     \{
19     \}
\end{DoxyCode}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_ae2035c601c6eb32950dc1aba2aff5f3a}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_ae2035c601c6eb32950dc1aba2aff5f3a}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!Cb\+Circular\+Pivot\+Motion@{Cb\+Circular\+Pivot\+Motion}}
\index{Cb\+Circular\+Pivot\+Motion@{Cb\+Circular\+Pivot\+Motion}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{Cb\+Circular\+Pivot\+Motion()}{CbCircularPivotMotion()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::\+Cb\+Circular\+Pivot\+Motion (\begin{DoxyParamCaption}\item[{const geometry\+\_\+msgs\+::\+Pose\+Stamped \&}]{plane\+Pivot\+Pose,  }\item[{const geometry\+\_\+msgs\+::\+Pose \&}]{relative\+Initial\+Pose,  }\item[{double}]{delta\+Radians,  }\item[{std\+::string}]{tip\+Link = {\ttfamily \char`\"{}\char`\"{}} }\end{DoxyParamCaption})}



Definition at line 21 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+cpp.


\begin{DoxyCode}
22         : \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}(planePivotPose), \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_}(
      relativeInitialPose), \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_afade33f1182615c64ea972075bfd2b95}{deltaRadians\_}(deltaRadians), 
      \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_af7e718b0c53e912fd74968abbb0a4810}{CbMoveEndEffectorTrajectory}(tipLink)
23     \{
24     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_a147d7113ed686709dc2d362e56a95ad9}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_a147d7113ed686709dc2d362e56a95ad9}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot@{compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot}}
\index{compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot@{compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot()}{computeCurrentEndEffectorPoseRelativeToPivot()}}
{\footnotesize\ttfamily void cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 121 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+cpp.



References cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+End\+Effector\+Trajectory\+::movegroup\+Client\+\_\+, cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cl\+Move\+Group\+::move\+Group\+Client\+Interface, plane\+Pivot\+Pose\+\_\+, relative\+Initial\+Pose\+\_\+, and cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+End\+Effector\+Trajectory\+::tip\+Link\+\_\+.



Referenced by generate\+Trajectory().


\begin{DoxyCode}
122     \{
123         \textcolor{comment}{//auto currentRobotEndEffectorPose =
       this->movegroupClient\_->moveGroupClientInterface.getCurrentPose();}
124 
125         tf::TransformListener tfListener;
126         \textcolor{comment}{// tf::StampedTransform globalBaseLink;}
127         tf::StampedTransform endEffectorInPivotFrame;
128 
129         \textcolor{keywordflow}{try}
130         \{
131             \textcolor{keywordflow}{if} (!\hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a24c6c30b9b0761a61fa002d947bd3e11}{tipLink\_} || *\hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a24c6c30b9b0761a61fa002d947bd3e11}{tipLink\_} == \textcolor{stringliteral}{""})
132             \{
133                 \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a24c6c30b9b0761a61fa002d947bd3e11}{tipLink\_} = this->\hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_aea650d3e7836125b32be97392b71a7f3}{movegroupClient\_}->
      \hyperlink{classcl__move__group__interface_1_1ClMoveGroup_a92922ea689e4e1b7b91512c56629c95b}{moveGroupClientInterface}.getEndEffectorLink();
134             \}
135 
136             tfListener.waitForTransform(\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.header.frame\_id, *
      \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a24c6c30b9b0761a61fa002d947bd3e11}{tipLink\_}, ros::Time(0), ros::Duration(10));
137             tfListener.lookupTransform(\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.header.frame\_id, *
      \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a24c6c30b9b0761a61fa002d947bd3e11}{tipLink\_}, ros::Time(0), endEffectorInPivotFrame);
138 
139             \textcolor{comment}{// we define here the global frame as the pivot frame id}
140             \textcolor{comment}{// tfListener.waitForTransform(currentRobotEndEffectorPose.header.frame\_id,
       planePivotPose\_.header.frame\_id, ros::Time(0), ros::Duration(10));}
141             \textcolor{comment}{// tfListener.lookupTransform(currentRobotEndEffectorPose.header.frame\_id,
       planePivotPose\_.header.frame\_id, ros::Time(0), globalBaseLink);}
142         \}
143         \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::exception &e)
144         \{
145             std::cerr << e.what() << \textcolor{charliteral}{'\(\backslash\)n'};
146         \}
147 
148         \textcolor{comment}{// tf::Transform endEffectorInBaseLinkFrame;}
149         \textcolor{comment}{// tf::poseMsgToTF(currentRobotEndEffectorPose.pose, endEffectorInBaseLinkFrame);}
150 
151         \textcolor{comment}{// tf::Transform endEffectorInPivotFrame = globalBaseLink * endEffectorInBaseLinkFrame; // pose
       composition}
152 
153         \textcolor{comment}{// now pivot and EndEffector share a common reference frame (let say map)}
154         \textcolor{comment}{// now get the current pose from the pivot reference frame with inverse composition}
155         tf::Transform pivotTransform;
156         tf::poseMsgToTF(\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.pose, pivotTransform);
157         tf::Transform invertedNewReferenceFrame = pivotTransform.inverse();
158 
159         tf::Transform currentPoseRelativeToPivot = invertedNewReferenceFrame * endEffectorInPivotFrame;
160 
161         geometry\_msgs::Pose finalEndEffectorRelativePose;
162         tf::poseTFToMsg(currentPoseRelativeToPivot, finalEndEffectorRelativePose);
163         \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_} = finalEndEffectorRelativePose;
164     \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcl__move__group__interface_1_1CbCircularPivotMotion_a147d7113ed686709dc2d362e56a95ad9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_a48911ad62608cb00c04e979e2f6f644a}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_a48911ad62608cb00c04e979e2f6f644a}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!create\+Markers@{create\+Markers}}
\index{create\+Markers@{create\+Markers}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{create\+Markers()}{createMarkers()}}
{\footnotesize\ttfamily void cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::create\+Markers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a442efa1d5bc9e9a16f74ecd31b13d9b5}{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+End\+Effector\+Trajectory}.



Definition at line 166 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+cpp.



References cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+End\+Effector\+Trajectory\+::beahior\+Markers\+\_\+, cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+End\+Effector\+Trajectory\+::create\+Markers(), and plane\+Pivot\+Pose\+\_\+.


\begin{DoxyCode}
167     \{
168         \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a442efa1d5bc9e9a16f74ecd31b13d9b5}{CbMoveEndEffectorTrajectory::createMarkers}();
169 
170         tf::Transform localdirection;
171         localdirection.setIdentity();
172         localdirection.setOrigin(tf::Vector3(0.12, 0, 0));
173         \textcolor{keyword}{auto} frameid = \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.header.frame\_id;
174 
175         visualization\_msgs::Marker marker;
176         marker.header.frame\_id = frameid;
177         marker.header.stamp = ros::Time::now();
178         marker.ns = \textcolor{stringliteral}{"trajectory"};
179         marker.id = \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a809fb5385adf27c0a1c8f8136566949c}{beahiorMarkers\_}.markers.size();
180         marker.type = visualization\_msgs::Marker::ARROW;
181         marker.action = visualization\_msgs::Marker::ADD;
182         marker.scale.x = 0.01;
183         marker.scale.y = 0.02;
184         marker.scale.z = 0.02;
185         marker.color.a = 1.0;
186         marker.color.r = 0.0;
187         marker.color.g = 0;
188         marker.color.b = 1.0;
189 
190         geometry\_msgs::Point start, end;
191         start.x = \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.pose.position.x;
192         start.y = \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.pose.position.y;
193         start.z = \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.pose.position.z;
194 
195         tf::Transform basetransform;
196         tf::poseMsgToTF(\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.pose, basetransform);
197         tf::Transform endarrow = localdirection * basetransform;
198 
199         end.x = endarrow.getOrigin().x();
200         end.y = endarrow.getOrigin().y();
201         end.z = endarrow.getOrigin().z();
202 
203         marker.pose.orientation.w = 1;
204         marker.points.push\_back(start);
205         marker.points.push\_back(end);
206 
207         \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_a809fb5385adf27c0a1c8f8136566949c}{beahiorMarkers\_}.markers.push\_back(marker);
208     \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcl__move__group__interface_1_1CbCircularPivotMotion_a48911ad62608cb00c04e979e2f6f644a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_a8d019ec6b9b26a2af0740b915d441a40}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_a8d019ec6b9b26a2af0740b915d441a40}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!generate\+Trajectory@{generate\+Trajectory}}
\index{generate\+Trajectory@{generate\+Trajectory}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{generate\+Trajectory()}{generateTrajectory()}}
{\footnotesize\ttfamily void cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::generate\+Trajectory (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_aeae938ab66e18ab7d2fb2427bc83647b}{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+End\+Effector\+Trajectory}.



Definition at line 26 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+cpp.



References angular\+Speed\+\_\+rad\+\_\+s\+\_\+, compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot(), delta\+Radians\+\_\+, cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+End\+Effector\+Trajectory\+::end\+Effector\+Trajectory\+\_\+, linear\+Speed\+\_\+m\+\_\+s\+\_\+, plane\+Pivot\+Pose\+\_\+, and relative\+Initial\+Pose\+\_\+.


\begin{DoxyCode}
27     \{
28         \textcolor{keywordflow}{if} (!\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_})
29         \{
30             this->\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a147d7113ed686709dc2d362e56a95ad9}{computeCurrentEndEffectorPoseRelativeToPivot}(
      );
31         \}
32 
33         \textcolor{comment}{// project offset into the xy-plane}
34         \textcolor{comment}{// get the radius}
35         \textcolor{keywordtype}{double} radius = sqrt(\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_}->position.z * 
      \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_}->position.z + \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_}->position.y
       * \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_}->position.y);
36         \textcolor{keywordtype}{double} initialAngle = atan2(\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_}->position.z, 
      \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_}->position.y);
37 
38         \textcolor{keywordtype}{double} totallineardist = fabs(radius * \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_afade33f1182615c64ea972075bfd2b95}{deltaRadians\_});
39         \textcolor{keywordtype}{double} totalangulardist = fabs(\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_afade33f1182615c64ea972075bfd2b95}{deltaRadians\_});
40 
41         \textcolor{comment}{// at least 1 sample per centimeter (average)}
42         \textcolor{comment}{// at least 1 sample per ~1.1 degrees (average)}
43 
44         \textcolor{keyword}{const} \textcolor{keywordtype}{double} RADS\_PER\_SAMPLE = 0.02;
45         \textcolor{keyword}{const} \textcolor{keywordtype}{double} METERS\_PER\_SAMPLE = 0.01;
46 
47         \textcolor{keywordtype}{int} totalSamplesCount = std::max(totallineardist / METERS\_PER\_SAMPLE, totalangulardist / 
      RADS\_PER\_SAMPLE);
48 
49         \textcolor{keywordtype}{double} linearSecondsPerSample;
50         \textcolor{keywordtype}{double} angularSecondsPerSamples;
51         \textcolor{keywordtype}{double} secondsPerSample;
52 
53         \textcolor{keywordflow}{if} (\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_adf6f6bc7a7a55f5c3dff80475e33c2e3}{linearSpeed\_m\_s\_})
54         \{
55             linearSecondsPerSample = METERS\_PER\_SAMPLE / (*linearSpeed\_m\_s\_);
56         \}
57         \textcolor{keywordflow}{else}
58         \{
59             linearSecondsPerSample = std::numeric\_limits<double>::max();
60         \}
61 
62         \textcolor{keywordflow}{if} (\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a39fa383804d82285e07fa1c5a37cc587}{angularSpeed\_rad\_s\_})
63         \{
64             angularSecondsPerSamples = RADS\_PER\_SAMPLE / (*angularSpeed\_rad\_s\_);
65         \}
66         \textcolor{keywordflow}{else}
67         \{
68             angularSecondsPerSamples = std::numeric\_limits<double>::max();
69         \}
70 
71         \textcolor{keywordflow}{if} (!\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_adf6f6bc7a7a55f5c3dff80475e33c2e3}{linearSpeed\_m\_s\_} && !\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a39fa383804d82285e07fa1c5a37cc587}{angularSpeed\_rad\_s\_})
72         \{
73             secondsPerSample = 0.5;
74         \}
75         \textcolor{keywordflow}{else}
76         \{
77             secondsPerSample = std::min(linearSecondsPerSample, angularSecondsPerSamples);
78         \}
79 
80         \textcolor{keywordtype}{double} currentAngle = initialAngle;
81 
82         \textcolor{keywordtype}{double} angleStep = \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_afade33f1182615c64ea972075bfd2b95}{deltaRadians\_} / (double)totalSamplesCount;
83 
84         tf::Transform tfBasePose;
85         tf::poseMsgToTF(\hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.pose, tfBasePose);
86 
87         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < totalSamplesCount; i++)
88         \{
89             \textcolor{comment}{// relativePose i}
90             currentAngle += angleStep;
91             \textcolor{keywordtype}{double} y = radius * cos(currentAngle);
92             \textcolor{keywordtype}{double} z = radius * sin(currentAngle);
93 
94             geometry\_msgs::Pose relativeCurrentPose;
95 
96             relativeCurrentPose.position.x = \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}{relativeInitialPose\_}->position.x;
97             relativeCurrentPose.position.y = y;
98             relativeCurrentPose.position.z = z;
99 
100             \textcolor{keyword}{auto} localquat = tf::createQuaternionFromRPY(currentAngle, 0, 0);
101             \textcolor{comment}{//relativeCurrentPose.orientation = relativeInitialPose\_.orientation;}
102             \textcolor{comment}{//tf::quaternionTFToMsg(localquat, relativeCurrentPose.orientation);}
103             relativeCurrentPose.orientation.w = 1;
104 
105             tf::Transform tfRelativeCurrentPose;
106             tf::poseMsgToTF(relativeCurrentPose, tfRelativeCurrentPose);
107 
108             tf::Transform tfGlobalPose = tfRelativeCurrentPose * tfBasePose;
109 
110             tfGlobalPose.setRotation(tfGlobalPose.getRotation() * localquat);
111 
112             geometry\_msgs::PoseStamped globalPose;
113             tf::poseTFToMsg(tfGlobalPose, globalPose.pose);
114             globalPose.header.frame\_id = \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.header.frame\_id;
115             globalPose.header.stamp = \hyperlink{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}{planePivotPose\_}.header.stamp + ros::Duration(i * 
      secondsPerSample);
116 
117             this->\hyperlink{classcl__move__group__interface_1_1CbMoveEndEffectorTrajectory_ae13dfd31ea3660646e03882f0c2c29f0}{endEffectorTrajectory\_}.push\_back(globalPose);
118         \}
119     \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcl__move__group__interface_1_1CbCircularPivotMotion_a8d019ec6b9b26a2af0740b915d441a40_cgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_a39fa383804d82285e07fa1c5a37cc587}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_a39fa383804d82285e07fa1c5a37cc587}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!angular\+Speed\+\_\+rad\+\_\+s\+\_\+@{angular\+Speed\+\_\+rad\+\_\+s\+\_\+}}
\index{angular\+Speed\+\_\+rad\+\_\+s\+\_\+@{angular\+Speed\+\_\+rad\+\_\+s\+\_\+}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{angular\+Speed\+\_\+rad\+\_\+s\+\_\+}{angularSpeed\_rad\_s\_}}
{\footnotesize\ttfamily boost\+::optional$<$double$>$ cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::angular\+Speed\+\_\+rad\+\_\+s\+\_\+}



Definition at line 17 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+h.



Referenced by generate\+Trajectory().

\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_afade33f1182615c64ea972075bfd2b95}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_afade33f1182615c64ea972075bfd2b95}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!delta\+Radians\+\_\+@{delta\+Radians\+\_\+}}
\index{delta\+Radians\+\_\+@{delta\+Radians\+\_\+}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{delta\+Radians\+\_\+}{deltaRadians\_}}
{\footnotesize\ttfamily double cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::delta\+Radians\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 36 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+h.



Referenced by cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+End\+Effector\+Rotate\+::\+Cb\+End\+Effector\+Rotate(), and generate\+Trajectory().

\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_adf6f6bc7a7a55f5c3dff80475e33c2e3}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_adf6f6bc7a7a55f5c3dff80475e33c2e3}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!linear\+Speed\+\_\+m\+\_\+s\+\_\+@{linear\+Speed\+\_\+m\+\_\+s\+\_\+}}
\index{linear\+Speed\+\_\+m\+\_\+s\+\_\+@{linear\+Speed\+\_\+m\+\_\+s\+\_\+}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{linear\+Speed\+\_\+m\+\_\+s\+\_\+}{linearSpeed\_m\_s\_}}
{\footnotesize\ttfamily boost\+::optional$<$double$>$ cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::linear\+Speed\+\_\+m\+\_\+s\+\_\+}



Definition at line 18 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+h.



Referenced by generate\+Trajectory().

\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_a0994efbe93b9f9a61fcf3703c360cda2}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!plane\+Pivot\+Pose\+\_\+@{plane\+Pivot\+Pose\+\_\+}}
\index{plane\+Pivot\+Pose\+\_\+@{plane\+Pivot\+Pose\+\_\+}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{plane\+Pivot\+Pose\+\_\+}{planePivotPose\_}}
{\footnotesize\ttfamily geometry\+\_\+msgs\+::\+Pose\+Stamped cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::plane\+Pivot\+Pose\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 34 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+h.



Referenced by compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot(), create\+Markers(), generate\+Trajectory(), and cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+End\+Effector\+Rotate\+::on\+Entry().

\mbox{\Hypertarget{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}\label{classcl__move__group__interface_1_1CbCircularPivotMotion_a1b2cc65d2f27a4dec54c20f1f00d4bb8}} 
\index{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}!relative\+Initial\+Pose\+\_\+@{relative\+Initial\+Pose\+\_\+}}
\index{relative\+Initial\+Pose\+\_\+@{relative\+Initial\+Pose\+\_\+}!cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion@{cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion}}
\subsubsection{\texorpdfstring{relative\+Initial\+Pose\+\_\+}{relativeInitialPose\_}}
{\footnotesize\ttfamily boost\+::optional$<$geometry\+\_\+msgs\+::\+Pose$>$ cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Circular\+Pivot\+Motion\+::relative\+Initial\+Pose\+\_\+}



Definition at line 21 of file cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+h.



Referenced by compute\+Current\+End\+Effector\+Pose\+Relative\+To\+Pivot(), and generate\+Trajectory().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
smacc\+\_\+client\+\_\+library/move\+\_\+group\+\_\+interface\+\_\+client/include/move\+\_\+group\+\_\+interface\+\_\+client/client\+\_\+behaviors/\hyperlink{cb__circular__pivot__motion_8h}{cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+h}\item 
smacc\+\_\+client\+\_\+library/move\+\_\+group\+\_\+interface\+\_\+client/src/move\+\_\+group\+\_\+interface\+\_\+client/client\+\_\+behaviors/\hyperlink{cb__circular__pivot__motion_8cpp}{cb\+\_\+circular\+\_\+pivot\+\_\+motion.\+cpp}\end{DoxyCompactItemize}
